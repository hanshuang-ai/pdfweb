var Zn=Object.defineProperty;var bn=e=>{throw TypeError(e)};var es=(e,t,s)=>t in e?Zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Qe=(e,t,s)=>es(e,typeof t!="symbol"?t+"":t,s),Ot=(e,t,s)=>t.has(e)||bn("Cannot "+s);var l=(e,t,s)=>(Ot(e,t,"read from private field"),s?s.call(e):t.get(e)),me=(e,t,s)=>t.has(e)?bn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),ve=(e,t,s,n)=>(Ot(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),le=(e,t,s)=>(Ot(e,t,"access private method"),s);var ft=(e,t,s,n)=>({set _(i){ve(e,t,i,s)},get _(){return l(e,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray$1=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},camelizeRE=/-\w/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,t=>t.slice(1).toUpperCase())),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},def=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t},toNumber=e=>{const t=isString(e)?Number(e):NaN;return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$1(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=isString(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const o in i)t[o]=i[o]}return t}else if(isString(e)||isObject(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(s=>{if(s){const n=s.split(propertyDelimiterRE);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray$1(e))for(let s=0;s<e.length;s++){const n=normalizeClass(e[s]);n&&(t+=n+" ")}else if(isObject(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}const isRef$1=e=>!!(e&&e.__v_isRef===!0),toDisplayString=e=>isString(e)?e:e==null?"":isArray$1(e)||isObject(e)&&(e.toString===objectToString||!isFunction(e.toString))?isRef$1(e)?toDisplayString(e.value):JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>isRef$1(t)?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i],o)=>(s[stringifySymbol(n,o)+" =>"]=i,s),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>stringifySymbol(s))}:isSymbol(t)?stringifySymbol(t):isObject(t)&&!isArray$1(t)&&!isPlainObject(t)?String(t):t,stringifySymbol=(e,t="")=>{var s;return isSymbol(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=s}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const t=activeSub,s=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=t,shouldTrack=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)removeSub(t);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(e,t=!1){if(e.flags|=8,t){e.next=batchedComputed,batchedComputed=e;return}e.next=batchedSub,batchedSub=e}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let t=batchedComputed;for(batchedComputed=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;batchedSub;){let t=batchedSub;for(batchedSub=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function prepareDeps(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cleanupDeps(e){let t,s=e.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),removeSub(n),removeDep(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=s}function isDirty(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(refreshComputed(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function refreshComputed(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===globalVersion)||(e.globalVersion=globalVersion,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!isDirty(e))))return;e.flags|=2;const t=e.dep,s=activeSub,n=shouldTrack;activeSub=e,shouldTrack=!0;try{prepareDeps(e);const i=e.fn(e._value);(t.version===0||hasChanged(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{activeSub=s,shouldTrack=n,cleanupDeps(e),e.flags&=-3}}function removeSub(e,t=!1){const{dep:s,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)removeSub(o,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function removeDep(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function cleanupEffect(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=activeSub;activeSub=void 0;try{t()}finally{activeSub=s}}}let globalVersion=0;class Link{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==activeSub)s=this.activeLink=new Link(activeSub,this),activeSub.deps?(s.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=s,activeSub.depsTail=s):activeSub.deps=activeSub.depsTail=s,addSub(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=activeSub.depsTail,s.nextDep=void 0,activeSub.depsTail.nextDep=s,activeSub.depsTail=s,activeSub.deps===s&&(activeSub.deps=n)}return s}trigger(t){this.version++,globalVersion++,this.notify(t)}notify(t){startBatch();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{endBatch()}}}function addSub(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)addSub(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(e,t,s){if(shouldTrack&&activeSub){let n=targetMap.get(e);n||targetMap.set(e,n=new Map);let i=n.get(s);i||(n.set(s,i=new Dep),i.map=n,i.key=s),i.track()}}function trigger(e,t,s,n,i,o){const r=targetMap.get(e);if(!r){globalVersion++;return}const u=c=>{c&&c.trigger()};if(startBatch(),t==="clear")r.forEach(u);else{const c=isArray$1(e),d=c&&isIntegerKey(s);if(c&&s==="length"){const a=Number(n);r.forEach((g,C)=>{(C==="length"||C===ARRAY_ITERATE_KEY||!isSymbol(C)&&C>=a)&&u(g)})}else switch((s!==void 0||r.has(void 0))&&u(r.get(s)),d&&u(r.get(ARRAY_ITERATE_KEY)),t){case"add":c?d&&u(r.get("length")):(u(r.get(ITERATE_KEY)),isMap(e)&&u(r.get(MAP_KEY_ITERATE_KEY)));break;case"delete":c||(u(r.get(ITERATE_KEY)),isMap(e)&&u(r.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&u(r.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(e){const t=toRaw(e);return t===e?t:(track(t,"iterate",ARRAY_ITERATE_KEY),isShallow(e)?t:t.map(toReactive))}function shallowReadArray(e){return track(e=toRaw(e),"iterate",ARRAY_ITERATE_KEY),e}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...e){return reactiveReadArray(this).concat(...e.map(t=>isArray$1(t)?reactiveReadArray(t):t))},entries(){return iterator(this,"entries",e=>(e[1]=toReactive(e[1]),e))},every(e,t){return apply(this,"every",e,t,void 0,arguments)},filter(e,t){return apply(this,"filter",e,t,s=>s.map(toReactive),arguments)},find(e,t){return apply(this,"find",e,t,toReactive,arguments)},findIndex(e,t){return apply(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return apply(this,"findLast",e,t,toReactive,arguments)},findLastIndex(e,t){return apply(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return apply(this,"forEach",e,t,void 0,arguments)},includes(...e){return searchProxy(this,"includes",e)},indexOf(...e){return searchProxy(this,"indexOf",e)},join(e){return reactiveReadArray(this).join(e)},lastIndexOf(...e){return searchProxy(this,"lastIndexOf",e)},map(e,t){return apply(this,"map",e,t,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...e){return noTracking(this,"push",e)},reduce(e,...t){return reduce(this,"reduce",e,t)},reduceRight(e,...t){return reduce(this,"reduceRight",e,t)},shift(){return noTracking(this,"shift")},some(e,t){return apply(this,"some",e,t,void 0,arguments)},splice(...e){return noTracking(this,"splice",e)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(e){return reactiveReadArray(this).toSorted(e)},toSpliced(...e){return reactiveReadArray(this).toSpliced(...e)},unshift(...e){return noTracking(this,"unshift",e)},values(){return iterator(this,"values",toReactive)}};function iterator(e,t,s){const n=shallowReadArray(e),i=n[t]();return n!==e&&!isShallow(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.done||(o.value=s(o.value)),o}),i}const arrayProto=Array.prototype;function apply(e,t,s,n,i,o){const r=shallowReadArray(e),u=r!==e&&!isShallow(e),c=r[t];if(c!==arrayProto[t]){const g=c.apply(e,o);return u?toReactive(g):g}let d=s;r!==e&&(u?d=function(g,C){return s.call(this,toReactive(g),C,e)}:s.length>2&&(d=function(g,C){return s.call(this,g,C,e)}));const a=c.call(r,d,n);return u&&i?i(a):a}function reduce(e,t,s,n){const i=shallowReadArray(e);let o=s;return i!==e&&(isShallow(e)?s.length>3&&(o=function(r,u,c){return s.call(this,r,u,c,e)}):o=function(r,u,c){return s.call(this,r,toReactive(u),c,e)}),i[t](o,...n)}function searchProxy(e,t,s){const n=toRaw(e);track(n,"iterate",ARRAY_ITERATE_KEY);const i=n[t](...s);return(i===-1||i===!1)&&isProxy(s[0])?(s[0]=toRaw(s[0]),n[t](...s)):i}function noTracking(e,t,s=[]){pauseTracking(),startBatch();const n=toRaw(e)[t].apply(e,s);return endBatch(),resetTracking(),n}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol));function hasOwnProperty(e){isSymbol(e)||(e=String(e));const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return o;if(s==="__v_raw")return n===(i?o?shallowReadonlyMap:readonlyMap:o?shallowReactiveMap:reactiveMap).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=isArray$1(t);if(!i){let c;if(r&&(c=arrayInstrumentations[s]))return c;if(s==="hasOwnProperty")return hasOwnProperty}const u=Reflect.get(t,s,isRef(t)?t:n);if((isSymbol(s)?builtInSymbols.has(s):isNonTrackableKeys(s))||(i||track(t,"get",s),o))return u;if(isRef(u)){const c=r&&isIntegerKey(s)?u:u.value;return i&&isObject(c)?readonly(c):c}return isObject(u)?i?readonly(u):reactive(u):u}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!1,t)}set(t,s,n,i){let o=t[s];if(!this._isShallow){const c=isReadonly(o);if(!isShallow(n)&&!isReadonly(n)&&(o=toRaw(o),n=toRaw(n)),!isArray$1(t)&&isRef(o)&&!isRef(n))return c||(o.value=n),!0}const r=isArray$1(t)&&isIntegerKey(s)?Number(s)<t.length:hasOwn(t,s),u=Reflect.set(t,s,n,isRef(t)?t:i);return t===toRaw(i)&&(r?hasChanged(n,o)&&trigger(t,"set",s,n):trigger(t,"add",s,n)),u}deleteProperty(t,s){const n=hasOwn(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&n&&trigger(t,"delete",s,void 0),i}has(t,s){const n=Reflect.has(t,s);return(!isSymbol(s)||!builtInSymbols.has(s))&&track(t,"has",s),n}ownKeys(t){return track(t,"iterate",isArray$1(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function createIterableMethod(e,t,s){return function(...n){const i=this.__v_raw,o=toRaw(i),r=isMap(o),u=e==="entries"||e===Symbol.iterator&&r,c=e==="keys"&&r,d=i[e](...n),a=s?toShallow:t?toReadonly:toReactive;return!t&&track(o,"iterate",c?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:g,done:C}=d.next();return C?{value:g,done:C}:{value:u?[a(g[0]),a(g[1])]:a(g),done:C}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function createInstrumentations(e,t){const s={get(i){const o=this.__v_raw,r=toRaw(o),u=toRaw(i);e||(hasChanged(i,u)&&track(r,"get",i),track(r,"get",u));const{has:c}=getProto(r),d=t?toShallow:e?toReadonly:toReactive;if(c.call(r,i))return d(o.get(i));if(c.call(r,u))return d(o.get(u));o!==r&&o.get(i)},get size(){const i=this.__v_raw;return!e&&track(toRaw(i),"iterate",ITERATE_KEY),i.size},has(i){const o=this.__v_raw,r=toRaw(o),u=toRaw(i);return e||(hasChanged(i,u)&&track(r,"has",i),track(r,"has",u)),i===u?o.has(i):o.has(i)||o.has(u)},forEach(i,o){const r=this,u=r.__v_raw,c=toRaw(u),d=t?toShallow:e?toReadonly:toReactive;return!e&&track(c,"iterate",ITERATE_KEY),u.forEach((a,g)=>i.call(o,d(a),d(g),r))}};return extend(s,e?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(i){!t&&!isShallow(i)&&!isReadonly(i)&&(i=toRaw(i));const o=toRaw(this);return getProto(o).has.call(o,i)||(o.add(i),trigger(o,"add",i,i)),this},set(i,o){!t&&!isShallow(o)&&!isReadonly(o)&&(o=toRaw(o));const r=toRaw(this),{has:u,get:c}=getProto(r);let d=u.call(r,i);d||(i=toRaw(i),d=u.call(r,i));const a=c.call(r,i);return r.set(i,o),d?hasChanged(o,a)&&trigger(r,"set",i,o):trigger(r,"add",i,o),this},delete(i){const o=toRaw(this),{has:r,get:u}=getProto(o);let c=r.call(o,i);c||(i=toRaw(i),c=r.call(o,i)),u&&u.call(o,i);const d=o.delete(i);return c&&trigger(o,"delete",i,void 0),d},clear(){const i=toRaw(this),o=i.size!==0,r=i.clear();return o&&trigger(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=createIterableMethod(i,e,t)}),s}function createInstrumentationGetter(e,t){const s=createInstrumentations(e,t);return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(hasOwn(s,i)&&i in n?s:n,i,o)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,s,n,i){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=getTargetType(e);if(o===0)return e;const r=i.get(e);if(r)return r;const u=new Proxy(e,o===2?n:s);return i.set(e,u),u}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return e?!!e.__v_raw:!1}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return!hasOwn(e,"__v_skip")&&Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function isRef(e){return e?e.__v_isRef===!0:!1}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,s){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:toRaw(t),this._value=s?t:toReactive(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||isShallow(t)||isReadonly(t);t=n?t:toRaw(t),hasChanged(t,s)&&(this._rawValue=t,this._value=n?t:toReactive(t),this.dep.trigger())}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,s)=>t==="__v_raw"?e:unref(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const t=this.dep.track();return refreshComputed(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function computed$1(e,t,s=!1){let n,i;return isFunction(e)?n=e:(n=e.get,i=e.set),new ComputedRefImpl(n,i,s)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(e,t=!1,s=activeWatcher){if(s){let n=cleanupMap.get(s);n||cleanupMap.set(s,n=[]),n.push(e)}}function watch$1(e,t,s=EMPTY_OBJ){const{immediate:n,deep:i,once:o,scheduler:r,augmentJob:u,call:c}=s,d=I=>i?I:isShallow(I)||i===!1||i===0?traverse(I,1):traverse(I);let a,g,C,y,w=!1,F=!1;if(isRef(e)?(g=()=>e.value,w=isShallow(e)):isReactive(e)?(g=()=>d(e),w=!0):isArray$1(e)?(F=!0,w=e.some(I=>isReactive(I)||isShallow(I)),g=()=>e.map(I=>{if(isRef(I))return I.value;if(isReactive(I))return d(I);if(isFunction(I))return c?c(I,2):I()})):isFunction(e)?t?g=c?()=>c(e,2):e:g=()=>{if(C){pauseTracking();try{C()}finally{resetTracking()}}const I=activeWatcher;activeWatcher=a;try{return c?c(e,3,[y]):e(y)}finally{activeWatcher=I}}:g=NOOP,t&&i){const I=g,_=i===!0?1/0:i;g=()=>traverse(I(),_)}const x=getCurrentScope(),T=()=>{a.stop(),x&&x.active&&remove(x.effects,a)};if(o&&t){const I=t;t=(..._)=>{I(..._),T()}}let k=F?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const H=I=>{if(!(!(a.flags&1)||!a.dirty&&!I))if(t){const _=a.run();if(i||w||(F?_.some((E,v)=>hasChanged(E,k[v])):hasChanged(_,k))){C&&C();const E=activeWatcher;activeWatcher=a;try{const v=[_,k===INITIAL_WATCHER_VALUE?void 0:F&&k[0]===INITIAL_WATCHER_VALUE?[]:k,y];k=_,c?c(t,3,v):t(...v)}finally{activeWatcher=E}}}else a.run()};return u&&u(H),a=new ReactiveEffect(g),a.scheduler=r?()=>r(H,!1):H,y=I=>onWatcherCleanup(I,!1,a),C=a.onStop=()=>{const I=cleanupMap.get(a);if(I){if(c)c(I,4);else for(const _ of I)_();cleanupMap.delete(a)}},t?n?H(!0):k=a.run():r?r(H.bind(null,!0),!0):a.run(),T.pause=a.pause.bind(a),T.resume=a.resume.bind(a),T.stop=T,T}function traverse(e,t=1/0,s){if(t<=0||!isObject(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,isRef(e))traverse(e.value,t,s);else if(isArray$1(e))for(let n=0;n<e.length;n++)traverse(e[n],t,s);else if(isSet(e)||isMap(e))e.forEach(n=>{traverse(n,t,s)});else if(isPlainObject(e)){for(const n in e)traverse(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&traverse(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(e,...t){if(isWarning)return;isWarning=!0,pauseTracking();const s=stack.length?stack[stack.length-1].component:null,n=s&&s.appContext.config.warnHandler,i=getComponentTrace();if(n)callWithErrorHandling(n,s,11,[e+t.map(o=>{var r,u;return(u=(r=o.toString)==null?void 0:r.call(o))!=null?u:JSON.stringify(o)}).join(""),s&&s.proxy,i.map(({vnode:o})=>`at <${formatComponentName(s,o.type)}>`).join(`
`),i]);else{const o=[`[Vue warn]: ${e}`,...t];i.length&&o.push(`
`,...formatTrace(i)),console.warn(...o)}resetTracking(),isWarning=!1}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const s=t[0];s&&s.vnode===e?s.recurseCount++:t.push({vnode:e,recurseCount:0});const n=e.component&&e.component.parent;e=n&&n.vnode}return t}function formatTrace(e){const t=[];return e.forEach((s,n)=>{t.push(...n===0?[]:[`
`],...formatTraceEntry(s))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const s=t>0?`... (${t} recursive calls)`:"",n=e.component?e.component.parent==null:!1,i=` at <${formatComponentName(e.component,e.type,n)}`,o=">"+s;return e.props?[i,...formatProps(e.props),o]:[i+o]}function formatProps(e){const t=[],s=Object.keys(e);return s.slice(0,3).forEach(n=>{t.push(...formatProp(n,e[n]))}),s.length>3&&t.push(" ..."),t}function formatProp(e,t,s){return isString(t)?(t=JSON.stringify(t),s?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?s?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),s?t:[`${e}=Ref<`,t,">"]):isFunction(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),s?t:[`${e}=`,t])}function callWithErrorHandling(e,t,s,n){try{return n?e(...n):e()}catch(i){handleError(i,t,s)}}function callWithAsyncErrorHandling(e,t,s,n){if(isFunction(e)){const i=callWithErrorHandling(e,t,s,n);return i&&isPromise(i)&&i.catch(o=>{handleError(o,t,s)}),i}if(isArray$1(e)){const i=[];for(let o=0;o<e.length;o++)i.push(callWithAsyncErrorHandling(e[o],t,s,n));return i}}function handleError(e,t,s,n=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||EMPTY_OBJ;if(t){let u=t.parent;const c=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;u;){const a=u.ec;if(a){for(let g=0;g<a.length;g++)if(a[g](e,c,d)===!1)return}u=u.parent}if(o){pauseTracking(),callWithErrorHandling(o,null,10,[e,c,d]),resetTracking();return}}logError(e,s,i,n,r)}function logError(e,t,s,n=!0,i=!1){if(i)throw e;console.error(e)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex$1(e){let t=flushIndex+1,s=queue.length;for(;t<s;){const n=t+s>>>1,i=queue[n],o=getId(i);o<e||o===e&&i.flags&2?t=n+1:s=n}return t}function queueJob(e){if(!(e.flags&1)){const t=getId(e),s=queue[queue.length-1];!s||!(e.flags&2)&&t>=getId(s)?queue.push(e):queue.splice(findInsertionIndex$1(t),0,e),e.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(e){isArray$1(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&e.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,e):e.flags&1||(pendingPostFlushCbs.push(e),e.flags|=1),queueFlush()}function flushPreFlushCbs(e,t,s=flushIndex+1){for(;s<queue.length;s++){const n=queue[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;queue.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)].sort((s,n)=>getId(s)-getId(n));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const s=activePostFlushCbs[postFlushIndex];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?e.flags&2?-1:1/0:e.id;function flushJobs(e){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),callWithErrorHandling(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&(t.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&setBlockTracking(-1);const o=setCurrentRenderingInstance(t);let r;try{r=e(...i)}finally{setCurrentRenderingInstance(o),n._d&&setBlockTracking(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function withDirectives(e,t){if(currentRenderingInstance===null)return e;const s=getComponentPublicInstance(currentRenderingInstance),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,r,u,c=EMPTY_OBJ]=t[i];o&&(isFunction(o)&&(o={mounted:o,updated:o}),o.deep&&traverse(r),n.push({dir:o,instance:s,value:r,oldValue:void 0,arg:u,modifiers:c}))}return e}function invokeDirectiveHook(e,t,s,n){const i=e.dirs,o=t&&t.dirs;for(let r=0;r<i.length;r++){const u=i[r];o&&(u.oldValue=o[r].value);let c=u.dir[n];c&&(pauseTracking(),callWithAsyncErrorHandling(c,s,8,[e.el,u,e,t]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTeleportDeferred=e=>e&&(e.defer||e.defer===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,isTargetMathML=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,resolveTarget=(e,t)=>{const s=e&&e.to;return isString(s)?t?t(s):null:s},TeleportImpl={name:"Teleport",__isTeleport:!0,process(e,t,s,n,i,o,r,u,c,d){const{mc:a,pc:g,pbc:C,o:{insert:y,querySelector:w,createText:F,createComment:x}}=d,T=isTeleportDisabled(t.props);let{shapeFlag:k,children:H,dynamicChildren:I}=t;if(e==null){const _=t.el=F(""),E=t.anchor=F("");y(_,s,n),y(E,s,n);const v=(m,O)=>{k&16&&a(H,m,O,i,o,r,u,c)},S=()=>{const m=t.target=resolveTarget(t.props,w),O=prepareAnchor(m,t,F,y);m&&(r!=="svg"&&isTargetSVG(m)?r="svg":r!=="mathml"&&isTargetMathML(m)&&(r="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(m),T||(v(m,O),updateCssVars(t,!1)))};T&&(v(s,E),updateCssVars(t,!0)),isTeleportDeferred(t.props)?(t.el.__isMounted=!1,queuePostRenderEffect(()=>{S(),delete t.el.__isMounted},o)):S()}else{if(isTeleportDeferred(t.props)&&e.el.__isMounted===!1){queuePostRenderEffect(()=>{TeleportImpl.process(e,t,s,n,i,o,r,u,c,d)},o);return}t.el=e.el,t.targetStart=e.targetStart;const _=t.anchor=e.anchor,E=t.target=e.target,v=t.targetAnchor=e.targetAnchor,S=isTeleportDisabled(e.props),m=S?s:E,O=S?_:v;if(r==="svg"||isTargetSVG(E)?r="svg":(r==="mathml"||isTargetMathML(E))&&(r="mathml"),I?(C(e.dynamicChildren,I,m,i,o,r,u),traverseStaticChildren(e,t,!0)):c||g(e,t,m,O,i,o,r,u,!1),T)S?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):moveTeleport(t,s,_,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const f=t.target=resolveTarget(t.props,w);f&&moveTeleport(t,f,null,d,0)}else S&&moveTeleport(t,E,v,d,1);updateCssVars(t,T)}},remove(e,t,s,{um:n,o:{remove:i}},o){const{shapeFlag:r,children:u,anchor:c,targetStart:d,targetAnchor:a,target:g,props:C}=e;if(g&&(i(d),i(a)),o&&i(c),r&16){const y=o||!isTeleportDisabled(C);for(let w=0;w<u.length;w++){const F=u[w];n(F,t,s,y,!!F.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,t,s,{o:{insert:n},m:i},o=2){o===0&&n(e.targetAnchor,t,s);const{el:r,anchor:u,shapeFlag:c,children:d,props:a}=e,g=o===2;if(g&&n(r,t,s),(!g||isTeleportDisabled(a))&&c&16)for(let C=0;C<d.length;C++)i(d[C],t,s,2);g&&n(u,t,s)}function hydrateTeleport(e,t,s,n,i,o,{o:{nextSibling:r,parentNode:u,querySelector:c,insert:d,createText:a}},g){function C(F,x,T,k){x.anchor=g(r(F),x,u(F),s,n,i,o),x.targetStart=T,x.targetAnchor=k}const y=t.target=resolveTarget(t.props,c),w=isTeleportDisabled(t.props);if(y){const F=y._lpa||y.firstChild;if(t.shapeFlag&16)if(w)C(e,t,F,F&&r(F));else{t.anchor=r(e);let x=F;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")t.targetStart=x;else if(x.data==="teleport anchor"){t.targetAnchor=x,y._lpa=t.targetAnchor&&r(t.targetAnchor);break}}x=r(x)}t.targetAnchor||prepareAnchor(y,t,a,d),g(F&&r(F),t,y,s,n,i,o)}updateCssVars(t,w)}else w&&t.shapeFlag&16&&C(e,t,e,r(e));return t.anchor&&r(t.anchor)}const Teleport=TeleportImpl;function updateCssVars(e,t){const s=e.ctx;if(s&&s.ut){let n,i;for(t?(n=e.el,i=e.anchor):(n=e.targetStart,i=e.targetAnchor);n&&n!==i;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function prepareAnchor(e,t,s,n){const i=t.targetStart=s(""),o=t.targetAnchor=s("");return i[TeleportEndKey]=o,e&&(n(i,e),n(o,e)),o}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=e=>{const t=e.subTree;return t.component?recursiveGetSubtree(t.component):t},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(e,{slots:t}){const s=getCurrentInstance(),n=useTransitionState();return()=>{const i=t.default&&getTransitionRawChildren(t.default(),!0);if(!i||!i.length)return;const o=findNonCommentChild(i),r=toRaw(e),{mode:u}=r;if(n.isLeaving)return emptyPlaceholder(o);const c=getInnerChild$1(o);if(!c)return emptyPlaceholder(o);let d=resolveTransitionHooks(c,r,n,s,g=>d=g);c.type!==Comment&&setTransitionHooks(c,d);let a=s.subTree&&getInnerChild$1(s.subTree);if(a&&a.type!==Comment&&!isSameVNodeType(a,c)&&recursiveGetSubtree(s).type!==Comment){let g=resolveTransitionHooks(a,r,n,s);if(setTransitionHooks(a,g),u==="out-in"&&c.type!==Comment)return n.isLeaving=!0,g.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete g.afterLeave,a=void 0},emptyPlaceholder(o);u==="in-out"&&c.type!==Comment?g.delayLeave=(C,y,w)=>{const F=getLeavingNodesForType(n,a);F[String(a.key)]=a,C[leaveCbKey]=()=>{y(),C[leaveCbKey]=void 0,delete d.delayedLeave,a=void 0},d.delayedLeave=()=>{w(),delete d.delayedLeave,a=void 0}}:a=void 0}else a&&(a=void 0);return o}}};function findNonCommentChild(e){let t=e[0];if(e.length>1){for(const s of e)if(s.type!==Comment){t=s;break}}return t}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function resolveTransitionHooks(e,t,s,n,i){const{appear:o,mode:r,persisted:u=!1,onBeforeEnter:c,onEnter:d,onAfterEnter:a,onEnterCancelled:g,onBeforeLeave:C,onLeave:y,onAfterLeave:w,onLeaveCancelled:F,onBeforeAppear:x,onAppear:T,onAfterAppear:k,onAppearCancelled:H}=t,I=String(e.key),_=getLeavingNodesForType(s,e),E=(m,O)=>{m&&callWithAsyncErrorHandling(m,n,9,O)},v=(m,O)=>{const f=O[1];E(m,O),isArray$1(m)?m.every(P=>P.length<=1)&&f():m.length<=1&&f()},S={mode:r,persisted:u,beforeEnter(m){let O=c;if(!s.isMounted)if(o)O=x||c;else return;m[leaveCbKey]&&m[leaveCbKey](!0);const f=_[I];f&&isSameVNodeType(e,f)&&f.el[leaveCbKey]&&f.el[leaveCbKey](),E(O,[m])},enter(m){let O=d,f=a,P=g;if(!s.isMounted)if(o)O=T||d,f=k||a,P=H||g;else return;let U=!1;const ce=m[enterCbKey$1]=se=>{U||(U=!0,se?E(P,[m]):E(f,[m]),S.delayedLeave&&S.delayedLeave(),m[enterCbKey$1]=void 0)};O?v(O,[m,ce]):ce()},leave(m,O){const f=String(e.key);if(m[enterCbKey$1]&&m[enterCbKey$1](!0),s.isUnmounting)return O();E(C,[m]);let P=!1;const U=m[leaveCbKey]=ce=>{P||(P=!0,O(),ce?E(F,[m]):E(w,[m]),m[leaveCbKey]=void 0,_[f]===e&&delete _[f])};_[f]=e,y?v(y,[m,U]):U()},clone(m){const O=resolveTransitionHooks(m,t,s,n,i);return i&&i(O),O}};return S}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getInnerChild$1(e){if(!isKeepAlive(e))return isTeleport(e.type)&&e.children?findNonCommentChild(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:s}=e;if(s){if(t&16)return s[0];if(t&32&&isFunction(s.default))return s.default()}}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?(e.transition=t,setTransitionHooks(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,s){let n=[],i=0;for(let o=0;o<e.length;o++){let r=e[o];const u=s==null?r.key:String(s)+String(r.key!=null?r.key:o);r.type===Fragment?(r.patchFlag&128&&i++,n=n.concat(getTransitionRawChildren(r.children,t,u))):(t||r.type!==Comment)&&n.push(u!=null?cloneVNode(r,{key:u}):r)}if(i>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function defineComponent(e,t){return isFunction(e)?extend({name:e.name},t,{setup:e}):e}function markAsyncBoundary(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const pendingSetRefMap=new WeakMap;function setRef(e,t,s,n,i=!1){if(isArray$1(e)){e.forEach((w,F)=>setRef(w,t&&(isArray$1(t)?t[F]:t),s,n,i));return}if(isAsyncWrapper(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&setRef(e,t,s,n.component.subTree);return}const o=n.shapeFlag&4?getComponentPublicInstance(n.component):n.el,r=i?null:o,{i:u,r:c}=e,d=t&&t.r,a=u.refs===EMPTY_OBJ?u.refs={}:u.refs,g=u.setupState,C=toRaw(g),y=g===EMPTY_OBJ?NO:w=>hasOwn(C,w);if(d!=null&&d!==c){if(invalidatePendingSetRef(t),isString(d))a[d]=null,y(d)&&(g[d]=null);else if(isRef(d)){d.value=null;const w=t;w.k&&(a[w.k]=null)}}if(isFunction(c))callWithErrorHandling(c,u,12,[r,a]);else{const w=isString(c),F=isRef(c);if(w||F){const x=()=>{if(e.f){const T=w?y(c)?g[c]:a[c]:c.value;if(i)isArray$1(T)&&remove(T,o);else if(isArray$1(T))T.includes(o)||T.push(o);else if(w)a[c]=[o],y(c)&&(g[c]=a[c]);else{const k=[o];c.value=k,e.k&&(a[e.k]=k)}}else w?(a[c]=r,y(c)&&(g[c]=r)):F&&(c.value=r,e.k&&(a[e.k]=r))};if(r){const T=()=>{x(),pendingSetRefMap.delete(e)};T.id=-1,pendingSetRefMap.set(e,T),queuePostRenderEffect(T,s)}else invalidatePendingSetRef(e),x()}}}function invalidatePendingSetRef(e){const t=pendingSetRefMap.get(e);t&&(t.flags|=8,pendingSetRefMap.delete(e))}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,s=currentInstance){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(injectHook(t,n,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,t,s,i),i=i.parent}}function injectToKeepAliveRoot(e,t,s,n){const i=injectHook(t,e,n,!0);onUnmounted(()=>{remove(n[t],i)},s)}function injectHook(e,t,s=currentInstance,n=!1){if(s){const i=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...r)=>{pauseTracking();const u=setCurrentInstance(s),c=callWithAsyncErrorHandling(t,s,e,r);return u(),resetTracking(),c});return n?i.unshift(o):i.push(o),o}}const createHook=e=>(t,s=currentInstance)=>{(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...n)=>t(...n),s)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const COMPONENTS="components";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveAsset(e,t,s=!0,n=!1){const i=currentRenderingInstance||currentInstance;if(i){const o=i.type;{const u=getComponentName(o,!1);if(u&&(u===t||u===camelize(t)||u===capitalize(camelize(t))))return o}const r=resolve(i[e]||o[e],t)||resolve(i.appContext[e],t);return!r&&n?o:r}}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize(camelize(t))])}function renderList(e,t,s,n){let i;const o=s,r=isArray$1(e);if(r||isString(e)){const u=r&&isReactive(e);let c=!1,d=!1;u&&(c=!isShallow(e),d=isReadonly(e),e=shallowReadArray(e)),i=new Array(e.length);for(let a=0,g=e.length;a<g;a++)i[a]=t(c?d?toReadonly(toReactive(e[a])):toReactive(e[a]):e[a],a,void 0,o)}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=t(u+1,u,void 0,o)}else if(isObject(e))if(e[Symbol.iterator])i=Array.from(e,(u,c)=>t(u,c,void 0,o));else{const u=Object.keys(e);i=new Array(u.length);for(let c=0,d=u.length;c<d;c++){const a=u[c];i[c]=t(e[a],a,c,o)}}else i=[];return i}const getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:o,accessCache:r,type:u,appContext:c}=e;let d;if(t[0]!=="$"){const y=r[t];if(y!==void 0)switch(y){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return o[t]}else{if(hasSetupBinding(n,t))return r[t]=1,n[t];if(i!==EMPTY_OBJ&&hasOwn(i,t))return r[t]=2,i[t];if((d=e.propsOptions[0])&&hasOwn(d,t))return r[t]=3,o[t];if(s!==EMPTY_OBJ&&hasOwn(s,t))return r[t]=4,s[t];shouldCacheAccess&&(r[t]=0)}}const a=publicPropertiesMap[t];let g,C;if(a)return t==="$attrs"&&track(e.attrs,"get",""),a(e);if((g=u.__cssModules)&&(g=g[t]))return g;if(s!==EMPTY_OBJ&&hasOwn(s,t))return r[t]=4,s[t];if(C=c.config.globalProperties,hasOwn(C,t))return C[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:o}=e;return hasSetupBinding(i,t)?(i[t]=s,!0):n!==EMPTY_OBJ&&hasOwn(n,t)?(n[t]=s,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:o,type:r}},u){let c,d;return!!(s[u]||e!==EMPTY_OBJ&&u[0]!=="$"&&hasOwn(e,u)||hasSetupBinding(t,u)||(c=o[0])&&hasOwn(c,u)||hasOwn(n,u)||hasOwn(publicPropertiesMap,u)||hasOwn(i.config.globalProperties,u)||(d=r.__cssModules)&&d[u])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:hasOwn(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function normalizePropsOrEmits(e){return isArray$1(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),s=e.proxy,n=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook$1(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:r,watch:u,provide:c,inject:d,created:a,beforeMount:g,mounted:C,beforeUpdate:y,updated:w,activated:F,deactivated:x,beforeDestroy:T,beforeUnmount:k,destroyed:H,unmounted:I,render:_,renderTracked:E,renderTriggered:v,errorCaptured:S,serverPrefetch:m,expose:O,inheritAttrs:f,components:P,directives:U,filters:ce}=t;if(d&&resolveInjections(d,n,null),r)for(const ee in r){const ue=r[ee];isFunction(ue)&&(n[ee]=ue.bind(s))}if(i){const ee=i.call(s,s);isObject(ee)&&(e.data=reactive(ee))}if(shouldCacheAccess=!0,o)for(const ee in o){const ue=o[ee],W=isFunction(ue)?ue.bind(s,s):isFunction(ue.get)?ue.get.bind(s,s):NOOP,ie=!isFunction(ue)&&isFunction(ue.set)?ue.set.bind(s):NOOP,he=computed({get:W,set:ie});Object.defineProperty(n,ee,{enumerable:!0,configurable:!0,get:()=>he.value,set:j=>he.value=j})}if(u)for(const ee in u)createWatcher(u[ee],n,s,ee);if(c){const ee=isFunction(c)?c.call(s):c;Reflect.ownKeys(ee).forEach(ue=>{provide(ue,ee[ue])})}a&&callHook$1(a,e,"c");function ae(ee,ue){isArray$1(ue)?ue.forEach(W=>ee(W.bind(s))):ue&&ee(ue.bind(s))}if(ae(onBeforeMount,g),ae(onMounted,C),ae(onBeforeUpdate,y),ae(onUpdated,w),ae(onActivated,F),ae(onDeactivated,x),ae(onErrorCaptured,S),ae(onRenderTracked,E),ae(onRenderTriggered,v),ae(onBeforeUnmount,k),ae(onUnmounted,I),ae(onServerPrefetch,m),isArray$1(O))if(O.length){const ee=e.exposed||(e.exposed={});O.forEach(ue=>{Object.defineProperty(ee,ue,{get:()=>s[ue],set:W=>s[ue]=W,enumerable:!0})})}else e.exposed||(e.exposed={});_&&e.render===NOOP&&(e.render=_),f!=null&&(e.inheritAttrs=f),P&&(e.components=P),U&&(e.directives=U),m&&markAsyncBoundary(e)}function resolveInjections(e,t,s=NOOP){isArray$1(e)&&(e=normalizeInject(e));for(const n in e){const i=e[n];let o;isObject(i)?"default"in i?o=inject(i.from||n,i.default,!0):o=inject(i.from||n):o=inject(i),isRef(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[n]=o}}function callHook$1(e,t,s){callWithAsyncErrorHandling(isArray$1(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function createWatcher(e,t,s,n){let i=n.includes(".")?createPathGetter(s,n):()=>s[n];if(isString(e)){const o=t[e];isFunction(o)&&watch(i,o)}else if(isFunction(e))watch(i,e.bind(s));else if(isObject(e))if(isArray$1(e))e.forEach(o=>createWatcher(o,t,s,n));else{const o=isFunction(e.handler)?e.handler.bind(s):t[e.handler];isFunction(o)&&watch(i,o,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,u=o.get(t);let c;return u?c=u:!i.length&&!s&&!n?c=t:(c={},i.length&&i.forEach(d=>mergeOptions$1(c,d,r,!0)),mergeOptions$1(c,t,r)),isObject(t)&&o.set(t,c),c}function mergeOptions$1(e,t,s,n=!1){const{mixins:i,extends:o}=t;o&&mergeOptions$1(e,o,s,!0),i&&i.forEach(r=>mergeOptions$1(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const u=internalOptionMergeStrats[r]||s&&s[r];e[r]=u?u(e[r],t[r]):t[r]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$1(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray$1(e)&&isArray$1(t)?[...new Set([...e,...t])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const s=extend(Object.create(null),e);for(const n in t)s[n]=mergeAsArray(e[n],t[n]);return s}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(n,i=null){isFunction(n)||(n=extend({},n)),i!=null&&!isObject(i)&&(i=null);const o=createAppContext(),r=new WeakSet,u=[];let c=!1;const d=o.app={_uid:uid$1++,_component:n,_props:i,_container:null,_context:o,_instance:null,version,get config(){return o.config},set config(a){},use(a,...g){return r.has(a)||(a&&isFunction(a.install)?(r.add(a),a.install(d,...g)):isFunction(a)&&(r.add(a),a(d,...g))),d},mixin(a){return o.mixins.includes(a)||o.mixins.push(a),d},component(a,g){return g?(o.components[a]=g,d):o.components[a]},directive(a,g){return g?(o.directives[a]=g,d):o.directives[a]},mount(a,g,C){if(!c){const y=d._ceVNode||createVNode(n,i);return y.appContext=o,C===!0?C="svg":C===!1&&(C=void 0),e(y,a,C),c=!0,d._container=a,a.__vue_app__=d,getComponentPublicInstance(y.component)}},onUnmount(a){u.push(a)},unmount(){c&&(callWithAsyncErrorHandling(u,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(a,g){return o.provides[a]=g,d},runWithContext(a){const g=currentApp;currentApp=d;try{return a()}finally{currentApp=g}}};return d}}let currentApp=null;function provide(e,t){if(currentInstance){let s=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===s&&(s=currentInstance.provides=Object.create(n)),s[e]=t}}function inject(e,t,s=!1){const n=getCurrentInstance();if(n||currentApp){let i=currentApp?currentApp._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return s&&isFunction(t)?t.call(n&&n.proxy):t}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,t,s,n=!1){const i={},o=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,t,i,o);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);s?e.props=n?i:shallowReactive(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function updateProps(e,t,s,n){const{props:i,attrs:o,vnode:{patchFlag:r}}=e,u=toRaw(i),[c]=e.propsOptions;let d=!1;if((n||r>0)&&!(r&16)){if(r&8){const a=e.vnode.dynamicProps;for(let g=0;g<a.length;g++){let C=a[g];if(isEmitListener(e.emitsOptions,C))continue;const y=t[C];if(c)if(hasOwn(o,C))y!==o[C]&&(o[C]=y,d=!0);else{const w=camelize(C);i[w]=resolvePropValue(c,u,w,y,e,!1)}else y!==o[C]&&(o[C]=y,d=!0)}}}else{setFullProps(e,t,i,o)&&(d=!0);let a;for(const g in u)(!t||!hasOwn(t,g)&&((a=hyphenate(g))===g||!hasOwn(t,a)))&&(c?s&&(s[g]!==void 0||s[a]!==void 0)&&(i[g]=resolvePropValue(c,u,g,void 0,e,!0)):delete i[g]);if(o!==u)for(const g in o)(!t||!hasOwn(t,g))&&(delete o[g],d=!0)}d&&trigger(e.attrs,"set","")}function setFullProps(e,t,s,n){const[i,o]=e.propsOptions;let r=!1,u;if(t)for(let c in t){if(isReservedProp(c))continue;const d=t[c];let a;i&&hasOwn(i,a=camelize(c))?!o||!o.includes(a)?s[a]=d:(u||(u={}))[a]=d:isEmitListener(e.emitsOptions,c)||(!(c in n)||d!==n[c])&&(n[c]=d,r=!0)}if(o){const c=toRaw(s),d=u||EMPTY_OBJ;for(let a=0;a<o.length;a++){const g=o[a];s[g]=resolvePropValue(i,c,g,d[g],e,!hasOwn(d,g))}}return r}function resolvePropValue(e,t,s,n,i,o){const r=e[s];if(r!=null){const u=hasOwn(r,"default");if(u&&n===void 0){const c=r.default;if(r.type!==Function&&!r.skipFactory&&isFunction(c)){const{propsDefaults:d}=i;if(s in d)n=d[s];else{const a=setCurrentInstance(i);n=d[s]=c.call(null,t),a()}}else n=c;i.ce&&i.ce._setProp(s,n)}r[0]&&(o&&!u?n=!1:r[1]&&(n===""||n===hyphenate(s))&&(n=!0))}return n}const mixinPropsCache=new WeakMap;function normalizePropsOptions(e,t,s=!1){const n=s?mixinPropsCache:t.propsCache,i=n.get(e);if(i)return i;const o=e.props,r={},u=[];let c=!1;if(!isFunction(e)){const a=g=>{c=!0;const[C,y]=normalizePropsOptions(g,t,!0);extend(r,C),y&&u.push(...y)};!s&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}if(!o&&!c)return isObject(e)&&n.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$1(o))for(let a=0;a<o.length;a++){const g=camelize(o[a]);validatePropName(g)&&(r[g]=EMPTY_OBJ)}else if(o)for(const a in o){const g=camelize(a);if(validatePropName(g)){const C=o[a],y=r[g]=isArray$1(C)||isFunction(C)?{type:C}:extend({},C),w=y.type;let F=!1,x=!0;if(isArray$1(w))for(let T=0;T<w.length;++T){const k=w[T],H=isFunction(k)&&k.name;if(H==="Boolean"){F=!0;break}else H==="String"&&(x=!1)}else F=isFunction(w)&&w.name==="Boolean";y[0]=F,y[1]=x,(F||hasOwn(y,"default"))&&u.push(g)}}const d=[r,u];return isObject(e)&&n.set(e,d),d}function validatePropName(e){return e[0]!=="$"&&!isReservedProp(e)}const isInternalKey=e=>e==="_"||e==="_ctx"||e==="$stable",normalizeSlotValue=e=>isArray$1(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,t,s)=>{if(t._n)return t;const n=withCtx((...i)=>normalizeSlotValue(t(...i)),s);return n._c=!1,n},normalizeObjectSlots=(e,t,s)=>{const n=e._ctx;for(const i in e){if(isInternalKey(i))continue;const o=e[i];if(isFunction(o))t[i]=normalizeSlot$1(i,o,n);else if(o!=null){const r=normalizeSlotValue(o);t[i]=()=>r}}},normalizeVNodeSlots=(e,t)=>{const s=normalizeSlotValue(t);e.slots.default=()=>s},assignSlots=(e,t,s)=>{for(const n in t)(s||!isInternalKey(n))&&(e[n]=t[n])},initSlots=(e,t,s)=>{const n=e.slots=createInternalObject();if(e.vnode.shapeFlag&32){const i=t._;i?(assignSlots(n,t,s),s&&def(n,"_",i,!0)):normalizeObjectSlots(t,n)}else t&&normalizeVNodeSlots(e,t)},updateSlots=(e,t,s)=>{const{vnode:n,slots:i}=e;let o=!0,r=EMPTY_OBJ;if(n.shapeFlag&32){const u=t._;u?s&&u===1?o=!1:assignSlots(i,t,s):(o=!t.$stable,normalizeObjectSlots(t,i)),r=t}else t&&(normalizeVNodeSlots(e,t),r={default:1});if(o)for(const u in i)!isInternalKey(u)&&r[u]==null&&delete i[u]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const s=getGlobalThis();s.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:r,createText:u,createComment:c,setText:d,setElementText:a,parentNode:g,nextSibling:C,setScopeId:y=NOOP,insertStaticContent:w}=e,F=(D,L,q,ne=null,X=null,G=null,R=void 0,B=null,J=!!L.dynamicChildren)=>{if(D===L)return;D&&!isSameVNodeType(D,L)&&(ne=M(D),j(D,X,G,!0),D=null),L.patchFlag===-2&&(J=!1,L.dynamicChildren=null);const{type:Q,ref:de,shapeFlag:fe}=L;switch(Q){case Text:x(D,L,q,ne);break;case Comment:T(D,L,q,ne);break;case Static:D==null&&k(L,q,ne,R);break;case Fragment:P(D,L,q,ne,X,G,R,B,J);break;default:fe&1?_(D,L,q,ne,X,G,R,B,J):fe&6?U(D,L,q,ne,X,G,R,B,J):(fe&64||fe&128)&&Q.process(D,L,q,ne,X,G,R,B,J,re)}de!=null&&X?setRef(de,D&&D.ref,G,L||D,!L):de==null&&D&&D.ref!=null&&setRef(D.ref,null,G,D,!0)},x=(D,L,q,ne)=>{if(D==null)n(L.el=u(L.children),q,ne);else{const X=L.el=D.el;L.children!==D.children&&d(X,L.children)}},T=(D,L,q,ne)=>{D==null?n(L.el=c(L.children||""),q,ne):L.el=D.el},k=(D,L,q,ne)=>{[D.el,D.anchor]=w(D.children,L,q,ne,D.el,D.anchor)},H=({el:D,anchor:L},q,ne)=>{let X;for(;D&&D!==L;)X=C(D),n(D,q,ne),D=X;n(L,q,ne)},I=({el:D,anchor:L})=>{let q;for(;D&&D!==L;)q=C(D),i(D),D=q;i(L)},_=(D,L,q,ne,X,G,R,B,J)=>{L.type==="svg"?R="svg":L.type==="math"&&(R="mathml"),D==null?E(L,q,ne,X,G,R,B,J):m(D,L,X,G,R,B,J)},E=(D,L,q,ne,X,G,R,B)=>{let J,Q;const{props:de,shapeFlag:fe,transition:_e,dirs:te}=D;if(J=D.el=r(D.type,G,de&&de.is,de),fe&8?a(J,D.children):fe&16&&S(D.children,J,null,ne,X,resolveChildrenNamespace(D,G),R,B),te&&invokeDirectiveHook(D,null,ne,"created"),v(J,D,D.scopeId,R,ne),de){for(const Ce in de)Ce!=="value"&&!isReservedProp(Ce)&&o(J,Ce,null,de[Ce],G,ne);"value"in de&&o(J,"value",null,de.value,G),(Q=de.onVnodeBeforeMount)&&invokeVNodeHook(Q,ne,D)}te&&invokeDirectiveHook(D,null,ne,"beforeMount");const Te=needTransition(X,_e);Te&&_e.beforeEnter(J),n(J,L,q),((Q=de&&de.onVnodeMounted)||Te||te)&&queuePostRenderEffect(()=>{Q&&invokeVNodeHook(Q,ne,D),Te&&_e.enter(J),te&&invokeDirectiveHook(D,null,ne,"mounted")},X)},v=(D,L,q,ne,X)=>{if(q&&y(D,q),ne)for(let G=0;G<ne.length;G++)y(D,ne[G]);if(X){let G=X.subTree;if(L===G||isSuspense(G.type)&&(G.ssContent===L||G.ssFallback===L)){const R=X.vnode;v(D,R,R.scopeId,R.slotScopeIds,X.parent)}}},S=(D,L,q,ne,X,G,R,B,J=0)=>{for(let Q=J;Q<D.length;Q++){const de=D[Q]=B?cloneIfMounted(D[Q]):normalizeVNode(D[Q]);F(null,de,L,q,ne,X,G,R,B)}},m=(D,L,q,ne,X,G,R)=>{const B=L.el=D.el;let{patchFlag:J,dynamicChildren:Q,dirs:de}=L;J|=D.patchFlag&16;const fe=D.props||EMPTY_OBJ,_e=L.props||EMPTY_OBJ;let te;if(q&&toggleRecurse(q,!1),(te=_e.onVnodeBeforeUpdate)&&invokeVNodeHook(te,q,L,D),de&&invokeDirectiveHook(L,D,q,"beforeUpdate"),q&&toggleRecurse(q,!0),(fe.innerHTML&&_e.innerHTML==null||fe.textContent&&_e.textContent==null)&&a(B,""),Q?O(D.dynamicChildren,Q,B,q,ne,resolveChildrenNamespace(L,X),G):R||ue(D,L,B,null,q,ne,resolveChildrenNamespace(L,X),G,!1),J>0){if(J&16)f(B,fe,_e,q,X);else if(J&2&&fe.class!==_e.class&&o(B,"class",null,_e.class,X),J&4&&o(B,"style",fe.style,_e.style,X),J&8){const Te=L.dynamicProps;for(let Ce=0;Ce<Te.length;Ce++){const Fe=Te[Ce],Ne=fe[Fe],je=_e[Fe];(je!==Ne||Fe==="value")&&o(B,Fe,Ne,je,X,q)}}J&1&&D.children!==L.children&&a(B,L.children)}else!R&&Q==null&&f(B,fe,_e,q,X);((te=_e.onVnodeUpdated)||de)&&queuePostRenderEffect(()=>{te&&invokeVNodeHook(te,q,L,D),de&&invokeDirectiveHook(L,D,q,"updated")},ne)},O=(D,L,q,ne,X,G,R)=>{for(let B=0;B<L.length;B++){const J=D[B],Q=L[B],de=J.el&&(J.type===Fragment||!isSameVNodeType(J,Q)||J.shapeFlag&198)?g(J.el):q;F(J,Q,de,null,ne,X,G,R,!0)}},f=(D,L,q,ne,X)=>{if(L!==q){if(L!==EMPTY_OBJ)for(const G in L)!isReservedProp(G)&&!(G in q)&&o(D,G,L[G],null,X,ne);for(const G in q){if(isReservedProp(G))continue;const R=q[G],B=L[G];R!==B&&G!=="value"&&o(D,G,B,R,X,ne)}"value"in q&&o(D,"value",L.value,q.value,X)}},P=(D,L,q,ne,X,G,R,B,J)=>{const Q=L.el=D?D.el:u(""),de=L.anchor=D?D.anchor:u("");let{patchFlag:fe,dynamicChildren:_e,slotScopeIds:te}=L;te&&(B=B?B.concat(te):te),D==null?(n(Q,q,ne),n(de,q,ne),S(L.children||[],q,de,X,G,R,B,J)):fe>0&&fe&64&&_e&&D.dynamicChildren?(O(D.dynamicChildren,_e,q,X,G,R,B),(L.key!=null||X&&L===X.subTree)&&traverseStaticChildren(D,L,!0)):ue(D,L,q,de,X,G,R,B,J)},U=(D,L,q,ne,X,G,R,B,J)=>{L.slotScopeIds=B,D==null?L.shapeFlag&512?X.ctx.activate(L,q,ne,R,J):ce(L,q,ne,X,G,R,J):se(D,L,J)},ce=(D,L,q,ne,X,G,R)=>{const B=D.component=createComponentInstance(D,ne,X);if(isKeepAlive(D)&&(B.ctx.renderer=re),setupComponent(B,!1,R),B.asyncDep){if(X&&X.registerDep(B,ae,R),!D.el){const J=B.subTree=createVNode(Comment);T(null,J,L,q),D.placeholder=J.el}}else ae(B,D,L,q,X,G,R)},se=(D,L,q)=>{const ne=L.component=D.component;if(shouldUpdateComponent(D,L,q))if(ne.asyncDep&&!ne.asyncResolved){ee(ne,L,q);return}else ne.next=L,ne.update();else L.el=D.el,ne.vnode=L},ae=(D,L,q,ne,X,G,R)=>{const B=()=>{if(D.isMounted){let{next:fe,bu:_e,u:te,parent:Te,vnode:Ce}=D;{const De=locateNonHydratedAsyncRoot(D);if(De){fe&&(fe.el=Ce.el,ee(D,fe,R)),De.asyncDep.then(()=>{D.isUnmounted||B()});return}}let Fe=fe,Ne;toggleRecurse(D,!1),fe?(fe.el=Ce.el,ee(D,fe,R)):fe=Ce,_e&&invokeArrayFns(_e),(Ne=fe.props&&fe.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ne,Te,fe,Ce),toggleRecurse(D,!0);const je=renderComponentRoot(D),ke=D.subTree;D.subTree=je,F(ke,je,g(ke.el),M(ke),D,X,G),fe.el=je.el,Fe===null&&updateHOCHostEl(D,je.el),te&&queuePostRenderEffect(te,X),(Ne=fe.props&&fe.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ne,Te,fe,Ce),X)}else{let fe;const{el:_e,props:te}=L,{bm:Te,m:Ce,parent:Fe,root:Ne,type:je}=D,ke=isAsyncWrapper(L);toggleRecurse(D,!1),Te&&invokeArrayFns(Te),!ke&&(fe=te&&te.onVnodeBeforeMount)&&invokeVNodeHook(fe,Fe,L),toggleRecurse(D,!0);{Ne.ce&&Ne.ce._def.shadowRoot!==!1&&Ne.ce._injectChildStyle(je);const De=D.subTree=renderComponentRoot(D);F(null,De,q,ne,D,X,G),L.el=De.el}if(Ce&&queuePostRenderEffect(Ce,X),!ke&&(fe=te&&te.onVnodeMounted)){const De=L;queuePostRenderEffect(()=>invokeVNodeHook(fe,Fe,De),X)}(L.shapeFlag&256||Fe&&isAsyncWrapper(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&D.a&&queuePostRenderEffect(D.a,X),D.isMounted=!0,L=q=ne=null}};D.scope.on();const J=D.effect=new ReactiveEffect(B);D.scope.off();const Q=D.update=J.run.bind(J),de=D.job=J.runIfDirty.bind(J);de.i=D,de.id=D.uid,J.scheduler=()=>queueJob(de),toggleRecurse(D,!0),Q()},ee=(D,L,q)=>{L.component=D;const ne=D.vnode.props;D.vnode=L,D.next=null,updateProps(D,L.props,ne,q),updateSlots(D,L.children,q),pauseTracking(),flushPreFlushCbs(D),resetTracking()},ue=(D,L,q,ne,X,G,R,B,J=!1)=>{const Q=D&&D.children,de=D?D.shapeFlag:0,fe=L.children,{patchFlag:_e,shapeFlag:te}=L;if(_e>0){if(_e&128){ie(Q,fe,q,ne,X,G,R,B,J);return}else if(_e&256){W(Q,fe,q,ne,X,G,R,B,J);return}}te&8?(de&16&&z(Q,X,G),fe!==Q&&a(q,fe)):de&16?te&16?ie(Q,fe,q,ne,X,G,R,B,J):z(Q,X,G,!0):(de&8&&a(q,""),te&16&&S(fe,q,ne,X,G,R,B,J))},W=(D,L,q,ne,X,G,R,B,J)=>{D=D||EMPTY_ARR,L=L||EMPTY_ARR;const Q=D.length,de=L.length,fe=Math.min(Q,de);let _e;for(_e=0;_e<fe;_e++){const te=L[_e]=J?cloneIfMounted(L[_e]):normalizeVNode(L[_e]);F(D[_e],te,q,null,X,G,R,B,J)}Q>de?z(D,X,G,!0,!1,fe):S(L,q,ne,X,G,R,B,J,fe)},ie=(D,L,q,ne,X,G,R,B,J)=>{let Q=0;const de=L.length;let fe=D.length-1,_e=de-1;for(;Q<=fe&&Q<=_e;){const te=D[Q],Te=L[Q]=J?cloneIfMounted(L[Q]):normalizeVNode(L[Q]);if(isSameVNodeType(te,Te))F(te,Te,q,null,X,G,R,B,J);else break;Q++}for(;Q<=fe&&Q<=_e;){const te=D[fe],Te=L[_e]=J?cloneIfMounted(L[_e]):normalizeVNode(L[_e]);if(isSameVNodeType(te,Te))F(te,Te,q,null,X,G,R,B,J);else break;fe--,_e--}if(Q>fe){if(Q<=_e){const te=_e+1,Te=te<de?L[te].el:ne;for(;Q<=_e;)F(null,L[Q]=J?cloneIfMounted(L[Q]):normalizeVNode(L[Q]),q,Te,X,G,R,B,J),Q++}}else if(Q>_e)for(;Q<=fe;)j(D[Q],X,G,!0),Q++;else{const te=Q,Te=Q,Ce=new Map;for(Q=Te;Q<=_e;Q++){const Ee=L[Q]=J?cloneIfMounted(L[Q]):normalizeVNode(L[Q]);Ee.key!=null&&Ce.set(Ee.key,Q)}let Fe,Ne=0;const je=_e-Te+1;let ke=!1,De=0;const ze=new Array(je);for(Q=0;Q<je;Q++)ze[Q]=0;for(Q=te;Q<=fe;Q++){const Ee=D[Q];if(Ne>=je){j(Ee,X,G,!0);continue}let pe;if(Ee.key!=null)pe=Ce.get(Ee.key);else for(Fe=Te;Fe<=_e;Fe++)if(ze[Fe-Te]===0&&isSameVNodeType(Ee,L[Fe])){pe=Fe;break}pe===void 0?j(Ee,X,G,!0):(ze[pe-Te]=Q+1,pe>=De?De=pe:ke=!0,F(Ee,L[pe],q,null,X,G,R,B,J),Ne++)}const Xe=ke?getSequence(ze):EMPTY_ARR;for(Fe=Xe.length-1,Q=je-1;Q>=0;Q--){const Ee=Te+Q,pe=L[Ee],be=L[Ee+1],Me=Ee+1<de?be.el||be.placeholder:ne;ze[Q]===0?F(null,pe,q,Me,X,G,R,B,J):ke&&(Fe<0||Q!==Xe[Fe]?he(pe,q,Me,2):Fe--)}}},he=(D,L,q,ne,X=null)=>{const{el:G,type:R,transition:B,children:J,shapeFlag:Q}=D;if(Q&6){he(D.component.subTree,L,q,ne);return}if(Q&128){D.suspense.move(L,q,ne);return}if(Q&64){R.move(D,L,q,re);return}if(R===Fragment){n(G,L,q);for(let fe=0;fe<J.length;fe++)he(J[fe],L,q,ne);n(D.anchor,L,q);return}if(R===Static){H(D,L,q);return}if(ne!==2&&Q&1&&B)if(ne===0)B.beforeEnter(G),n(G,L,q),queuePostRenderEffect(()=>B.enter(G),X);else{const{leave:fe,delayLeave:_e,afterLeave:te}=B,Te=()=>{D.ctx.isUnmounted?i(G):n(G,L,q)},Ce=()=>{G._isLeaving&&G[leaveCbKey](!0),fe(G,()=>{Te(),te&&te()})};_e?_e(G,Te,Ce):Ce()}else n(G,L,q)},j=(D,L,q,ne=!1,X=!1)=>{const{type:G,props:R,ref:B,children:J,dynamicChildren:Q,shapeFlag:de,patchFlag:fe,dirs:_e,cacheIndex:te}=D;if(fe===-2&&(X=!1),B!=null&&(pauseTracking(),setRef(B,null,q,D,!0),resetTracking()),te!=null&&(L.renderCache[te]=void 0),de&256){L.ctx.deactivate(D);return}const Te=de&1&&_e,Ce=!isAsyncWrapper(D);let Fe;if(Ce&&(Fe=R&&R.onVnodeBeforeUnmount)&&invokeVNodeHook(Fe,L,D),de&6)N(D.component,q,ne);else{if(de&128){D.suspense.unmount(q,ne);return}Te&&invokeDirectiveHook(D,null,L,"beforeUnmount"),de&64?D.type.remove(D,L,q,re,ne):Q&&!Q.hasOnce&&(G!==Fragment||fe>0&&fe&64)?z(Q,L,q,!1,!0):(G===Fragment&&fe&384||!X&&de&16)&&z(J,L,q),ne&&b(D)}(Ce&&(Fe=R&&R.onVnodeUnmounted)||Te)&&queuePostRenderEffect(()=>{Fe&&invokeVNodeHook(Fe,L,D),Te&&invokeDirectiveHook(D,null,L,"unmounted")},q)},b=D=>{const{type:L,el:q,anchor:ne,transition:X}=D;if(L===Fragment){A(q,ne);return}if(L===Static){I(D);return}const G=()=>{i(q),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(D.shapeFlag&1&&X&&!X.persisted){const{leave:R,delayLeave:B}=X,J=()=>R(q,G);B?B(D.el,G,J):J()}else G()},A=(D,L)=>{let q;for(;D!==L;)q=C(D),i(D),D=q;i(L)},N=(D,L,q)=>{const{bum:ne,scope:X,job:G,subTree:R,um:B,m:J,a:Q}=D;invalidateMount(J),invalidateMount(Q),ne&&invokeArrayFns(ne),X.stop(),G&&(G.flags|=8,j(R,D,L,q)),B&&queuePostRenderEffect(B,L),queuePostRenderEffect(()=>{D.isUnmounted=!0},L)},z=(D,L,q,ne=!1,X=!1,G=0)=>{for(let R=G;R<D.length;R++)j(D[R],L,q,ne,X)},M=D=>{if(D.shapeFlag&6)return M(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const L=C(D.anchor||D.el),q=L&&L[TeleportEndKey];return q?C(q):L};let V=!1;const Y=(D,L,q)=>{D==null?L._vnode&&j(L._vnode,null,null,!0):F(L._vnode||null,D,L,null,null,null,q),L._vnode=D,V||(V=!0,flushPreFlushCbs(),flushPostFlushCbs(),V=!1)},re={p:F,um:j,m:he,r:b,mt:ce,mc:S,pc:ue,pbc:O,n:M,o:e};return{render:Y,hydrate:void 0,createApp:createAppAPI(Y)}}function resolveChildrenNamespace({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function toggleRecurse({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,s=!1){const n=e.children,i=t.children;if(isArray$1(n)&&isArray$1(i))for(let o=0;o<n.length;o++){const r=n[o];let u=i[o];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[o]=cloneIfMounted(i[o]),u.el=r.el),!s&&u.patchFlag!==-2&&traverseStaticChildren(r,u)),u.type===Text&&u.patchFlag!==-1&&(u.el=r.el),u.type===Comment&&!u.el&&(u.el=r.el)}}function getSequence(e){const t=e.slice(),s=[0];let n,i,o,r,u;const c=e.length;for(n=0;n<c;n++){const d=e[n];if(d!==0){if(i=s[s.length-1],e[i]<d){t[n]=i,s.push(n);continue}for(o=0,r=s.length-1;o<r;)u=o+r>>1,e[s[u]]<d?o=u+1:r=u;d<e[s[o]]&&(o>0&&(t[n]=s[o-1]),s[o]=n)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=t[r];return s}function locateNonHydratedAsyncRoot(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}function invalidateMount(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(e,t,s){return doWatch(e,t,s)}function doWatch(e,t,s=EMPTY_OBJ){const{immediate:n,deep:i,flush:o,once:r}=s,u=extend({},s),c=t&&n||!t&&o!=="post";let d;if(isInSSRComponentSetup){if(o==="sync"){const y=useSSRContext();d=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=NOOP,y.resume=NOOP,y.pause=NOOP,y}}const a=currentInstance;u.call=(y,w,F)=>callWithAsyncErrorHandling(y,a,w,F);let g=!1;o==="post"?u.scheduler=y=>{queuePostRenderEffect(y,a&&a.suspense)}:o!=="sync"&&(g=!0,u.scheduler=(y,w)=>{w?y():queueJob(y)}),u.augmentJob=y=>{t&&(y.flags|=4),g&&(y.flags|=2,a&&(y.id=a.uid,y.i=a))};const C=watch$1(e,t,u);return isInSSRComponentSetup&&(d?d.push(C):c&&C()),C}function instanceWatch(e,t,s){const n=this.proxy,i=isString(e)?e.includes(".")?createPathGetter(n,e):()=>n[e]:e.bind(n,n);let o;isFunction(t)?o=t:(o=t.handler,s=t);const r=setCurrentInstance(this),u=doWatch(i,o.bind(n),s);return r(),u}function createPathGetter(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const getModelModifiers=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${camelize(t)}Modifiers`]||e[`${hyphenate(t)}Modifiers`];function emit(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||EMPTY_OBJ;let i=s;const o=t.startsWith("update:"),r=o&&getModelModifiers(n,t.slice(7));r&&(r.trim&&(i=s.map(a=>isString(a)?a.trim():a)),r.number&&(i=s.map(looseToNumber)));let u,c=n[u=toHandlerKey(t)]||n[u=toHandlerKey(camelize(t))];!c&&o&&(c=n[u=toHandlerKey(hyphenate(t))]),c&&callWithAsyncErrorHandling(c,e,6,i);const d=n[u+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,callWithAsyncErrorHandling(d,e,6,i)}}const mixinEmitsCache=new WeakMap;function normalizeEmitsOptions(e,t,s=!1){const n=s?mixinEmitsCache:t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let r={},u=!1;if(!isFunction(e)){const c=d=>{const a=normalizeEmitsOptions(d,t,!0);a&&(u=!0,extend(r,a))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!o&&!u?(isObject(e)&&n.set(e,null),null):(isArray$1(o)?o.forEach(c=>r[c]=null):extend(r,o),isObject(e)&&n.set(e,r),r)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:s,proxy:n,withProxy:i,propsOptions:[o],slots:r,attrs:u,emit:c,render:d,renderCache:a,props:g,data:C,setupState:y,ctx:w,inheritAttrs:F}=e,x=setCurrentRenderingInstance(e);let T,k;try{if(s.shapeFlag&4){const I=i||n,_=I;T=normalizeVNode(d.call(_,I,a,g,y,C,w)),k=u}else{const I=t;T=normalizeVNode(I.length>1?I(g,{attrs:u,slots:r,emit:c}):I(g,null)),k=t.props?u:getFunctionalFallthrough(u)}}catch(I){blockStack.length=0,handleError(I,e,1),T=createVNode(Comment)}let H=T;if(k&&F!==!1){const I=Object.keys(k),{shapeFlag:_}=H;I.length&&_&7&&(o&&I.some(isModelListener)&&(k=filterModelListeners(k,o)),H=cloneVNode(H,k,!1,!0))}return s.dirs&&(H=cloneVNode(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(s.dirs):s.dirs),s.transition&&setTransitionHooks(H,s.transition),T=H,setCurrentRenderingInstance(x),T}const getFunctionalFallthrough=e=>{let t;for(const s in e)(s==="class"||s==="style"||isOn(s))&&((t||(t={}))[s]=e[s]);return t},filterModelListeners=(e,t)=>{const s={};for(const n in e)(!isModelListener(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function shouldUpdateComponent(e,t,s){const{props:n,children:i,component:o}=e,{props:r,children:u,patchFlag:c}=t,d=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?hasPropsChanged(n,r,d):!!r;if(c&8){const a=t.dynamicProps;for(let g=0;g<a.length;g++){const C=a[g];if(r[C]!==n[C]&&!isEmitListener(d,C))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:n===r?!1:n?r?hasPropsChanged(n,r,d):!0:!!r;return!1}function hasPropsChanged(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!isEmitListener(s,o))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$1(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e,t=!1){isBlockTreeEnabled+=e,e<0&&currentBlock&&t&&(currentBlock.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,s,n,i,o){return setupBlock(createBaseVNode(e,t,s,n,i,o,!0))}function createBlock(e,t,s,n,i){return setupBlock(createVNode(e,t,s,n,i,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!s}:e:null);function createBaseVNode(e,t=null,s=null,n=0,i=null,o=e===Fragment?0:1,r=!1,u=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return u?(normalizeChildren(c,s),o&128&&e.normalize(c)):s&&(c.shapeFlag|=isString(s)?8:16),isBlockTreeEnabled>0&&!r&&currentBlock&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&currentBlock.push(c),c}const createVNode=_createVNode;function _createVNode(e,t=null,s=null,n=0,i=null,o=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const u=cloneVNode(e,t,!0);return s&&normalizeChildren(u,s),isBlockTreeEnabled>0&&!o&&currentBlock&&(u.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=u:currentBlock.push(u)),u.patchFlag=-2,u}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:u,style:c}=t;u&&!isString(u)&&(t.class=normalizeClass(u)),isObject(c)&&(isProxy(c)&&!isArray$1(c)&&(c=extend({},c)),t.style=normalizeStyle(c))}const r=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,s,n,i,r,o,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend({},e):e:null}function cloneVNode(e,t,s=!1,n=!1){const{props:i,ref:o,patchFlag:r,children:u,transition:c}=e,d=t?mergeProps(i||{},t):i,a={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&normalizeKey(d),ref:t&&t.ref?s&&o?isArray$1(o)?o.concat(normalizeRef(t)):[o,normalizeRef(t)]:normalizeRef(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&setTransitionHooks(a,c.clone(a)),a}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createStaticVNode(e,t){const s=createVNode(Static,null,e);return s.staticCount=t,s}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$1(e)?createVNode(Fragment,null,e.slice()):isVNode(e)?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(isArray$1(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),normalizeChildren(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!isInternalObject(t)?t._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},s=32):(t=String(t),n&64?(s=16,t=[createTextVNode(t)]):s=8);e.children=t,e.shapeFlag|=s}function mergeProps(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=normalizeClass([t.class,n.class]));else if(i==="style")t.style=normalizeStyle([t.style,n.style]);else if(isOn(i)){const o=t[i],r=n[i];r&&o!==r&&!(isArray$1(o)&&o.includes(r))&&(t[i]=o?[].concat(o,r):r)}else i!==""&&(t[i]=n[i])}return t}function invokeVNodeHook(e,t,s,n=null){callWithAsyncErrorHandling(e,t,7,[s,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||emptyAppContext,o={uid:uid++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=emit.bind(null,o),e.ce&&e.ce(o),o}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis(),t=(s,n)=>{let i;return(i=e[s])||(i=e[s]=[]),i.push(n),o=>{i.length>1?i.forEach(r=>r(o)):i[0](o)}};internalSetCurrentInstance=t("__VUE_INSTANCE_SETTERS__",s=>currentInstance=s),setInSSRSetupState=t("__VUE_SSR_SETTERS__",s=>isInSSRComponentSetup=s)}const setCurrentInstance=e=>{const t=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(t)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1,s=!1){t&&setInSSRSetupState(t);const{props:n,children:i}=e.vnode,o=isStatefulComponent(e);initProps(e,n,o,t),initSlots(e,i,s||t);const r=o?setupStatefulComponent(e,t):void 0;return t&&setInSSRSetupState(!1),r}function setupStatefulComponent(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:n}=s;if(n){pauseTracking();const i=e.setupContext=n.length>1?createSetupContext(e):null,o=setCurrentInstance(e),r=callWithErrorHandling(n,e,0,[e.props,i]),u=isPromise(r);if(resetTracking(),o(),(u||e.sp)&&!isAsyncWrapper(e)&&markAsyncBoundary(e),u){if(r.then(unsetCurrentInstance,unsetCurrentInstance),t)return r.then(c=>{handleSetupResult(e,c)}).catch(c=>{handleError(c,e,0)});e.asyncDep=r}else handleSetupResult(e,r)}else finishComponentSetup(e)}function handleSetupResult(e,t,s){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e)}function finishComponentSetup(e,t,s){const n=e.type;e.render||(e.render=n.render||NOOP);{const i=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),i()}}}const attrsProxyHandlers={get(e,t){return track(e,"get",""),e[t]}};function createSetupContext(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:t}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](e)},has(t,s){return s in t||s in publicPropertiesMap}})):e.proxy}const classifyRE=/(?:^|[-_])\w/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,s=!1){let n=getComponentName(t);if(!n&&t.__file){const i=t.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&e&&e.parent){const i=o=>{for(const r in o)if(o[r]===t)return r};n=i(e.components||e.parent.type.components)||i(e.appContext.components)}return n?classify(n):s?"App":"Anonymous"}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h(e,t,s){try{setBlockTracking(-1);const n=arguments.length;return n===2?isObject(t)&&!isArray$1(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&isVNode(s)&&(s=[s]),createVNode(e,t,s))}finally{setBlockTracking(1)}}const version="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:e=>e})}catch{}const unsafeToTrustedHTML=policy?e=>policy.createHTML(e):e=>e,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t==="svg"?doc.createElementNS(svgNS,e):t==="mathml"?doc.createElementNS(mathmlNS,e):s?doc.createElement(e,{is:s}):doc.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,o){const r=s?s.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const u=templateContainer.content;if(n==="svg"||n==="mathml"){const c=u.firstChild;for(;c.firstChild;)u.appendChild(c.firstChild);u.removeChild(c)}t.insertBefore(u,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=e=>(e.displayName="Transition",e.props=TransitionPropsValidators,e),Transition=decorate$1((e,{slots:t})=>h(BaseTransition,resolveTransitionProps(e),t)),callHook=(e,t=[])=>{isArray$1(e)?e.forEach(s=>s(...t)):e&&e(...t)},hasExplicitCallback=e=>e?isArray$1(e)?e.some(t=>t.length>1):e.length>1:!1;function resolveTransitionProps(e){const t={};for(const P in e)P in DOMTransitionPropsValidators||(t[P]=e[P]);if(e.css===!1)return t;const{name:s="v",type:n,duration:i,enterFromClass:o=`${s}-enter-from`,enterActiveClass:r=`${s}-enter-active`,enterToClass:u=`${s}-enter-to`,appearFromClass:c=o,appearActiveClass:d=r,appearToClass:a=u,leaveFromClass:g=`${s}-leave-from`,leaveActiveClass:C=`${s}-leave-active`,leaveToClass:y=`${s}-leave-to`}=e,w=normalizeDuration(i),F=w&&w[0],x=w&&w[1],{onBeforeEnter:T,onEnter:k,onEnterCancelled:H,onLeave:I,onLeaveCancelled:_,onBeforeAppear:E=T,onAppear:v=k,onAppearCancelled:S=H}=t,m=(P,U,ce,se)=>{P._enterCancelled=se,removeTransitionClass(P,U?a:u),removeTransitionClass(P,U?d:r),ce&&ce()},O=(P,U)=>{P._isLeaving=!1,removeTransitionClass(P,g),removeTransitionClass(P,y),removeTransitionClass(P,C),U&&U()},f=P=>(U,ce)=>{const se=P?v:k,ae=()=>m(U,P,ce);callHook(se,[U,ae]),nextFrame(()=>{removeTransitionClass(U,P?c:o),addTransitionClass(U,P?a:u),hasExplicitCallback(se)||whenTransitionEnds(U,n,F,ae)})};return extend(t,{onBeforeEnter(P){callHook(T,[P]),addTransitionClass(P,o),addTransitionClass(P,r)},onBeforeAppear(P){callHook(E,[P]),addTransitionClass(P,c),addTransitionClass(P,d)},onEnter:f(!1),onAppear:f(!0),onLeave(P,U){P._isLeaving=!0;const ce=()=>O(P,U);addTransitionClass(P,g),P._enterCancelled?(addTransitionClass(P,C),forceReflow(P)):(forceReflow(P),addTransitionClass(P,C)),nextFrame(()=>{P._isLeaving&&(removeTransitionClass(P,g),addTransitionClass(P,y),hasExplicitCallback(I)||whenTransitionEnds(P,n,x,ce))}),callHook(I,[P,ce])},onEnterCancelled(P){m(P,!1,void 0,!0),callHook(H,[P])},onAppearCancelled(P){m(P,!0,void 0,!0),callHook(S,[P])},onLeaveCancelled(P){O(P),callHook(_,[P])}})}function normalizeDuration(e){if(e==null)return null;if(isObject(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const t=NumberOf(e);return[t,t]}}function NumberOf(e){return toNumber(e)}function addTransitionClass(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[vtcKey]||(e[vtcKey]=new Set)).add(t)}function removeTransitionClass(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[vtcKey];s&&(s.delete(t),s.size||(e[vtcKey]=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,t,s,n){const i=e._endId=++endId,o=()=>{i===e._endId&&n()};if(s!=null)return setTimeout(o,s);const{type:r,timeout:u,propCount:c}=getTransitionInfo(e,t);if(!r)return n();const d=r+"end";let a=0;const g=()=>{e.removeEventListener(d,C),o()},C=y=>{y.target===e&&++a>=c&&g()};setTimeout(()=>{a<c&&g()},u+1),e.addEventListener(d,C)}function getTransitionInfo(e,t){const s=window.getComputedStyle(e),n=w=>(s[w]||"").split(", "),i=n(`${TRANSITION}Delay`),o=n(`${TRANSITION}Duration`),r=getTimeout(i,o),u=n(`${ANIMATION}Delay`),c=n(`${ANIMATION}Duration`),d=getTimeout(u,c);let a=null,g=0,C=0;t===TRANSITION?r>0&&(a=TRANSITION,g=r,C=o.length):t===ANIMATION?d>0&&(a=ANIMATION,g=d,C=c.length):(g=Math.max(r,d),a=g>0?r>d?TRANSITION:ANIMATION:null,C=a?a===TRANSITION?o.length:c.length:0);const y=a===TRANSITION&&/\b(?:transform|all)(?:,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:a,timeout:g,propCount:C,hasTransform:y}}function getTimeout(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>toMs(s)+toMs(e[n])))}function toMs(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(e){return(e?e.ownerDocument:document).body.offsetHeight}function patchClass(e,t,s){const n=e[vtcKey];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={name:"show",beforeMount(e,{value:t},{transition:s}){e[vShowOriginalDisplay]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),setDisplay(e,!0),n.enter(e)):n.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e[vShowOriginalDisplay]:"none",e[vShowHidden]=!t}const CSS_VAR_TEXT=Symbol(""),displayRE=/(?:^|;)\s*display\s*:/;function patchStyle(e,t,s){const n=e.style,i=isString(s);let o=!1;if(s&&!i){if(t)if(isString(t))for(const r of t.split(";")){const u=r.slice(0,r.indexOf(":")).trim();s[u]==null&&setStyle(n,u,"")}else for(const r in t)s[r]==null&&setStyle(n,r,"");for(const r in s)r==="display"&&(o=!0),setStyle(n,r,s[r])}else if(i){if(t!==s){const r=n[CSS_VAR_TEXT];r&&(s+=";"+r),n.cssText=s,o=displayRE.test(s)}}else t&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=o?n.display:"",e[vShowHidden]&&(n.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,t,s){if(isArray$1(s))s.forEach(n=>setStyle(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=autoPrefix(e,t);importantRE.test(s)?e.setProperty(hyphenate(n),s.replace(importantRE,""),"important"):e[n]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const s=prefixCache[t];if(s)return s;let n=camelize(t);if(n!=="filter"&&n in e)return prefixCache[t]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const o=prefixes[i]+n;if(o in e)return prefixCache[t]=o}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,s,n,i,o=isSpecialBooleanAttr(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,s):s==null||o&&!includeBooleanAttr(s)?e.removeAttribute(t):e.setAttribute(t,o?"":isSymbol(s)?String(s):s)}function patchDOMProp(e,t,s,n,i){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?unsafeToTrustedHTML(s):s);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const u=o==="OPTION"?e.getAttribute("value")||"":e.value,c=s==null?e.type==="checkbox"?"on":"":String(s);(u!==c||!("_value"in e))&&(e.value=c),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const u=typeof e[t];u==="boolean"?s=includeBooleanAttr(s):s==null&&u==="string"?(s="",r=!0):u==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(i||t)}function addEventListener(e,t,s,n){e.addEventListener(t,s,n)}function removeEventListener(e,t,s,n){e.removeEventListener(t,s,n)}const veiKey=Symbol("_vei");function patchEvent(e,t,s,n,i=null){const o=e[veiKey]||(e[veiKey]={}),r=o[t];if(n&&r)r.value=n;else{const[u,c]=parseName(t);if(n){const d=o[t]=createInvoker(n,i);addEventListener(e,u,d,c)}else r&&(removeEventListener(e,u,r,c),o[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let n;for(;n=e.match(optionsModifierRE);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,s.value),t,5,[n])};return s.value=e,s.attached=getNow(),s}function patchStopImmediatePropagation(e,t){if(isArray$1(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const isNativeOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,t,s,n,i,o)=>{const r=i==="svg";t==="class"?patchClass(e,n,r):t==="style"?patchStyle(e,s,n):isOn(t)?isModelListener(t)||patchEvent(e,t,s,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,n,r))?(patchDOMProp(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&patchAttr(e,t,n,r,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!isString(n))?patchDOMProp(e,camelize(t),n,o,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),patchAttr(e,t,n,r))};function shouldSetAsProp(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&isNativeOn(t)&&isFunction(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return isNativeOn(t)&&isString(s)?!1:t in e}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=e=>(delete e.props.mode,e),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:t}){const s=getCurrentInstance(),n=useTransitionState();let i,o;return onUpdated(()=>{if(!i.length)return;const r=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(i[0].el,s.vnode.el,r)){i=[];return}i.forEach(callPendingCbs),i.forEach(recordPosition);const u=i.filter(applyTranslation);forceReflow(s.vnode.el),u.forEach(c=>{const d=c.el,a=d.style;addTransitionClass(d,r),a.transform=a.webkitTransform=a.transitionDuration="";const g=d[moveCbKey]=C=>{C&&C.target!==d||(!C||C.propertyName.endsWith("transform"))&&(d.removeEventListener("transitionend",g),d[moveCbKey]=null,removeTransitionClass(d,r))};d.addEventListener("transitionend",g)}),i=[]}),()=>{const r=toRaw(e),u=resolveTransitionProps(r);let c=r.tag||Fragment;if(i=[],o)for(let d=0;d<o.length;d++){const a=o[d];a.el&&a.el instanceof Element&&(i.push(a),setTransitionHooks(a,resolveTransitionHooks(a,u,n,s)),positionMap.set(a,a.el.getBoundingClientRect()))}o=t.default?getTransitionRawChildren(t.default()):[];for(let d=0;d<o.length;d++){const a=o[d];a.key!=null&&setTransitionHooks(a,resolveTransitionHooks(a,u,n,s))}return createVNode(c,null,o)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const t=e.el;t[moveCbKey]&&t[moveCbKey](),t[enterCbKey]&&t[enterCbKey]()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const t=positionMap.get(e),s=newPositionMap.get(e),n=t.left-s.left,i=t.top-s.top;if(n||i){const o=e.el.style;return o.transform=o.webkitTransform=`translate(${n}px,${i}px)`,o.transitionDuration="0s",e}}function hasCSSTransform(e,t,s){const n=e.cloneNode(),i=e[vtcKey];i&&i.forEach(u=>{u.split(/\s+/).forEach(c=>c&&n.classList.remove(c))}),s.split(/\s+/).forEach(u=>u&&n.classList.add(u)),n.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(n);const{hasTransform:r}=getTransitionInfo(n);return o.removeChild(n),r}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray$1(t)?s=>invokeArrayFns(t,s):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e[assignKey]=getModelAssigner(i);const o=n||i.props&&i.props.type==="number";addEventListener(e,t?"change":"input",r=>{if(r.target.composing)return;let u=e.value;s&&(u=u.trim()),o&&(u=looseToNumber(u)),e[assignKey](u)}),s&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:i,number:o}},r){if(e[assignKey]=getModelAssigner(r),e.composing)return;const u=(o||e.type==="number")&&!/^0\d/.test(e.value)?looseToNumber(e.value):e.value,c=t??"";u!==c&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||i&&e.value.trim()===c)||(e.value=c))}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(s=>e[`${s}Key`]&&!t.includes(s))},withModifiers=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(i,...o)=>{for(let r=0;r<t.length;r++){const u=modifierGuards[t[r]];if(u&&u(i,t))return}return e(i,...o)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=i=>{if(!("key"in i))return;const o=hyphenate(i.key);if(t.some(r=>r===o||keyNames[r]===o))return e(i)})},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=normalizeContainer(n);if(!i)return;const o=t._component;!isFunction(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=s(i,!1,resolveRootNamespace(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function resolveRootNamespace(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function normalizeContainer(e){return isString(e)?document.querySelector(e):e}const _export_sfc=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},_sfc_main$7={name:"ToastNotification",setup(){const e=ref([]);let t=0;const s=o=>{const r=++t,u={id:r,...o,duration:o.duration||3e3};return e.value.push(u),u.duration>0&&setTimeout(()=>{n(r)},u.duration),r},n=o=>{const r=e.value.findIndex(u=>u.id===o);r>-1&&e.value.splice(r,1)},i=o=>{const r={success:"✅",error:"❌",warning:"⚠️",info:"ℹ️"};return r[o]||r.info};return onMounted(()=>{window.$toast={success:(o,r)=>s({type:"success",title:o,message:r}),error:(o,r)=>s({type:"error",title:o,message:r}),warning:(o,r)=>s({type:"warning",title:o,message:r}),info:(o,r)=>s({type:"info",title:o,message:r}),show:o=>s(o)}}),{toasts:e,removeToast:n,getToastIcon:i}}},_hoisted_1$7={class:"toast-container"},_hoisted_2$6=["onClick"],_hoisted_3$6={class:"toast-icon"},_hoisted_4$6={class:"toast-content"},_hoisted_5$6={class:"toast-title"},_hoisted_6$5={key:0,class:"toast-message"},_hoisted_7$4=["onClick"];function _sfc_render$7(e,t,s,n,i,o){return openBlock(),createBlock(Teleport,{to:"body"},[createBaseVNode("div",_hoisted_1$7,[createVNode(TransitionGroup,{name:"toast",tag:"div"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.toasts,r=>(openBlock(),createElementBlock("div",{key:r.id,class:normalizeClass(["toast",`toast-${r.type}`]),onClick:u=>n.removeToast(r.id)},[createBaseVNode("div",_hoisted_3$6,toDisplayString(n.getToastIcon(r.type)),1),createBaseVNode("div",_hoisted_4$6,[createBaseVNode("div",_hoisted_5$6,toDisplayString(r.title),1),r.message?(openBlock(),createElementBlock("div",_hoisted_6$5,toDisplayString(r.message),1)):createCommentVNode("",!0)]),createBaseVNode("button",{class:"toast-close",onClick:withModifiers(u=>n.removeToast(r.id),["stop"])}," ✕ ",8,_hoisted_7$4)],10,_hoisted_2$6))),128))]),_:1})])])}const ToastNotification=_export_sfc(_sfc_main$7,[["render",_sfc_render$7],["__scopeId","data-v-dc401bc7"]]),_sfc_main$6={name:"ConfirmDialog",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,required:!0},details:{type:String,default:""},confirmText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"},type:{type:String,default:"warning",validator:e=>["warning","danger","info","success"].includes(e)},loading:{type:Boolean,default:!1},closeOnOverlay:{type:Boolean,default:!1}},emits:["confirm","cancel","update:visible"],setup(e,{emit:t}){const s=()=>{e.loading||t("confirm")},n=()=>{e.loading||(t("cancel"),t("update:visible",!1))},i=()=>{e.closeOnOverlay&&!e.loading&&n()},o=()=>{const u={warning:"⚠️",danger:"🗑️",info:"ℹ️",success:"✅"};return u[e.type]||u.warning};watch(()=>e.visible,u=>{u?document.addEventListener("keydown",r):document.removeEventListener("keydown",r)});const r=u=>{u.key==="Escape"&&!e.loading&&n()};return{handleConfirm:s,handleCancel:n,handleOverlayClick:i,getIcon:o}}},_hoisted_1$6={class:"modal-header"},_hoisted_2$5={class:"modal-icon"},_hoisted_3$5={class:"modal-title"},_hoisted_4$5={class:"modal-body"},_hoisted_5$5={class:"modal-message"},_hoisted_6$4={key:0,class:"modal-details"},_hoisted_7$3={class:"modal-footer"},_hoisted_8$3=["disabled"],_hoisted_9$3=["disabled"],_hoisted_10$3={key:0,class:"loading-spinner"},_hoisted_11$3={key:1};function _sfc_render$6(e,t,s,n,i,o){return openBlock(),createBlock(Teleport,{to:"body"},[createVNode(Transition,{name:"modal"},{default:withCtx(()=>[s.visible?(openBlock(),createElementBlock("div",{key:0,class:"modal-overlay",onClick:t[3]||(t[3]=(...r)=>n.handleOverlayClick&&n.handleOverlayClick(...r))},[createBaseVNode("div",{class:"modal-container",onClick:t[2]||(t[2]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$5,toDisplayString(n.getIcon()),1),createBaseVNode("h3",_hoisted_3$5,toDisplayString(s.title||"确认操作"),1)]),createBaseVNode("div",_hoisted_4$5,[createBaseVNode("p",_hoisted_5$5,toDisplayString(s.message),1),s.details?(openBlock(),createElementBlock("div",_hoisted_6$4,[createBaseVNode("small",null,toDisplayString(s.details),1)])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_7$3,[createBaseVNode("button",{onClick:t[0]||(t[0]=(...r)=>n.handleCancel&&n.handleCancel(...r)),class:"modal-btn modal-btn-cancel",disabled:s.loading},toDisplayString(s.cancelText||"取消"),9,_hoisted_8$3),createBaseVNode("button",{onClick:t[1]||(t[1]=(...r)=>n.handleConfirm&&n.handleConfirm(...r)),class:normalizeClass(["modal-btn modal-btn-confirm",{loading:s.loading}]),disabled:s.loading},[s.loading?(openBlock(),createElementBlock("span",_hoisted_10$3,"⏳")):(openBlock(),createElementBlock("span",_hoisted_11$3,toDisplayString(s.confirmText||"确认"),1))],10,_hoisted_9$3)])])])):createCommentVNode("",!0)]),_:1})])}const ConfirmDialog=_export_sfc(_sfc_main$6,[["render",_sfc_render$6],["__scopeId","data-v-b0f35270"]]),_sfc_main$5={name:"App",components:{ToastNotification,ConfirmDialog},data(){return{confirmDialog:{visible:!1,title:"",message:"",details:"",confirmText:"确认",cancelText:"取消",type:"warning",loading:!1,resolve:null,reject:null}}},methods:{showConfirm(e){const{title:t="确认操作",message:s,details:n="",confirmText:i="确认",cancelText:o="取消",type:r="warning"}=e;return new Promise((u,c)=>{this.confirmDialog={visible:!0,title:t,message:s,details:n,confirmText:i,cancelText:o,type:r,loading:!1,resolve:u,reject:c}})},handleConfirm(){this.confirmDialog.resolve&&this.confirmDialog.resolve(!0),this.hideConfirmDialog()},handleCancel(){this.confirmDialog.reject&&this.confirmDialog.reject(!1),this.hideConfirmDialog()},hideConfirmDialog(){this.confirmDialog.visible=!1,this.confirmDialog.loading=!1,this.confirmDialog.resolve=null,this.confirmDialog.reject=null}},mounted(){window.$confirm=this.showConfirm}},_hoisted_1$5={id:"app"};function _sfc_render$5(e,t,s,n,i,o){const r=resolveComponent("router-view"),u=resolveComponent("ToastNotification"),c=resolveComponent("ConfirmDialog");return openBlock(),createElementBlock("div",_hoisted_1$5,[createVNode(r),createVNode(u),createVNode(c,{visible:i.confirmDialog.visible,title:i.confirmDialog.title,message:i.confirmDialog.message,details:i.confirmDialog.details,confirmText:i.confirmDialog.confirmText,cancelText:i.confirmDialog.cancelText,type:i.confirmDialog.type,loading:i.confirmDialog.loading,onConfirm:o.handleConfirm,onCancel:o.handleCancel,"onUpdate:visible":t[0]||(t[0]=d=>i.confirmDialog.visible=d)},null,8,["visible","title","message","details","confirmText","cancelText","type","loading","onConfirm","onCancel"])])}const App=_export_sfc(_sfc_main$5,[["render",_sfc_render$5]]);/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const isBrowser=typeof document<"u";function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&isRouteComponent(e.default)}const assign=Object.assign;function applyToParams(e,t){const s={};for(const n in t){const i=t[n];s[n]=isArray(i)?i.map(e):e(i)}return s}const noop=()=>{},isArray=Array.isArray;function mergeOptions(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return e==null?"":encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,s="/"){let n,i={},o="",r="";const u=t.indexOf("#");let c=t.indexOf("?");return c=u>=0&&c>u?-1:c,c>=0&&(n=t.slice(0,c),o=t.slice(c,u>0?u:t.length),i=e(o)),u>=0&&(n=n||t.slice(0,u),r=t.slice(u,t.length)),n=resolveRelativePath(n??t,s),{fullPath:n+o+r,path:n,query:i,hash:decode(r)}}function stringifyURL(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function stripBase(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function isSameRouteLocation(e,t,s){const n=t.matched.length-1,i=s.matched.length-1;return n>-1&&n===i&&isSameRouteRecord(t.matched[n],s.matched[i])&&isSameRouteLocationParams(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!isSameRouteLocationParamsValue(e[s],t[s]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray(e)?isEquivalentArray(e,t):isArray(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=s.length-1,r,u;for(r=0;r<n.length;r++)if(u=n[r],u!==".")if(u==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+n.slice(r).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let NavigationType=function(e){return e.pop="pop",e.push="push",e}({}),NavigationDirection=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),i=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!i)return;t=getElementPosition(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}let ErrorTypes=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const NavigationFailureSymbol=Symbol("");ErrorTypes.MATCHER_NOT_FOUND+"",ErrorTypes.NAVIGATION_GUARD_REDIRECT+"",ErrorTypes.NAVIGATION_ABORTED+"",ErrorTypes.NAVIGATION_CANCELLED+"",ErrorTypes.NAVIGATION_DUPLICATED+"";function createRouterError(e,t){return assign(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(t==null||!!(e.type&t))}const propertiesToLog=["params","query","hash"];function stringifyRoute(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of propertiesToLog)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function parseQuery(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const i=s[n].replace(PLUS_RE," "),o=i.indexOf("="),r=decode(o<0?i:i.slice(0,o)),u=o<0?null:decode(i.slice(o+1));if(r in t){let c=t[r];isArray(c)||(c=t[r]=[c]),c.push(u)}else t[r]=u}return t}function stringifyQuery(e){let t="";for(let s in e){const n=e[s];if(s=encodeQueryKey(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(isArray(n)?n.map(i=>i&&encodeQueryValue(i)):[n&&encodeQueryValue(n)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+s,i!=null&&(t+="="+i))})}return t}function normalizeQuery(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=isArray(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function guardToPromiseFn(e,t,s,n,i,o=r=>r()){const r=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((u,c)=>{const d=C=>{C===!1?c(createRouterError(ErrorTypes.NAVIGATION_ABORTED,{from:s,to:t})):C instanceof Error?c(C):isRouteLocation(C)?c(createRouterError(ErrorTypes.NAVIGATION_GUARD_REDIRECT,{from:t,to:C})):(r&&n.enterCallbacks[i]===r&&typeof C=="function"&&r.push(C),u())},a=o(()=>e.call(n&&n.instances[i],t,s,d));let g=Promise.resolve(a);e.length<3&&(g=g.then(d)),g.catch(C=>c(C))})}function extractComponentsGuards(e,t,s,n,i=o=>o()){const o=[];for(const r of e)for(const u in r.components){let c=r.components[u];if(!(t!=="beforeRouteEnter"&&!r.instances[u]))if(isRouteComponent(c)){const d=(c.__vccOpts||c)[t];d&&o.push(guardToPromiseFn(d,s,n,r,u,i))}else{let d=c();o.push(()=>d.then(a=>{if(!a)throw new Error(`Couldn't resolve component "${u}" at "${r.path}"`);const g=isESModule(a)?a.default:a;r.mods[u]=a,r.components[u]=g;const C=(g.__vccOpts||g)[t];return C&&guardToPromiseFn(C,s,n,r,u,i)()}))}}return o}function extractChangingRecords(e,t){const s=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let r=0;r<o;r++){const u=t.matched[r];u&&(e.matched.find(d=>isSameRouteRecord(d,u))?n.push(u):s.push(u));const c=e.matched[r];c&&(t.matched.find(d=>isSameRouteRecord(d,c))||i.push(c))}return[s,n,i]}/*!
 * vue-router v4.6.0
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,t){const{pathname:s,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let r=i.includes(e.slice(o))?e.slice(o).length:1,u=i.slice(r);return u[0]!=="/"&&(u="/"+u),stripBase(u,"")}return stripBase(s,e)+n+i}function useHistoryListeners(e,t,s,n){let i=[],o=[],r=null;const u=({state:C})=>{const y=createCurrentLocation(e,location),w=s.value,F=t.value;let x=0;if(C){if(s.value=y,t.value=C,r&&r===w){r=null;return}x=F?C.position-F.position:0}else n(y);i.forEach(T=>{T(s.value,w,{delta:x,type:NavigationType.pop,direction:x?x>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function c(){r=s.value}function d(C){i.push(C);const y=()=>{const w=i.indexOf(C);w>-1&&i.splice(w,1)};return o.push(y),y}function a(){if(document.visibilityState==="hidden"){const{history:C}=window;if(!C.state)return;C.replaceState(assign({},C.state,{scroll:computeScrollPosition()}),"")}}function g(){for(const C of o)C();o=[],window.removeEventListener("popstate",u),window.removeEventListener("pagehide",a),document.removeEventListener("visibilitychange",a)}return window.addEventListener("popstate",u),window.addEventListener("pagehide",a),document.addEventListener("visibilitychange",a),{pauseListeners:c,listen:d,destroy:g}}function buildState(e,t,s,n=!1,i=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:i?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:s}=window,n={value:createCurrentLocation(e,s)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(c,d,a){const g=e.indexOf("#"),C=g>-1?(s.host&&document.querySelector("base")?e:e.slice(g))+c:createBaseLocation()+e+c;try{t[a?"replaceState":"pushState"](d,"",C),i.value=d}catch(y){console.error(y),s[a?"replace":"assign"](C)}}function r(c,d){o(c,assign({},t.state,buildState(i.value.back,c,i.value.forward,!0),d,{position:i.value.position}),!0),n.value=c}function u(c,d){const a=assign({},i.value,t.state,{forward:c,scroll:computeScrollPosition()});o(a.current,a,!0),o(c,assign({},buildState(n.value,c,null),{position:a.position+1},d),!1),n.value=c}return{location:n,state:i,push:u,replace:r}}function createWebHistory(e){e=normalizeBase(e);const t=useHistoryStateNavigation(e),s=useHistoryListeners(e,t.state,t.location,t.replace);function n(o,r=!0){r||s.pauseListeners(),history.go(o)}const i=assign({location:"",base:e,go:n,createHref:createHref.bind(null,e)},t,s);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}let TokenType=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var TokenizerState=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(TokenizerState||{});const ROOT_TOKEN={type:TokenType.Static,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${s})/"${d}": ${y}`)}let s=TokenizerState.Static,n=s;const i=[];let o;function r(){o&&i.push(o),o=[]}let u=0,c,d="",a="";function g(){d&&(s===TokenizerState.Static?o.push({type:TokenType.Static,value:d}):s===TokenizerState.Param||s===TokenizerState.ParamRegExp||s===TokenizerState.ParamRegExpEnd?(o.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:TokenType.Param,value:d,regexp:a,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),d="")}function C(){d+=c}for(;u<e.length;){if(c=e[u++],c==="\\"&&s!==TokenizerState.ParamRegExp){n=s,s=TokenizerState.EscapeNext;continue}switch(s){case TokenizerState.Static:c==="/"?(d&&g(),r()):c===":"?(g(),s=TokenizerState.Param):C();break;case TokenizerState.EscapeNext:C(),s=n;break;case TokenizerState.Param:c==="("?s=TokenizerState.ParamRegExp:VALID_PARAM_RE.test(c)?C():(g(),s=TokenizerState.Static,c!=="*"&&c!=="?"&&c!=="+"&&u--);break;case TokenizerState.ParamRegExp:c===")"?a[a.length-1]=="\\"?a=a.slice(0,-1)+c:s=TokenizerState.ParamRegExpEnd:a+=c;break;case TokenizerState.ParamRegExpEnd:g(),s=TokenizerState.Static,c!=="*"&&c!=="?"&&c!=="+"&&u--,a="";break;default:t("Unknown state");break}}return s===TokenizerState.ParamRegExp&&t(`Unfinished custom RegExp for param "${d}"`),g(),r(),i}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0};var PathScore=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(PathScore||{});const REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const s=assign({},BASE_PATH_PARSER_OPTIONS,t),n=[];let i=s.start?"^":"";const o=[];for(const d of e){const a=d.length?[]:[PathScore.Root];s.strict&&!d.length&&(i+="/");for(let g=0;g<d.length;g++){const C=d[g];let y=PathScore.Segment+(s.sensitive?PathScore.BonusCaseSensitive:0);if(C.type===TokenType.Static)g||(i+="/"),i+=C.value.replace(REGEX_CHARS_RE,"\\$&"),y+=PathScore.Static;else if(C.type===TokenType.Param){const{value:w,repeatable:F,optional:x,regexp:T}=C;o.push({name:w,repeatable:F,optional:x});const k=T||BASE_PARAM_PATTERN;if(k!==BASE_PARAM_PATTERN){y+=PathScore.BonusCustomRegExp;try{`${k}`}catch(I){throw new Error(`Invalid custom RegExp for param "${w}" (${k}): `+I.message)}}let H=F?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;g||(H=x&&d.length<2?`(?:/${H})`:"/"+H),x&&(H+="?"),i+=H,y+=PathScore.Dynamic,x&&(y+=PathScore.BonusOptional),F&&(y+=PathScore.BonusRepeatable),k===".*"&&(y+=PathScore.BonusWildcard)}a.push(y)}n.push(a)}if(s.strict&&s.end){const d=n.length-1;n[d][n[d].length-1]+=PathScore.BonusStrict}s.strict||(i+="/?"),s.end?i+="$":s.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const r=new RegExp(i,s.sensitive?"":"i");function u(d){const a=d.match(r),g={};if(!a)return null;for(let C=1;C<a.length;C++){const y=a[C]||"",w=o[C-1];g[w.name]=y&&w.repeatable?y.split("/"):y}return g}function c(d){let a="",g=!1;for(const C of e){(!g||!a.endsWith("/"))&&(a+="/"),g=!1;for(const y of C)if(y.type===TokenType.Static)a+=y.value;else if(y.type===TokenType.Param){const{value:w,repeatable:F,optional:x}=y,T=w in d?d[w]:"";if(isArray(T)&&!F)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const k=isArray(T)?T.join("/"):T;if(!k)if(x)C.length<2&&(a.endsWith("/")?a=a.slice(0,-1):g=!0);else throw new Error(`Missing required param "${w}"`);a+=k}}return a||"/"}return{re:r,score:n,keys:o,parse:u,stringify:c}}function compareScoreArray(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===PathScore.Static+PathScore.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===PathScore.Static+PathScore.Segment?1:-1:0}function comparePathParserScore(e,t){let s=0;const n=e.score,i=t.score;for(;s<n.length&&s<i.length;){const o=compareScoreArray(n[s],i[s]);if(o)return o;s++}if(Math.abs(i.length-n.length)===1){if(isLastScoreNegative(n))return 1;if(isLastScoreNegative(i))return-1}return i.length-n.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const PATH_PARSER_OPTIONS_DEFAULTS={strict:!1,end:!0,sensitive:!1};function createRouteRecordMatcher(e,t,s){const n=tokensToParser(tokenizePath(e.path),s),i=assign(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function createRouterMatcher(e,t){const s=[],n=new Map;t=mergeOptions(PATH_PARSER_OPTIONS_DEFAULTS,t);function i(g){return n.get(g)}function o(g,C,y){const w=!y,F=normalizeRouteRecord(g);F.aliasOf=y&&y.record;const x=mergeOptions(t,g),T=[F];if("alias"in g){const I=typeof g.alias=="string"?[g.alias]:g.alias;for(const _ of I)T.push(normalizeRouteRecord(assign({},F,{components:y?y.record.components:F.components,path:_,aliasOf:y?y.record:F})))}let k,H;for(const I of T){const{path:_}=I;if(C&&_[0]!=="/"){const E=C.record.path,v=E[E.length-1]==="/"?"":"/";I.path=C.record.path+(_&&v+_)}if(k=createRouteRecordMatcher(I,C,x),y?y.alias.push(k):(H=H||k,H!==k&&H.alias.push(k),w&&g.name&&!isAliasRecord(k)&&r(g.name)),isMatchable(k)&&c(k),F.children){const E=F.children;for(let v=0;v<E.length;v++)o(E[v],k,y&&y.children[v])}y=y||k}return H?()=>{r(H)}:noop}function r(g){if(isRouteName(g)){const C=n.get(g);C&&(n.delete(g),s.splice(s.indexOf(C),1),C.children.forEach(r),C.alias.forEach(r))}else{const C=s.indexOf(g);C>-1&&(s.splice(C,1),g.record.name&&n.delete(g.record.name),g.children.forEach(r),g.alias.forEach(r))}}function u(){return s}function c(g){const C=findInsertionIndex(g,s);s.splice(C,0,g),g.record.name&&!isAliasRecord(g)&&n.set(g.record.name,g)}function d(g,C){let y,w={},F,x;if("name"in g&&g.name){if(y=n.get(g.name),!y)throw createRouterError(ErrorTypes.MATCHER_NOT_FOUND,{location:g});x=y.record.name,w=assign(pickParams(C.params,y.keys.filter(H=>!H.optional).concat(y.parent?y.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),g.params&&pickParams(g.params,y.keys.map(H=>H.name))),F=y.stringify(w)}else if(g.path!=null)F=g.path,y=s.find(H=>H.re.test(F)),y&&(w=y.parse(F),x=y.record.name);else{if(y=C.name?n.get(C.name):s.find(H=>H.re.test(C.path)),!y)throw createRouterError(ErrorTypes.MATCHER_NOT_FOUND,{location:g,currentLocation:C});x=y.record.name,w=assign({},C.params,g.params),F=y.stringify(w)}const T=[];let k=y;for(;k;)T.unshift(k.record),k=k.parent;return{name:x,path:F,params:w,matched:T,meta:mergeMetaFields(T)}}e.forEach(g=>o(g));function a(){s.length=0,n.clear()}return{addRoute:o,resolve:d,removeRoute:r,clearRoutes:a,getRoutes:u,getRecordMatcher:i}}function pickParams(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function normalizeRouteRecord(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function normalizeRecordProps(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((t,s)=>assign(t,s.meta),{})}function findInsertionIndex(e,t){let s=0,n=t.length;for(;s!==n;){const o=s+n>>1;comparePathParserScore(e,t[o])<0?n=o:s=o+1}const i=getInsertionAncestor(e);return i&&(n=t.lastIndexOf(i,n-1)),n}function getInsertionAncestor(e){let t=e;for(;t=t.parent;)if(isMatchable(t)&&comparePathParserScore(e,t)===0)return t}function isMatchable({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function useLink(e){const t=inject(routerKey),s=inject(routeLocationKey),n=computed(()=>{const c=unref(e.to);return t.resolve(c)}),i=computed(()=>{const{matched:c}=n.value,{length:d}=c,a=c[d-1],g=s.matched;if(!a||!g.length)return-1;const C=g.findIndex(isSameRouteRecord.bind(null,a));if(C>-1)return C;const y=getOriginalPath(c[d-2]);return d>1&&getOriginalPath(a)===y&&g[g.length-1].path!==y?g.findIndex(isSameRouteRecord.bind(null,c[d-2])):C}),o=computed(()=>i.value>-1&&includesParams(s.params,n.value.params)),r=computed(()=>i.value>-1&&i.value===s.matched.length-1&&isSameRouteLocationParams(s.params,n.value.params));function u(c={}){if(guardEvent(c)){const d=t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:n,href:computed(()=>n.value.href),isActive:o,isExactActive:r,navigate:u}}function preferSingleVNode(e){return e.length===1?e[0]:e}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink,setup(e,{slots:t}){const s=reactive(useLink(e)),{options:n}=inject(routerKey),i=computed(()=>({[getLinkClass(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[getLinkClass(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=t.default&&preferSingleVNode(t.default(s));return e.custom?o:h("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:i.value},o)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const s in t){const n=t[s],i=e[s];if(typeof n=="string"){if(n!==i)return!1}else if(!isArray(i)||i.length!==n.length||n.some((o,r)=>o!==i[r]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,s)=>e??t??s,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=inject(routerViewLocationKey),i=computed(()=>e.route||n.value),o=inject(viewDepthKey,0),r=computed(()=>{let d=unref(o);const{matched:a}=i.value;let g;for(;(g=a[d])&&!g.components;)d++;return d}),u=computed(()=>i.value.matched[r.value]);provide(viewDepthKey,computed(()=>r.value+1)),provide(matchedRouteKey,u),provide(routerViewLocationKey,i);const c=ref();return watch(()=>[c.value,u.value,e.name],([d,a,g],[C,y,w])=>{a&&(a.instances[g]=d,y&&y!==a&&d&&d===C&&(a.leaveGuards.size||(a.leaveGuards=y.leaveGuards),a.updateGuards.size||(a.updateGuards=y.updateGuards))),d&&a&&(!y||!isSameRouteRecord(a,y)||!C)&&(a.enterCallbacks[g]||[]).forEach(F=>F(d))},{flush:"post"}),()=>{const d=i.value,a=e.name,g=u.value,C=g&&g.components[a];if(!C)return normalizeSlot(s.default,{Component:C,route:d});const y=g.props[a],w=y?y===!0?d.params:typeof y=="function"?y(d):y:null,x=h(C,assign({},w,t,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(g.instances[a]=null)},ref:c}));return normalizeSlot(s.default,{Component:x,route:d})||x}}});function normalizeSlot(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const RouterView=RouterViewImpl;function createRouter(e){const t=createRouterMatcher(e.routes,e),s=e.parseQuery||parseQuery,n=e.stringifyQuery||stringifyQuery,i=e.history,o=useCallbacks(),r=useCallbacks(),u=useCallbacks(),c=shallowRef(START_LOCATION_NORMALIZED);let d=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const a=applyToParams.bind(null,M=>""+M),g=applyToParams.bind(null,encodeParam),C=applyToParams.bind(null,decode);function y(M,V){let Y,re;return isRouteName(M)?(Y=t.getRecordMatcher(M),re=V):re=M,t.addRoute(re,Y)}function w(M){const V=t.getRecordMatcher(M);V&&t.removeRoute(V)}function F(){return t.getRoutes().map(M=>M.record)}function x(M){return!!t.getRecordMatcher(M)}function T(M,V){if(V=assign({},V||c.value),typeof M=="string"){const q=parseURL(s,M,V.path),ne=t.resolve({path:q.path},V),X=i.createHref(q.fullPath);return assign(q,ne,{params:C(ne.params),hash:decode(q.hash),redirectedFrom:void 0,href:X})}let Y;if(M.path!=null)Y=assign({},M,{path:parseURL(s,M.path,V.path).path});else{const q=assign({},M.params);for(const ne in q)q[ne]==null&&delete q[ne];Y=assign({},M,{params:g(q)}),V.params=g(V.params)}const re=t.resolve(Y,V),ge=M.hash||"";re.params=a(C(re.params));const D=stringifyURL(n,assign({},M,{hash:encodeHash(ge),path:re.path})),L=i.createHref(D);return assign({fullPath:D,hash:ge,query:n===stringifyQuery?normalizeQuery(M.query):M.query||{}},re,{redirectedFrom:void 0,href:L})}function k(M){return typeof M=="string"?parseURL(s,M,c.value.path):assign({},M)}function H(M,V){if(d!==M)return createRouterError(ErrorTypes.NAVIGATION_CANCELLED,{from:V,to:M})}function I(M){return v(M)}function _(M){return I(assign(k(M),{replace:!0}))}function E(M,V){const Y=M.matched[M.matched.length-1];if(Y&&Y.redirect){const{redirect:re}=Y;let ge=typeof re=="function"?re(M,V):re;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=k(ge):{path:ge},ge.params={}),assign({query:M.query,hash:M.hash,params:ge.path!=null?{}:M.params},ge)}}function v(M,V){const Y=d=T(M),re=c.value,ge=M.state,D=M.force,L=M.replace===!0,q=E(Y,re);if(q)return v(assign(k(q),{state:typeof q=="object"?assign({},ge,q.state):ge,force:D,replace:L}),V||Y);const ne=Y;ne.redirectedFrom=V;let X;return!D&&isSameRouteLocation(n,re,Y)&&(X=createRouterError(ErrorTypes.NAVIGATION_DUPLICATED,{to:ne,from:re}),he(re,re,!0,!1)),(X?Promise.resolve(X):O(ne,re)).catch(G=>isNavigationFailure(G)?isNavigationFailure(G,ErrorTypes.NAVIGATION_GUARD_REDIRECT)?G:ie(G):ue(G,ne,re)).then(G=>{if(G){if(isNavigationFailure(G,ErrorTypes.NAVIGATION_GUARD_REDIRECT))return v(assign({replace:L},k(G.to),{state:typeof G.to=="object"?assign({},ge,G.to.state):ge,force:D}),V||ne)}else G=P(ne,re,!0,L,ge);return f(ne,re,G),G})}function S(M,V){const Y=H(M,V);return Y?Promise.reject(Y):Promise.resolve()}function m(M){const V=A.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(M):M()}function O(M,V){let Y;const[re,ge,D]=extractChangingRecords(M,V);Y=extractComponentsGuards(re.reverse(),"beforeRouteLeave",M,V);for(const q of re)q.leaveGuards.forEach(ne=>{Y.push(guardToPromiseFn(ne,M,V))});const L=S.bind(null,M,V);return Y.push(L),z(Y).then(()=>{Y=[];for(const q of o.list())Y.push(guardToPromiseFn(q,M,V));return Y.push(L),z(Y)}).then(()=>{Y=extractComponentsGuards(ge,"beforeRouteUpdate",M,V);for(const q of ge)q.updateGuards.forEach(ne=>{Y.push(guardToPromiseFn(ne,M,V))});return Y.push(L),z(Y)}).then(()=>{Y=[];for(const q of D)if(q.beforeEnter)if(isArray(q.beforeEnter))for(const ne of q.beforeEnter)Y.push(guardToPromiseFn(ne,M,V));else Y.push(guardToPromiseFn(q.beforeEnter,M,V));return Y.push(L),z(Y)}).then(()=>(M.matched.forEach(q=>q.enterCallbacks={}),Y=extractComponentsGuards(D,"beforeRouteEnter",M,V,m),Y.push(L),z(Y))).then(()=>{Y=[];for(const q of r.list())Y.push(guardToPromiseFn(q,M,V));return Y.push(L),z(Y)}).catch(q=>isNavigationFailure(q,ErrorTypes.NAVIGATION_CANCELLED)?q:Promise.reject(q))}function f(M,V,Y){u.list().forEach(re=>m(()=>re(M,V,Y)))}function P(M,V,Y,re,ge){const D=H(M,V);if(D)return D;const L=V===START_LOCATION_NORMALIZED,q=isBrowser?history.state:{};Y&&(re||L?i.replace(M.fullPath,assign({scroll:L&&q&&q.scroll},ge)):i.push(M.fullPath,ge)),c.value=M,he(M,V,Y,L),ie()}let U;function ce(){U||(U=i.listen((M,V,Y)=>{if(!N.listening)return;const re=T(M),ge=E(re,N.currentRoute.value);if(ge){v(assign(ge,{replace:!0,force:!0}),re).catch(noop);return}d=re;const D=c.value;isBrowser&&saveScrollPosition(getScrollKey(D.fullPath,Y.delta),computeScrollPosition()),O(re,D).catch(L=>isNavigationFailure(L,ErrorTypes.NAVIGATION_ABORTED|ErrorTypes.NAVIGATION_CANCELLED)?L:isNavigationFailure(L,ErrorTypes.NAVIGATION_GUARD_REDIRECT)?(v(assign(k(L.to),{force:!0}),re).then(q=>{isNavigationFailure(q,ErrorTypes.NAVIGATION_ABORTED|ErrorTypes.NAVIGATION_DUPLICATED)&&!Y.delta&&Y.type===NavigationType.pop&&i.go(-1,!1)}).catch(noop),Promise.reject()):(Y.delta&&i.go(-Y.delta,!1),ue(L,re,D))).then(L=>{L=L||P(re,D,!1),L&&(Y.delta&&!isNavigationFailure(L,ErrorTypes.NAVIGATION_CANCELLED)?i.go(-Y.delta,!1):Y.type===NavigationType.pop&&isNavigationFailure(L,ErrorTypes.NAVIGATION_ABORTED|ErrorTypes.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),f(re,D,L)}).catch(noop)}))}let se=useCallbacks(),ae=useCallbacks(),ee;function ue(M,V,Y){ie(M);const re=ae.list();return re.length?re.forEach(ge=>ge(M,V,Y)):console.error(M),Promise.reject(M)}function W(){return ee&&c.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((M,V)=>{se.add([M,V])})}function ie(M){return ee||(ee=!M,ce(),se.list().forEach(([V,Y])=>M?Y(M):V()),se.reset()),M}function he(M,V,Y,re){const{scrollBehavior:ge}=e;if(!isBrowser||!ge)return Promise.resolve();const D=!Y&&getSavedScrollPosition(getScrollKey(M.fullPath,0))||(re||!Y)&&history.state&&history.state.scroll||null;return nextTick().then(()=>ge(M,V,D)).then(L=>L&&scrollToPosition(L)).catch(L=>ue(L,M,V))}const j=M=>i.go(M);let b;const A=new Set,N={currentRoute:c,listening:!0,addRoute:y,removeRoute:w,clearRoutes:t.clearRoutes,hasRoute:x,getRoutes:F,resolve:T,options:e,push:I,replace:_,go:j,back:()=>j(-1),forward:()=>j(1),beforeEach:o.add,beforeResolve:r.add,afterEach:u.add,onError:ae.add,isReady:W,install(M){M.component("RouterLink",RouterLink),M.component("RouterView",RouterView),M.config.globalProperties.$router=N,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(c)}),isBrowser&&!b&&c.value===START_LOCATION_NORMALIZED&&(b=!0,I(i.location).catch(re=>{}));const V={};for(const re in START_LOCATION_NORMALIZED)Object.defineProperty(V,re,{get:()=>c.value[re],enumerable:!0});M.provide(routerKey,N),M.provide(routeLocationKey,shallowReactive(V)),M.provide(routerViewLocationKey,c);const Y=M.unmount;A.add(M),M.unmount=function(){A.delete(M),A.size<1&&(d=START_LOCATION_NORMALIZED,U&&U(),U=null,c.value=START_LOCATION_NORMALIZED,b=!1,ee=!1),Y()}}};function z(M){return M.reduce((V,Y)=>V.then(()=>m(Y)),Promise.resolve())}return N}function useRouter(){return inject(routerKey)}const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(t,s,n){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),u=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(s.map(c=>{if(c=assetsURL(c),c in seen)return;seen[c]=!0;const d=c.endsWith(".css"),a=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${a}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":scriptRel,d||(g.as="script"),g.crossOrigin="",g.href=c,u&&g.setAttribute("nonce",u),document.head.appendChild(g),d)return new Promise((C,y)=>{g.addEventListener("load",C),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(r){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=r,window.dispatchEvent(u),!u.defaultPrevented)throw r}return i.then(r=>{for(const u of r||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}const blobConfig={storeId:"store_fmATeK5mFkUM5GBd",region:"hkg1",baseUrl:"https://fmatek5mfkum5gbd.public.blob.vercel-storage.com",token:"vercel_blob_rw_fmATeK5mFkUM5GBd_R1FA5xYcMGA6v7nYb64wRsoaQQu1cS",uploadOptions:{access:"public",addRandomSuffix:!0,cacheControlMaxAge:31536e3}},generateUniqueFilename=e=>{const t=Date.now(),s=Math.random().toString(36).substring(2,15),n=e.name.split(".").pop(),i=e.name.split(".").slice(0,-1).join(".");return`${t}-${s}-${i}.${n}`},validateConfig=()=>!0,getBlobInfo=()=>({storeId:blobConfig.storeId,region:blobConfig.region,baseUrl:blobConfig.baseUrl,status:"服务端直传 (已配置)",mode:"服务端直传 (最安全)"}),_sfc_main$4={name:"FileUploader",emits:["upload-success"],setup(e,{emit:t}){const s=ref(null),n=ref(null),i=ref(!1),o=ref(0),r=ref(""),u=ref(!1),c=ref(""),d=ref(!1),a=ref({storeId:"",region:"",status:"未配置"});onMounted(()=>{try{validateConfig(),a.value=getBlobInfo()}catch(_){r.value=`配置错误: ${_.message}`,a.value=getBlobInfo()}});const g=()=>{s.value.click()},C=_=>{const E=_.target.files[0];E&&(n.value=E,x())},y=()=>{d.value=!0},w=()=>{d.value=!1},F=_=>{d.value=!1;const E=_.dataTransfer.files[0];E&&(n.value=E,x())},x=()=>{r.value="",u.value=!1,o.value=0,c.value=""},T=_=>{if(_===0)return"0 Bytes";const E=1024,v=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(_)/Math.log(E));return parseFloat((_/Math.pow(E,S)).toFixed(2))+" "+v[S]},k=async()=>{if(n.value){i.value=!0,r.value="",u.value=!1,o.value=0;try{const _=generateUniqueFilename(n.value);console.log("=== FRONTEND UPLOAD START ==="),console.log("Selected file:",n.value.name),console.log("File size:",n.value.size),console.log("File type:",n.value.type),console.log("Generated filename:",_),o.value=10;const E=4.5*1024*1024,v=100*1024*1024;if(n.value.size>v){r.value=`文件太大！最大支持 ${T(v)}，当前文件 ${T(n.value.size)}`;return}let S;n.value.size<=E?(console.log("Using API upload for small file"),S=await H(_)):(console.log("Using direct upload for large file"),S=await I(_)),c.value=S.url,u.value=!0,t("upload-success"),setTimeout(()=>{n.value=null,s.value&&(s.value.value="")},2e3)}catch(_){console.error("上传错误:",_),r.value=`上传失败: ${_.message||"未知错误"}`}finally{i.value=!1}}},H=async _=>{o.value=30;const E=new FileReader,v=new Promise((O,f)=>{E.onload=()=>O(E.result),E.onerror=f});E.readAsDataURL(n.value);const S=await v;console.log("File converted to base64, length:",S.length),o.value=60;const m=await fetch("/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:S,filename:_,originalName:n.value.name,mimeType:n.value.type})});if(!m.ok){const O=await m.json();throw new Error(O.details||`API上传失败: ${m.statusText}`)}return o.value=100,await m.json()},I=async _=>{o.value=30,console.log("Direct uploading to Vercel Blob...");const E=setInterval(()=>{o.value<90&&(o.value+=Math.random()*15)},500);try{const{put:v}=await __vitePreload(async()=>{const{put:m}=await import("./index-DyOgcIuF.js");return{put:m}},[]),S=await v(_,n.value,{access:"public",token:blobConfig.token,contentType:n.value.type||"application/octet-stream"});return clearInterval(E),o.value=100,console.log("Direct upload successful:",S.url),{url:S.url}}catch(v){throw clearInterval(E),console.error("Direct upload failed:",v),new Error(`直接上传失败: ${v.message}`)}};return{fileInput:s,selectedFile:n,uploading:i,uploadProgress:o,error:r,success:u,fileUrl:c,isDragOver:d,blobInfo:a,triggerFileInput:g,handleFileSelect:C,handleDragOver:y,handleDragLeave:w,handleDrop:F,uploadFile:k,uploadViaAPI:H,uploadDirectly:I,formatFileSize:T}}},_hoisted_1$4={class:"upload-card"},_hoisted_2$4={class:"upload-zone-content"},_hoisted_3$4={key:0,class:"icon-idle"},_hoisted_4$4={key:1,class:"icon-uploading"},_hoisted_5$4={key:2,class:"icon-ready"},_hoisted_6$3={class:"upload-text"},_hoisted_7$2={key:0},_hoisted_8$2={key:1},_hoisted_9$2={key:2},_hoisted_10$2={key:3,class:"upload-hint"},_hoisted_11$2={key:4,class:"upload-hint"},_hoisted_12$2={key:5,class:"upload-hint"},_hoisted_13$2={key:0,class:"file-card"},_hoisted_14$2={class:"file-header"},_hoisted_15$2={class:"file-details"},_hoisted_16$2={class:"file-meta"},_hoisted_17$2={class:"meta-item"},_hoisted_18$2={class:"meta-item"},_hoisted_19$2=["disabled"],_hoisted_20$2={key:2,class:"progress-section"},_hoisted_21$2={class:"progress-header"},_hoisted_22$2={class:"progress-percentage"},_hoisted_23$2={class:"progress-bar"},_hoisted_24$2={key:3,class:"message error-message"},_hoisted_25$2={class:"message-text"},_hoisted_26$2={key:4,class:"message success-message"},_hoisted_27$2={class:"message-text"},_hoisted_28$2=["href"];function _sfc_render$4(e,t,s,n,i,o){return openBlock(),createElementBlock("div",_hoisted_1$4,[t[15]||(t[15]=createBaseVNode("div",{class:"card-header"},[createBaseVNode("div",{class:"header-icon"},"📤"),createBaseVNode("div",{class:"header-text"},[createBaseVNode("h2",null,"文件上传"),createBaseVNode("p",null,"安全快速的上传体验")])],-1)),createBaseVNode("div",{class:normalizeClass(["upload-zone",{dragover:n.isDragOver,"has-file":n.selectedFile,uploading:n.uploading}]),onClick:t[1]||(t[1]=(...r)=>n.triggerFileInput&&n.triggerFileInput(...r)),onDragover:t[2]||(t[2]=withModifiers((...r)=>n.handleDragOver&&n.handleDragOver(...r),["prevent"])),onDragleave:t[3]||(t[3]=withModifiers((...r)=>n.handleDragLeave&&n.handleDragLeave(...r),["prevent"])),onDrop:t[4]||(t[4]=withModifiers((...r)=>n.handleDrop&&n.handleDrop(...r),["prevent"]))},[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("div",{class:normalizeClass(["upload-icon",{"icon-animate":n.uploading}])},[n.selectedFile?n.uploading?(openBlock(),createElementBlock("div",_hoisted_4$4,"⏳")):(openBlock(),createElementBlock("div",_hoisted_5$4,"✅")):(openBlock(),createElementBlock("div",_hoisted_3$4,"📁"))],2),createBaseVNode("div",_hoisted_6$3,[n.selectedFile?n.uploading?(openBlock(),createElementBlock("h3",_hoisted_8$2," 正在上传... ")):(openBlock(),createElementBlock("h3",_hoisted_9$2," 准备就绪 ")):(openBlock(),createElementBlock("h3",_hoisted_7$2," 拖拽文件到这里 ")),n.selectedFile?n.uploading?(openBlock(),createElementBlock("p",_hoisted_11$2," 请稍候，文件正在处理中 ")):(openBlock(),createElementBlock("p",_hoisted_12$2,toDisplayString(n.selectedFile.name),1)):(openBlock(),createElementBlock("p",_hoisted_10$2,[...t[6]||(t[6]=[createTextVNode(" 或者 ",-1),createBaseVNode("span",{class:"link-text"},"点击选择文件",-1),createBaseVNode("br",null,null,-1),createBaseVNode("small",{style:{color:"#94a3b8"}},"支持最大 100MB 文件上传",-1)])]))]),createBaseVNode("input",{ref:"fileInput",type:"file",class:"upload-input",onChange:t[0]||(t[0]=(...r)=>n.handleFileSelect&&n.handleFileSelect(...r))},null,544)])],34),n.selectedFile?(openBlock(),createElementBlock("div",_hoisted_13$2,[createBaseVNode("div",_hoisted_14$2,[t[7]||(t[7]=createBaseVNode("div",{class:"file-icon"},"📄",-1)),createBaseVNode("div",_hoisted_15$2,[createBaseVNode("h4",null,toDisplayString(n.selectedFile.name),1),createBaseVNode("div",_hoisted_16$2,[createBaseVNode("span",_hoisted_17$2,toDisplayString(n.formatFileSize(n.selectedFile.size)),1),createBaseVNode("span",_hoisted_18$2,toDisplayString(n.selectedFile.type||"未知类型"),1)])])])])):createCommentVNode("",!0),n.selectedFile&&!n.uploading?(openBlock(),createElementBlock("button",{key:1,onClick:t[5]||(t[5]=(...r)=>n.uploadFile&&n.uploadFile(...r)),disabled:!n.selectedFile,class:"upload-btn"},[...t[8]||(t[8]=[createBaseVNode("span",{class:"btn-icon"},"🚀",-1),createTextVNode(" 开始上传 ",-1)])],8,_hoisted_19$2)):createCommentVNode("",!0),n.uploading?(openBlock(),createElementBlock("div",_hoisted_20$2,[createBaseVNode("div",_hoisted_21$2,[t[9]||(t[9]=createBaseVNode("span",null,"上传进度",-1)),createBaseVNode("span",_hoisted_22$2,toDisplayString(n.uploadProgress)+"%",1)]),createBaseVNode("div",_hoisted_23$2,[createBaseVNode("div",{class:"progress-fill",style:normalizeStyle({width:n.uploadProgress+"%"})},null,4)])])):createCommentVNode("",!0),n.error?(openBlock(),createElementBlock("div",_hoisted_24$2,[t[11]||(t[11]=createBaseVNode("div",{class:"message-icon"},"❌",-1)),createBaseVNode("div",_hoisted_25$2,[t[10]||(t[10]=createBaseVNode("strong",null,"上传失败",-1)),createBaseVNode("p",null,toDisplayString(n.error),1)])])):createCommentVNode("",!0),n.success?(openBlock(),createElementBlock("div",_hoisted_26$2,[t[14]||(t[14]=createBaseVNode("div",{class:"message-icon"},"✅",-1)),createBaseVNode("div",_hoisted_27$2,[t[12]||(t[12]=createBaseVNode("strong",null,"上传成功！",-1)),t[13]||(t[13]=createBaseVNode("p",null,"文件已成功保存到云端存储",-1)),createBaseVNode("a",{href:n.fileUrl,target:"_blank",class:"file-link"}," 查看文件 → ",8,_hoisted_28$2)])])):createCommentVNode("",!0)])}const FileUploader=_export_sfc(_sfc_main$4,[["render",_sfc_render$4],["__scopeId","data-v-5ed9b12c"]]),_sfc_main$3={name:"FileList",setup(){const e=useRouter(),t=ref([]),s=ref([]),n=ref(!1),i=ref(!1),o=ref(""),r=ref(0),u=ref(1),c=ref(2),d=async()=>{n.value=!0,o.value="";try{console.log("Fetching file list...");const m=await fetch("/api/list-files");if(!m.ok)throw new Error(`获取文件列表失败: ${m.statusText}`);const O=await m.json();s.value=O.files||[],r.value=O.total||0,u.value=1,x(),w(),console.log(`Fetched ${r.value} files`)}catch(m){console.error("Failed to fetch file list:",m),o.value=m.message}finally{n.value=!1}},a=()=>{d()},g=async m=>{try{await navigator.clipboard.writeText(m),window.$toast.success("复制成功","链接已复制到剪贴板！")}catch(O){console.error("Failed to copy URL:",O);const f=document.createElement("textarea");f.value=m,document.body.appendChild(f),f.select(),document.execCommand("copy"),document.body.removeChild(f),window.$toast.success("复制成功","链接已复制到剪贴板！")}},C=m=>{const O={url:m.url,name:m.originalName,pathname:m.pathname},P=`/editor?file=${encodeURIComponent(JSON.stringify(O))}`;e.push(P)},y=async m=>{const O=s.value.find(U=>U.pathname===m),f=O?O.originalName:"这个文件";if(await window.$confirm({title:"删除文件",message:`确定要删除文件 "${f}" 吗？`,details:"此操作不可撤销，文件将被永久删除。",confirmText:"删除",cancelText:"取消",type:"danger"})){i.value=!0;try{console.log("Deleting file:",m);const U=await fetch("/api/delete-file",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({pathname:m})});if(!U.ok){const ce=await U.json();throw new Error(ce.details||`删除失败: ${U.statusText}`)}await d(),window.$toast.success("删除成功","文件已成功删除！")}catch(U){console.error("Failed to delete file:",U),window.$toast.error("删除失败",`删除失败: ${U.message}`)}finally{i.value=!1}}},w=()=>{const m=(u.value-1)*c.value,O=m+c.value;t.value=s.value.slice(m,O)},F=ref(1),x=()=>{F.value=Math.ceil(s.value.length/c.value)},T=m=>{m>=1&&m<=F.value&&(u.value=m,w())},k=()=>{T(u.value-1)},H=()=>{T(u.value+1)},I=()=>{if(s.value.length===0)return"0 B";let m=0;return s.value.forEach(f=>{if(f.size)m+=f.size;else if(f.formattedSize){const P=f.formattedSize.toLowerCase();P.includes("gb")?m+=parseFloat(P)*1024*1024*1024:P.includes("mb")?m+=parseFloat(P)*1024*1024:P.includes("kb")?m+=parseFloat(P)*1024:P.includes("b")&&(m+=parseFloat(P))}}),(f=>{if(f===0)return"0 B";const P=1024,U=["B","KB","MB","GB","TB"],ce=Math.floor(Math.log(f)/Math.log(P));return parseFloat((f/Math.pow(P,ce)).toFixed(2))+" "+U[ce]})(m)},_=m=>{if(!m)return{icon:"📄",label:"未知",class:"type-default"};switch(m.toLowerCase().split(".").pop()){case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":case"svg":case"ico":case"tiff":case"psd":return{icon:"🖼️",label:"图片",class:"type-image"};case"mp4":case"avi":case"mov":case"wmv":case"flv":case"webm":case"mkv":case"3gp":case"mpg":case"mpeg":case"m4v":return{icon:"🎬",label:"视频",class:"type-video"};case"mp3":case"wav":case"flac":case"aac":case"ogg":case"wma":case"m4a":case"opus":case"amr":return{icon:"🎵",label:"音频",class:"type-audio"};case"pdf":return{icon:"📕",label:"PDF",class:"type-pdf"};case"doc":case"docx":case"rtf":case"odt":return{icon:"📘",label:"文档",class:"type-document"};case"xls":case"xlsx":case"csv":case"ods":return{icon:"📗",label:"表格",class:"type-spreadsheet"};case"ppt":case"pptx":case"odp":return{icon:"📙",label:"演示",class:"type-presentation"};case"txt":case"md":case"log":case"ini":case"conf":case"json":case"xml":case"yaml":case"yml":return{icon:"📝",label:"文本",class:"type-text"};case"zip":case"rar":case"7z":case"tar":case"gz":case"bz2":case"xz":case"lzma":case"cab":case"iso":return{icon:"📦",label:"压缩包",class:"type-archive"};case"js":case"jsx":case"ts":case"tsx":case"vue":case"html":case"htm":case"css":case"scss":case"less":case"php":case"py":case"java":case"cpp":case"c":case"h":case"cs":case"go":case"rs":case"swift":case"kt":case"rb":case"sql":return{icon:"💻",label:"代码",class:"type-code"};case"exe":case"msi":case"dmg":case"pkg":case"deb":case"rpm":case"apk":case"ipa":return{icon:"⚙️",label:"程序",class:"type-executable"};case"ttf":case"otf":case"woff":case"woff2":case"eot":return{icon:"🔤",label:"字体",class:"type-font"};case"psd":case"ai":case"sketch":case"fig":case"xd":return{icon:"🎨",label:"设计",class:"type-design"};case"db":case"sqlite":case"mdb":return{icon:"🗄️",label:"数据库",class:"type-database"};default:return{icon:"📄",label:"其他",class:"type-default"}}},E=(m,O)=>_(O).icon,v=(m,O)=>_(O).label,S=(m,O)=>_(O).class;return onMounted(()=>{d()}),{files:t,allFiles:s,loading:n,deleting:i,error:o,totalFiles:r,currentPage:u,pageSize:c,totalPages:F,refreshFileList:a,copyUrl:g,editPDF:C,deleteFile:y,getTotalSize:I,getFileTypeIcon:E,getFileTypeLabel:v,getFileTypeClass:S,goToPage:T,prevPage:k,nextPage:H}}},_hoisted_1$3={class:"file-list-card"},_hoisted_2$3={class:"card-header"},_hoisted_3$3=["disabled"],_hoisted_4$3={class:"refresh-text"},_hoisted_5$3={key:0,class:"stats-panel"},_hoisted_6$2={class:"stat-item"},_hoisted_7$1={class:"stat-content"},_hoisted_8$1={class:"stat-number"},_hoisted_9$1={class:"stat-item"},_hoisted_10$1={class:"stat-content"},_hoisted_11$1={class:"stat-number"},_hoisted_12$1={key:1,class:"loading-state"},_hoisted_13$1={key:2,class:"error-state"},_hoisted_14$1={key:3,class:"empty-state"},_hoisted_15$1={key:4,class:"file-list"},_hoisted_16$1={class:"file-items"},_hoisted_17$1={class:"file-preview"},_hoisted_18$1={class:"file-type-icon"},_hoisted_19$1={class:"file-content"},_hoisted_20$1={class:"file-header"},_hoisted_21$1=["title"],_hoisted_22$1={class:"file-meta"},_hoisted_23$1={class:"meta-item"},_hoisted_24$1={class:"meta-item"},_hoisted_25$1={class:"file-actions"},_hoisted_26$1={class:"action-buttons-left"},_hoisted_27$1=["href"],_hoisted_28$1=["onClick"],_hoisted_29=["onClick"],_hoisted_30=["onClick","disabled"],_hoisted_31={key:0,class:"pagination-container"},_hoisted_32={class:"pagination"},_hoisted_33=["disabled"],_hoisted_34={class:"page-numbers"},_hoisted_35=["onClick"],_hoisted_36=["disabled"],_hoisted_37={class:"pagination-info"};function _sfc_render$3(e,t,s,n,i,o){return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[t[4]||(t[4]=createBaseVNode("div",{class:"header-content"},[createBaseVNode("div",{class:"header-icon"},"📁"),createBaseVNode("div",{class:"header-text"},[createBaseVNode("h2",null,"文件管理"),createBaseVNode("p",null,"查看和管理您的文件")])],-1)),createBaseVNode("button",{onClick:t[0]||(t[0]=(...r)=>n.refreshFileList&&n.refreshFileList(...r)),disabled:n.loading,class:normalizeClass(["refresh-btn compact",{refreshing:n.loading}])},[createBaseVNode("span",{class:normalizeClass(["refresh-icon",{spin:n.loading}])},"🔄",2),createBaseVNode("span",_hoisted_4$3,toDisplayString(n.loading?"刷新中":"刷新"),1)],10,_hoisted_3$3)]),!n.loading&&!n.error&&n.files.length>0?(openBlock(),createElementBlock("div",_hoisted_5$3,[createBaseVNode("div",_hoisted_6$2,[t[6]||(t[6]=createBaseVNode("div",{class:"stat-icon"},"📊",-1)),createBaseVNode("div",_hoisted_7$1,[createBaseVNode("div",_hoisted_8$1,toDisplayString(n.totalFiles),1),t[5]||(t[5]=createBaseVNode("div",{class:"stat-label"},"总文件数",-1))])]),createBaseVNode("div",_hoisted_9$1,[t[8]||(t[8]=createBaseVNode("div",{class:"stat-icon"},"💾",-1)),createBaseVNode("div",_hoisted_10$1,[createBaseVNode("div",_hoisted_11$1,toDisplayString(n.getTotalSize()),1),t[7]||(t[7]=createBaseVNode("div",{class:"stat-label"},"总大小",-1))])])])):createCommentVNode("",!0),n.loading&&n.files.length===0?(openBlock(),createElementBlock("div",_hoisted_12$1,[...t[9]||(t[9]=[createBaseVNode("div",{class:"loading-icon"},"⏳",-1),createBaseVNode("p",null,"正在加载文件列表...",-1)])])):n.error?(openBlock(),createElementBlock("div",_hoisted_13$1,[t[10]||(t[10]=createBaseVNode("div",{class:"error-icon"},"❌",-1)),t[11]||(t[11]=createBaseVNode("h4",null,"加载失败",-1)),createBaseVNode("p",null,toDisplayString(n.error),1),createBaseVNode("button",{onClick:t[1]||(t[1]=(...r)=>n.refreshFileList&&n.refreshFileList(...r)),class:"retry-btn"},"🔄 重试")])):n.files.length===0?(openBlock(),createElementBlock("div",_hoisted_14$1,[...t[12]||(t[12]=[createBaseVNode("div",{class:"empty-icon"},"📭",-1),createBaseVNode("h4",null,"还没有文件",-1),createBaseVNode("p",null,"上传您的第一个文件开始使用吧！",-1)])])):(openBlock(),createElementBlock("div",_hoisted_15$1,[createBaseVNode("div",_hoisted_16$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.files,(r,u)=>(openBlock(),createElementBlock("div",{key:r.pathname,class:"file-item",style:normalizeStyle({"animation-delay":u*.1+"s"})},[createBaseVNode("div",_hoisted_17$1,[createBaseVNode("div",_hoisted_18$1,toDisplayString(n.getFileTypeIcon(r.contentType,r.pathname)),1)]),createBaseVNode("div",_hoisted_19$1,[createBaseVNode("div",_hoisted_20$1,[createBaseVNode("h4",{class:"file-name",title:r.originalName},toDisplayString(r.originalName),9,_hoisted_21$1),createBaseVNode("div",{class:normalizeClass(["file-badge",n.getFileTypeClass(r.contentType,r.pathname)])},toDisplayString(n.getFileTypeLabel(r.contentType,r.pathname)),3)]),createBaseVNode("div",_hoisted_22$1,[createBaseVNode("span",_hoisted_23$1,[t[13]||(t[13]=createBaseVNode("span",{class:"meta-icon"},"📏",-1)),createTextVNode(" "+toDisplayString(r.formattedSize),1)]),createBaseVNode("span",_hoisted_24$1,[t[14]||(t[14]=createBaseVNode("span",{class:"meta-icon"},"📅",-1)),createTextVNode(" "+toDisplayString(r.formattedDate),1)]),createBaseVNode("div",_hoisted_25$1,[createBaseVNode("div",_hoisted_26$1,[createBaseVNode("a",{href:r.url,target:"_blank",class:"action-btn view-btn",title:"查看文件"},[...t[15]||(t[15]=[createBaseVNode("span",{class:"btn-icon"},"👁️",-1),createBaseVNode("span",{class:"btn-text"},"查看",-1)])],8,_hoisted_27$1),n.getFileTypeLabel(r.contentType,r.pathname)==="PDF"?(openBlock(),createElementBlock("button",{key:0,onClick:c=>n.editPDF(r),class:"action-btn edit-btn",title:"编辑PDF"},[...t[16]||(t[16]=[createBaseVNode("span",{class:"btn-icon"},"📝",-1),createBaseVNode("span",{class:"btn-text"},"编辑",-1)])],8,_hoisted_28$1)):createCommentVNode("",!0),createBaseVNode("button",{onClick:c=>n.copyUrl(r.url),class:"action-btn copy-btn",title:"复制链接"},[...t[17]||(t[17]=[createBaseVNode("span",{class:"btn-icon"},"📋",-1),createBaseVNode("span",{class:"btn-text"},"复制",-1)])],8,_hoisted_29),createBaseVNode("button",{onClick:c=>n.deleteFile(r.pathname),disabled:n.deleting,class:"action-btn delete-btn",title:"删除文件"},[...t[18]||(t[18]=[createBaseVNode("span",{class:"btn-icon"},"🗑️",-1),createBaseVNode("span",{class:"btn-text"},"删除",-1)])],8,_hoisted_30)])])])])],4))),128))]),n.totalPages>1?(openBlock(),createElementBlock("div",_hoisted_31,[createBaseVNode("div",_hoisted_32,[createBaseVNode("button",{onClick:t[2]||(t[2]=(...r)=>n.prevPage&&n.prevPage(...r)),disabled:n.currentPage===1,class:"pagination-btn prev-btn"},[...t[19]||(t[19]=[createBaseVNode("span",{class:"btn-icon"},"⬅️",-1),createBaseVNode("span",{class:"btn-text"},"上一页",-1)])],8,_hoisted_33),createBaseVNode("div",_hoisted_34,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.totalPages,r=>(openBlock(),createElementBlock("button",{key:r,onClick:u=>n.goToPage(r),class:normalizeClass(["page-number",{active:n.currentPage===r}])},toDisplayString(r),11,_hoisted_35))),128))]),createBaseVNode("button",{onClick:t[3]||(t[3]=(...r)=>n.nextPage&&n.nextPage(...r)),disabled:n.currentPage===n.totalPages,class:"pagination-btn next-btn"},[...t[20]||(t[20]=[createBaseVNode("span",{class:"btn-text"},"下一页",-1),createBaseVNode("span",{class:"btn-icon"},"➡️",-1)])],8,_hoisted_36)]),createBaseVNode("div",_hoisted_37," 第 "+toDisplayString(n.currentPage)+" 页，共 "+toDisplayString(n.totalPages)+" 页 ("+toDisplayString(n.allFiles.length)+" 个文件) ",1)])):createCommentVNode("",!0)]))])}const FileList=_export_sfc(_sfc_main$3,[["render",_sfc_render$3],["__scopeId","data-v-4dbe2e6e"]]),_sfc_main$2={name:"HomeView",components:{FileUploader,FileList},methods:{refreshFileList(){this.$refs.fileListRef&&this.$refs.fileListRef.refreshFileList()}}},_hoisted_1$2={class:"home-view"},_hoisted_2$2={class:"app-container"},_hoisted_3$2={class:"main-content"},_hoisted_4$2={class:"upload-section"},_hoisted_5$2={class:"file-list-section"};function _sfc_render$2(e,t,s,n,i,o){const r=resolveComponent("FileUploader"),u=resolveComponent("FileList");return openBlock(),createElementBlock("div",_hoisted_1$2,[t[0]||(t[0]=createStaticVNode('<div class="app-background" data-v-b8e474a2><div class="background-shapes" data-v-b8e474a2><div class="shape shape-1" data-v-b8e474a2></div><div class="shape shape-2" data-v-b8e474a2></div><div class="shape shape-3" data-v-b8e474a2></div></div></div><div class="app-header" data-v-b8e474a2><div class="header-content" data-v-b8e474a2><h1 class="app-title" data-v-b8e474a2><span class="icon" data-v-b8e474a2>☁️</span> 文件阅读 </h1><p class="app-subtitle" data-v-b8e474a2>安全、快速的文件上传与管理平台</p></div></div>',2)),createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[createBaseVNode("div",_hoisted_4$2,[createVNode(r,{onUploadSuccess:o.refreshFileList},null,8,["onUploadSuccess"])]),createBaseVNode("div",_hoisted_5$2,[createVNode(u,{ref:"fileListRef"},null,512)])])]),t[1]||(t[1]=createBaseVNode("div",{class:"app-footer"},[createBaseVNode("div",{class:"footer-content"},[createBaseVNode("p",null,"💖 基于 Vue 3 + Vercel Blob 构建")])],-1))])}const HomeView=_export_sfc(_sfc_main$2,[["render",_sfc_render$2],["__scopeId","data-v-b8e474a2"]]);function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,s){module.exports=t.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var Xe;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=W,t.bytesToString=ge,t.createValidAbsoluteUrl=he,t.getModificationDate=Ce,t.getUuid=De,t.getVerbosityLevel=se,t.info=ae,t.isArrayBuffer=te,t.isArrayEqual=Te,t.isNodeJS=void 0,t.normalizeUnicode=ke,t.objectFromMap=ne,t.objectSize=q,t.setVerbosityLevel=ce,t.shadow=j,t.string32=L,t.stringToBytes=D,t.stringToPDFString=de,t.stringToUTF8String=fe,t.unreachable=ue,t.utf8StringToString=_e,t.warn=ee;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=s;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;const o=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=o;const r=1.35;t.LINE_FACTOR=r;const u=.35;t.LINE_DESCENT_FACTOR=u;const c=u/r;t.BASELINE_FACTOR=c;const d={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=d;const a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=a;const g="pdfjs_internal_editor_";t.AnnotationEditorPrefix=g;const C={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=C;const y={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=y;const w={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=w;const F={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=F;const x={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=x;const T={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=T;const k={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=k;const H={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=H;const I={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=I;const _={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=_;const E={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=E;const v={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=v;const S={O:"PageOpen",C:"PageClose"};t.PageActionEventType=S;const m={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=m;const O={NONE:0,BINARY:1};t.CMapCompressionType=O;const f={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=f;const P={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=P;let U=m.WARNINGS;function ce(Ee){Number.isInteger(Ee)&&(U=Ee)}function se(){return U}function ae(Ee){U>=m.INFOS&&console.log(`Info: ${Ee}`)}function ee(Ee){U>=m.WARNINGS&&console.log(`Warning: ${Ee}`)}function ue(Ee){throw new Error(Ee)}function W(Ee,pe){Ee||ue(pe)}function ie(Ee){switch(Ee==null?void 0:Ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function he(Ee,pe=null,be=null){if(!Ee)return null;try{if(be&&typeof Ee=="string"){if(be.addDefaultProtocol&&Ee.startsWith("www.")){const Ke=Ee.match(/\./g);(Ke==null?void 0:Ke.length)>=2&&(Ee=`http://${Ee}`)}if(be.tryConvertEncoding)try{Ee=fe(Ee)}catch{}}const Me=pe?new URL(Ee,pe):new URL(Ee);if(ie(Me))return Me}catch{}return null}function j(Ee,pe,be,Me=!1){return Object.defineProperty(Ee,pe,{value:be,enumerable:!Me,configurable:!0,writable:!1}),be}const b=function(){function pe(be,Me){this.constructor===pe&&ue("Cannot initialize BaseException."),this.message=be,this.name=Me}return pe.prototype=new Error,pe.constructor=pe,pe}();t.BaseException=b;class A extends b{constructor(pe,be){super(pe,"PasswordException"),this.code=be}}t.PasswordException=A;class N extends b{constructor(pe,be){super(pe,"UnknownErrorException"),this.details=be}}t.UnknownErrorException=N;class z extends b{constructor(pe){super(pe,"InvalidPDFException")}}t.InvalidPDFException=z;class M extends b{constructor(pe){super(pe,"MissingPDFException")}}t.MissingPDFException=M;class V extends b{constructor(pe,be){super(pe,"UnexpectedResponseException"),this.status=be}}t.UnexpectedResponseException=V;class Y extends b{constructor(pe){super(pe,"FormatError")}}t.FormatError=Y;class re extends b{constructor(pe){super(pe,"AbortException")}}t.AbortException=re;function ge(Ee){(typeof Ee!="object"||(Ee==null?void 0:Ee.length)===void 0)&&ue("Invalid argument for bytesToString");const pe=Ee.length,be=8192;if(pe<be)return String.fromCharCode.apply(null,Ee);const Me=[];for(let Ke=0;Ke<pe;Ke+=be){const qe=Math.min(Ke+be,pe),Z=Ee.subarray(Ke,qe);Me.push(String.fromCharCode.apply(null,Z))}return Me.join("")}function D(Ee){typeof Ee!="string"&&ue("Invalid argument for stringToBytes");const pe=Ee.length,be=new Uint8Array(pe);for(let Me=0;Me<pe;++Me)be[Me]=Ee.charCodeAt(Me)&255;return be}function L(Ee){return String.fromCharCode(Ee>>24&255,Ee>>16&255,Ee>>8&255,Ee&255)}function q(Ee){return Object.keys(Ee).length}function ne(Ee){const pe=Object.create(null);for(const[be,Me]of Ee)pe[be]=Me;return pe}function X(){const Ee=new Uint8Array(4);return Ee[0]=1,new Uint32Array(Ee.buffer,0,1)[0]===1}function G(){try{return new Function(""),!0}catch{return!1}}class R{static get isLittleEndian(){return j(this,"isLittleEndian",X())}static get isEvalSupported(){return j(this,"isEvalSupported",G())}static get isOffscreenCanvasSupported(){return j(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?j(this,"platform",{isWin:!1,isMac:!1}):j(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var pe,be;return j(this,"isCSSRoundSupported",(be=(pe=globalThis.CSS)==null?void 0:pe.supports)==null?void 0:be.call(pe,"width: round(1.5px, 1px)"))}}t.FeatureTest=R;const B=[...Array(256).keys()].map(Ee=>Ee.toString(16).padStart(2,"0"));class J{static makeHexColor(pe,be,Me){return`#${B[pe]}${B[be]}${B[Me]}`}static scaleMinMax(pe,be){let Me;pe[0]?(pe[0]<0&&(Me=be[0],be[0]=be[1],be[1]=Me),be[0]*=pe[0],be[1]*=pe[0],pe[3]<0&&(Me=be[2],be[2]=be[3],be[3]=Me),be[2]*=pe[3],be[3]*=pe[3]):(Me=be[0],be[0]=be[2],be[2]=Me,Me=be[1],be[1]=be[3],be[3]=Me,pe[1]<0&&(Me=be[2],be[2]=be[3],be[3]=Me),be[2]*=pe[1],be[3]*=pe[1],pe[2]<0&&(Me=be[0],be[0]=be[1],be[1]=Me),be[0]*=pe[2],be[1]*=pe[2]),be[0]+=pe[4],be[1]+=pe[4],be[2]+=pe[5],be[3]+=pe[5]}static transform(pe,be){return[pe[0]*be[0]+pe[2]*be[1],pe[1]*be[0]+pe[3]*be[1],pe[0]*be[2]+pe[2]*be[3],pe[1]*be[2]+pe[3]*be[3],pe[0]*be[4]+pe[2]*be[5]+pe[4],pe[1]*be[4]+pe[3]*be[5]+pe[5]]}static applyTransform(pe,be){const Me=pe[0]*be[0]+pe[1]*be[2]+be[4],Ke=pe[0]*be[1]+pe[1]*be[3]+be[5];return[Me,Ke]}static applyInverseTransform(pe,be){const Me=be[0]*be[3]-be[1]*be[2],Ke=(pe[0]*be[3]-pe[1]*be[2]+be[2]*be[5]-be[4]*be[3])/Me,qe=(-pe[0]*be[1]+pe[1]*be[0]+be[4]*be[1]-be[5]*be[0])/Me;return[Ke,qe]}static getAxialAlignedBoundingBox(pe,be){const Me=this.applyTransform(pe,be),Ke=this.applyTransform(pe.slice(2,4),be),qe=this.applyTransform([pe[0],pe[3]],be),Z=this.applyTransform([pe[2],pe[1]],be);return[Math.min(Me[0],Ke[0],qe[0],Z[0]),Math.min(Me[1],Ke[1],qe[1],Z[1]),Math.max(Me[0],Ke[0],qe[0],Z[0]),Math.max(Me[1],Ke[1],qe[1],Z[1])]}static inverseTransform(pe){const be=pe[0]*pe[3]-pe[1]*pe[2];return[pe[3]/be,-pe[1]/be,-pe[2]/be,pe[0]/be,(pe[2]*pe[5]-pe[4]*pe[3])/be,(pe[4]*pe[1]-pe[5]*pe[0])/be]}static singularValueDecompose2dScale(pe){const be=[pe[0],pe[2],pe[1],pe[3]],Me=pe[0]*be[0]+pe[1]*be[2],Ke=pe[0]*be[1]+pe[1]*be[3],qe=pe[2]*be[0]+pe[3]*be[2],Z=pe[2]*be[1]+pe[3]*be[3],Se=(Me+Z)/2,Re=Math.sqrt((Me+Z)**2-4*(Me*Z-qe*Ke))/2,Be=Se+Re||1,Ue=Se-Re||1;return[Math.sqrt(Be),Math.sqrt(Ue)]}static normalizeRect(pe){const be=pe.slice(0);return pe[0]>pe[2]&&(be[0]=pe[2],be[2]=pe[0]),pe[1]>pe[3]&&(be[1]=pe[3],be[3]=pe[1]),be}static intersect(pe,be){const Me=Math.max(Math.min(pe[0],pe[2]),Math.min(be[0],be[2])),Ke=Math.min(Math.max(pe[0],pe[2]),Math.max(be[0],be[2]));if(Me>Ke)return null;const qe=Math.max(Math.min(pe[1],pe[3]),Math.min(be[1],be[3])),Z=Math.min(Math.max(pe[1],pe[3]),Math.max(be[1],be[3]));return qe>Z?null:[Me,qe,Ke,Z]}static bezierBoundingBox(pe,be,Me,Ke,qe,Z,Se,Re){const Be=[],Ue=[[],[]];let Ie,K,$,oe,ye,Ae,we,Pe;for(let We=0;We<2;++We){if(We===0?(K=6*pe-12*Me+6*qe,Ie=-3*pe+9*Me-9*qe+3*Se,$=3*Me-3*pe):(K=6*be-12*Ke+6*Z,Ie=-3*be+9*Ke-9*Z+3*Re,$=3*Ke-3*be),Math.abs(Ie)<1e-12){if(Math.abs(K)<1e-12)continue;oe=-$/K,0<oe&&oe<1&&Be.push(oe);continue}we=K*K-4*$*Ie,Pe=Math.sqrt(we),!(we<0)&&(ye=(-K+Pe)/(2*Ie),0<ye&&ye<1&&Be.push(ye),Ae=(-K-Pe)/(2*Ie),0<Ae&&Ae<1&&Be.push(Ae))}let Ve=Be.length,Oe;const xe=Ve;for(;Ve--;)oe=Be[Ve],Oe=1-oe,Ue[0][Ve]=Oe*Oe*Oe*pe+3*Oe*Oe*oe*Me+3*Oe*oe*oe*qe+oe*oe*oe*Se,Ue[1][Ve]=Oe*Oe*Oe*be+3*Oe*Oe*oe*Ke+3*Oe*oe*oe*Z+oe*oe*oe*Re;return Ue[0][xe]=pe,Ue[1][xe]=be,Ue[0][xe+1]=Se,Ue[1][xe+1]=Re,Ue[0].length=Ue[1].length=xe+2,[Math.min(...Ue[0]),Math.min(...Ue[1]),Math.max(...Ue[0]),Math.max(...Ue[1])]}}t.Util=J;const Q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function de(Ee){if(Ee[0]>="ï"){let be;if(Ee[0]==="þ"&&Ee[1]==="ÿ"?be="utf-16be":Ee[0]==="ÿ"&&Ee[1]==="þ"?be="utf-16le":Ee[0]==="ï"&&Ee[1]==="»"&&Ee[2]==="¿"&&(be="utf-8"),be)try{const Me=new TextDecoder(be,{fatal:!0}),Ke=D(Ee);return Me.decode(Ke)}catch(Me){ee(`stringToPDFString: "${Me}".`)}}const pe=[];for(let be=0,Me=Ee.length;be<Me;be++){const Ke=Q[Ee.charCodeAt(be)];pe.push(Ke?String.fromCharCode(Ke):Ee.charAt(be))}return pe.join("")}function fe(Ee){return decodeURIComponent(escape(Ee))}function _e(Ee){return unescape(encodeURIComponent(Ee))}function te(Ee){return typeof Ee=="object"&&(Ee==null?void 0:Ee.byteLength)!==void 0}function Te(Ee,pe){if(Ee.length!==pe.length)return!1;for(let be=0,Me=Ee.length;be<Me;be++)if(Ee[be]!==pe[be])return!1;return!0}function Ce(Ee=new Date){return[Ee.getUTCFullYear().toString(),(Ee.getUTCMonth()+1).toString().padStart(2,"0"),Ee.getUTCDate().toString().padStart(2,"0"),Ee.getUTCHours().toString().padStart(2,"0"),Ee.getUTCMinutes().toString().padStart(2,"0"),Ee.getUTCSeconds().toString().padStart(2,"0")].join("")}class Fe{constructor(){me(this,Xe,!1);this.promise=new Promise((pe,be)=>{this.resolve=Me=>{ve(this,Xe,!0),pe(Me)},this.reject=Me=>{ve(this,Xe,!0),be(Me)}})}get settled(){return l(this,Xe)}}Xe=new WeakMap,t.PromiseCapability=Fe;let Ne=null,je=null;function ke(Ee){return Ne||(Ne=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,je=new Map([["ﬅ","ſt"]])),Ee.replaceAll(Ne,(pe,be,Me)=>be?be.normalize("NFKC"):je.get(Me))}function De(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Ee=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Ee);else for(let pe=0;pe<32;pe++)Ee[pe]=Math.floor(Math.random()*255);return ge(Ee)}const ze="pdfjs_internal_id_";t.AnnotationPrefix=ze},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,s,n,i,lt,At,u,c,d,a,g,C,y,w,F,St,T,k,Nt,I,_;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(v){if(typeof v=="string"||v instanceof URL?v={url:v}:(0,_util.isArrayBuffer)(v)&&(v={data:v}),typeof v!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!v.url&&!v.data&&!v.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const S=new PDFDocumentLoadingTask,{docId:m}=S,O=v.url?getUrlProp(v.url):null,f=v.data?getDataProp(v.data):null,P=v.httpHeaders||null,U=v.withCredentials===!0,ce=v.password??null,se=v.range instanceof PDFDataRangeTransport?v.range:null,ae=Number.isInteger(v.rangeChunkSize)&&v.rangeChunkSize>0?v.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let ee=v.worker instanceof PDFWorker?v.worker:null;const ue=v.verbosity,W=typeof v.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(v.docBaseUrl)?v.docBaseUrl:null,ie=typeof v.cMapUrl=="string"?v.cMapUrl:null,he=v.cMapPacked!==!1,j=v.CMapReaderFactory||DefaultCMapReaderFactory,b=typeof v.standardFontDataUrl=="string"?v.standardFontDataUrl:null,A=v.StandardFontDataFactory||DefaultStandardFontDataFactory,N=v.stopAtErrors!==!0,z=Number.isInteger(v.maxImageSize)&&v.maxImageSize>-1?v.maxImageSize:-1,M=v.isEvalSupported!==!1,V=typeof v.isOffscreenCanvasSupported=="boolean"?v.isOffscreenCanvasSupported:!_util.isNodeJS,Y=Number.isInteger(v.canvasMaxAreaInBytes)?v.canvasMaxAreaInBytes:-1,re=typeof v.disableFontFace=="boolean"?v.disableFontFace:_util.isNodeJS,ge=v.fontExtraProperties===!0,D=v.enableXfa===!0,L=v.ownerDocument||globalThis.document,q=v.disableRange===!0,ne=v.disableStream===!0,X=v.disableAutoFetch===!0,G=v.pdfBug===!0,R=se?se.length:v.length??NaN,B=typeof v.useSystemFonts=="boolean"?v.useSystemFonts:!_util.isNodeJS&&!re,J=typeof v.useWorkerFetch=="boolean"?v.useWorkerFetch:j===_display_utils.DOMCMapReaderFactory&&A===_display_utils.DOMStandardFontDataFactory&&ie&&b&&(0,_display_utils.isValidFetchUrl)(ie,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(b,document.baseURI),Q=v.canvasFactory||new DefaultCanvasFactory({ownerDocument:L}),de=v.filterFactory||new DefaultFilterFactory({docId:m,ownerDocument:L}),fe=null;(0,_util.setVerbosityLevel)(ue);const _e={canvasFactory:Q,filterFactory:de};if(J||(_e.cMapReaderFactory=new j({baseUrl:ie,isCompressed:he}),_e.standardFontDataFactory=new A({baseUrl:b})),!ee){const Ce={verbosity:ue,port:_worker_options.GlobalWorkerOptions.workerPort};ee=Ce.port?PDFWorker.fromPort(Ce):new PDFWorker(Ce),S._worker=ee}const te={docId:m,apiVersion:"3.11.174",data:f,password:ce,disableAutoFetch:X,rangeChunkSize:ae,length:R,docBaseUrl:W,enableXfa:D,evaluatorOptions:{maxImageSize:z,disableFontFace:re,ignoreErrors:N,isEvalSupported:M,isOffscreenCanvasSupported:V,canvasMaxAreaInBytes:Y,fontExtraProperties:ge,useSystemFonts:B,cMapUrl:J?ie:null,standardFontDataUrl:J?b:null}},Te={ignoreErrors:N,isEvalSupported:M,disableFontFace:re,fontExtraProperties:ge,enableXfa:D,ownerDocument:L,disableAutoFetch:X,pdfBug:G,styleElement:fe};return ee.promise.then(function(){if(S.destroyed)throw new Error("Loading aborted");const Ce=_fetchDocument(ee,te),Fe=new Promise(function(Ne){let je;se?je=new _transport_stream.PDFDataTransportStream({length:R,initialData:se.initialData,progressiveDone:se.progressiveDone,contentDispositionFilename:se.contentDispositionFilename,disableRange:q,disableStream:ne},se):f||(je=(De=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(De):(0,_display_utils.isValidFetchUrl)(De.url)?new _displayFetch_stream.PDFFetchStream(De):new _displayNetwork.PDFNetworkStream(De))({url:O,length:R,httpHeaders:P,withCredentials:U,rangeChunkSize:ae,disableRange:q,disableStream:ne})),Ne(je)});return Promise.all([Ce,Fe]).then(function([Ne,je]){if(S.destroyed)throw new Error("Loading aborted");const ke=new _message_handler.MessageHandler(m,Ne,ee.port),De=new WorkerTransport(ke,S,je,Te,_e);S._transport=De,ke.send("Ready",null)})}).catch(S._capability.reject),S}async function _fetchDocument(v,S){if(v.destroyed)throw new Error("Worker was destroyed");const m=await v.messageHandler.sendWithPromise("GetDocRequest",S,S.data?[S.data.buffer]:null);if(v.destroyed)throw new Error("Worker was destroyed");return m}function getUrlProp(v){if(v instanceof URL)return v.href;try{return new URL(v,window.location).href}catch{if(_util.isNodeJS&&typeof v=="string")return v}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(v){if(_util.isNodeJS&&typeof Buffer<"u"&&v instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength)return v;if(typeof v=="string")return(0,_util.stringToBytes)(v);if(typeof v=="object"&&!isNaN(v==null?void 0:v.length)||(0,_util.isArrayBuffer)(v))return new Uint8Array(v);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ft(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var S,m,O;this.destroyed=!0;try{(S=this._worker)!=null&&S.port&&(this._worker._pendingDestroy=!0),await((m=this._transport)==null?void 0:m.destroy())}catch(f){throw(O=this._worker)!=null&&O.port&&delete this._worker._pendingDestroy,f}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,me(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(S,m,O=!1,f=null){this.length=S,this.initialData=m,this.progressiveDone=O,this.contentDispositionFilename=f,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(S){this._rangeListeners.push(S)}addProgressListener(S){this._progressListeners.push(S)}addProgressiveReadListener(S){this._progressiveReadListeners.push(S)}addProgressiveDoneListener(S){this._progressiveDoneListeners.push(S)}onDataRange(S,m){for(const O of this._rangeListeners)O(S,m)}onDataProgress(S,m){this._readyCapability.promise.then(()=>{for(const O of this._progressListeners)O(S,m)})}onDataProgressiveRead(S){this._readyCapability.promise.then(()=>{for(const m of this._progressiveReadListeners)m(S)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const S of this._progressiveDoneListeners)S()})}transportReady(){this._readyCapability.resolve()}requestDataRange(S,m){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(S,m){this._pdfInfo=S,this._transport=m,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(O=>{if(!O)return O;const f=[];for(const P in O)f.push(...O[P]);return f}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(S){return this._transport.getPage(S)}getPageIndex(S){return this._transport.getPageIndex(S)}getDestinations(){return this._transport.getDestinations()}getDestination(S){return this._transport.getDestination(S)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(S=!1){return this._transport.startCleanup(S||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(S,m,O,f=!1){me(this,i);me(this,s,null);me(this,n,!1);this._pageIndex=S,this._pageInfo=m,this._transport=O,this._stats=f?new _display_utils.StatTimer:null,this._pdfBug=f,this.commonObjs=O.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:S,rotation:m=this.rotate,offsetX:O=0,offsetY:f=0,dontFlip:P=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:S,rotation:m,offsetX:O,offsetY:f,dontFlip:P})}getAnnotations({intent:S="display"}={}){const m=this._transport.getRenderingIntent(S);return this._transport.getAnnotations(this._pageIndex,m.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var S;return((S=this._transport._htmlForXfa)==null?void 0:S.children[this._pageIndex])||null}render({canvasContext:S,viewport:m,intent:O="display",annotationMode:f=_util.AnnotationMode.ENABLE,transform:P=null,background:U=null,optionalContentConfigPromise:ce=null,annotationCanvasMap:se=null,pageColors:ae=null,printAnnotationStorage:ee=null}){var A,N;(A=this._stats)==null||A.time("Overall");const ue=this._transport.getRenderingIntent(O,f,ee);ve(this,n,!1),le(this,i,At).call(this),ce||(ce=this._transport.getOptionalContentConfig());let W=this._intentStates.get(ue.cacheKey);W||(W=Object.create(null),this._intentStates.set(ue.cacheKey,W)),W.streamReaderCancelTimeout&&(clearTimeout(W.streamReaderCancelTimeout),W.streamReaderCancelTimeout=null);const ie=!!(ue.renderingIntent&_util.RenderingIntentFlag.PRINT);W.displayReadyCapability||(W.displayReadyCapability=new _util.PromiseCapability,W.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(ue));const he=z=>{var M,V;W.renderTasks.delete(j),(this._maybeCleanupAfterRender||ie)&&ve(this,n,!0),le(this,i,lt).call(this,!ie),z?(j.capability.reject(z),this._abortOperatorList({intentState:W,reason:z instanceof Error?z:new Error(z)})):j.capability.resolve(),(M=this._stats)==null||M.timeEnd("Rendering"),(V=this._stats)==null||V.timeEnd("Overall")},j=new InternalRenderTask({callback:he,params:{canvasContext:S,viewport:m,transform:P,background:U},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:se,operatorList:W.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ie,pdfBug:this._pdfBug,pageColors:ae});(W.renderTasks||(W.renderTasks=new Set)).add(j);const b=j.task;return Promise.all([W.displayReadyCapability.promise,ce]).then(([z,M])=>{var V;if(this.destroyed){he();return}(V=this._stats)==null||V.time("Rendering"),j.initializeGraphics({transparency:z,optionalContentConfig:M}),j.operatorListChanged()}).catch(he),b}getOperatorList({intent:S="display",annotationMode:m=_util.AnnotationMode.ENABLE,printAnnotationStorage:O=null}={}){var se;function f(){U.operatorList.lastChunk&&(U.opListReadCapability.resolve(U.operatorList),U.renderTasks.delete(ce))}const P=this._transport.getRenderingIntent(S,m,O,!0);let U=this._intentStates.get(P.cacheKey);U||(U=Object.create(null),this._intentStates.set(P.cacheKey,U));let ce;return U.opListReadCapability||(ce=Object.create(null),ce.operatorListChanged=f,U.opListReadCapability=new _util.PromiseCapability,(U.renderTasks||(U.renderTasks=new Set)).add(ce),U.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(se=this._stats)==null||se.time("Page Request"),this._pumpOperatorList(P)),U.opListReadCapability.promise}streamTextContent({includeMarkedContent:S=!1,disableNormalization:m=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:S===!0,disableNormalization:m===!0},{highWaterMark:100,size(f){return f.items.length}})}getTextContent(S={}){if(this._transport._htmlForXfa)return this.getXfa().then(O=>_xfa_text.XfaText.textContent(O));const m=this.streamTextContent(S);return new Promise(function(O,f){function P(){U.read().then(function({value:se,done:ae}){if(ae){O(ce);return}Object.assign(ce.styles,se.styles),ce.items.push(...se.items),P()},f)}const U=m.getReader(),ce={items:[],styles:Object.create(null)};P()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const S=[];for(const m of this._intentStates.values())if(this._abortOperatorList({intentState:m,reason:new Error("Page was destroyed."),force:!0}),!m.opListReadCapability)for(const O of m.renderTasks)S.push(O.completed),O.cancel();return this.objs.clear(),ve(this,n,!1),le(this,i,At).call(this),Promise.all(S)}cleanup(S=!1){ve(this,n,!0);const m=le(this,i,lt).call(this,!1);return S&&m&&this._stats&&(this._stats=new _display_utils.StatTimer),m}_startRenderPage(S,m){var f,P;const O=this._intentStates.get(m);O&&((f=this._stats)==null||f.timeEnd("Page Request"),(P=O.displayReadyCapability)==null||P.resolve(S))}_renderPageChunk(S,m){for(let O=0,f=S.length;O<f;O++)m.operatorList.fnArray.push(S.fnArray[O]),m.operatorList.argsArray.push(S.argsArray[O]);m.operatorList.lastChunk=S.lastChunk,m.operatorList.separateAnnots=S.separateAnnots;for(const O of m.renderTasks)O.operatorListChanged();S.lastChunk&&le(this,i,lt).call(this,!0)}_pumpOperatorList({renderingIntent:S,cacheKey:m,annotationStorageSerializable:O}){const{map:f,transfers:P}=O,ce=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:S,cacheKey:m,annotationStorage:f},P).getReader(),se=this._intentStates.get(m);se.streamReader=ce;const ae=()=>{ce.read().then(({value:ee,done:ue})=>{if(ue){se.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ee,se),ae())},ee=>{if(se.streamReader=null,!this._transport.destroyed){if(se.operatorList){se.operatorList.lastChunk=!0;for(const ue of se.renderTasks)ue.operatorListChanged();le(this,i,lt).call(this,!0)}if(se.displayReadyCapability)se.displayReadyCapability.reject(ee);else if(se.opListReadCapability)se.opListReadCapability.reject(ee);else throw ee}})};ae()}_abortOperatorList({intentState:S,reason:m,force:O=!1}){if(S.streamReader){if(S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null),!O){if(S.renderTasks.size>0)return;if(m instanceof _display_utils.RenderingCancelledException){let f=RENDERING_CANCELLED_TIMEOUT;m.extraDelay>0&&m.extraDelay<1e3&&(f+=m.extraDelay),S.streamReaderCancelTimeout=setTimeout(()=>{S.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:S,reason:m,force:!0})},f);return}}if(S.streamReader.cancel(new _util.AbortException(m.message)).catch(()=>{}),S.streamReader=null,!this._transport.destroyed){for(const[f,P]of this._intentStates)if(P===S){this._intentStates.delete(f);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,n=new WeakMap,i=new WeakSet,lt=function(S=!1){if(le(this,i,At).call(this),!l(this,n)||this.destroyed)return!1;if(S)return ve(this,s,setTimeout(()=>{ve(this,s,null),le(this,i,lt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:m,operatorList:O}of this._intentStates.values())if(m.size>0||!O.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ve(this,n,!1),!0},At=function(){l(this,s)&&(clearTimeout(l(this,s)),ve(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){me(this,u,new Set);me(this,c,Promise.resolve())}postMessage(S,m){const O={data:structuredClone(S,m?{transfer:m}:null)};l(this,c).then(()=>{for(const f of l(this,u))f.call(this,O)})}addEventListener(S,m){l(this,u).add(m)}removeEventListener(S,m){l(this,u).delete(m)}terminate(){l(this,u).clear()}}u=new WeakMap,c=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const v=(d=document==null?void 0:document.currentScript)==null?void 0:d.src;v&&(PDFWorkerUtil.fallbackWorkerSrc=v.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(v,S){let m;try{if(m=new URL(v),!m.origin||m.origin==="null")return!1}catch{return!1}const O=new URL(S,m);return m.origin===O.origin},PDFWorkerUtil.createCDNWrapper=function(v){const S=`importScripts("${v}");`;return URL.createObjectURL(new Blob([S]))}}const _PDFWorker=class _PDFWorker{constructor({name:v=null,port:S=null,verbosity:m=(0,_util.getVerbosityLevel)()}={}){var O;if(this.name=v,this.destroyed=!1,this.verbosity=m,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,S){if((O=l(_PDFWorker,a))!=null&&O.has(S))throw new Error("Cannot use more than one PDFWorker per port.");(l(_PDFWorker,a)||ve(_PDFWorker,a,new WeakMap)).set(S,this),this._initializeFromPort(S);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(v){this._port=v,this._messageHandler=new _message_handler.MessageHandler("main","worker",v),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:v}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,v)||(v=PDFWorkerUtil.createCDNWrapper(new URL(v,window.location).href));const S=new Worker(v),m=new _message_handler.MessageHandler("main","worker",S),O=()=>{S.removeEventListener("error",f),m.destroy(),S.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},f=()=>{this._webWorker||O()};S.addEventListener("error",f),m.on("test",U=>{if(S.removeEventListener("error",f),this.destroyed){O();return}U?(this._messageHandler=m,this._port=S,this._webWorker=S,this._readyCapability.resolve(),m.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),m.destroy(),S.terminate())}),m.on("ready",U=>{if(S.removeEventListener("error",f),this.destroyed){O();return}try{P()}catch{this._setupFakeWorker()}});const P=()=>{const U=new Uint8Array;m.send("test",U,[U.buffer])};P();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(v=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const S=new LoopbackPort;this._port=S;const m=`fake${PDFWorkerUtil.fakeWorkerId++}`,O=new _message_handler.MessageHandler(m+"_worker",m,S);v.setup(O,S);const f=new _message_handler.MessageHandler(m,m+"_worker",S);this._messageHandler=f,this._readyCapability.resolve(),f.send("configure",{verbosity:this.verbosity})}).catch(v=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${v.message}".`))})}destroy(){var v;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(v=l(_PDFWorker,a))==null||v.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(v){var m;if(!(v!=null&&v.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const S=(m=l(this,a))==null?void 0:m.get(v.port);if(S){if(S._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return S}return new _PDFWorker(v)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var v;try{return((v=globalThis.pdfjsWorker)==null?void 0:v.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};a=new WeakMap,me(_PDFWorker,a);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(S,m,O,f,P){me(this,F);me(this,g,new Map);me(this,C,new Map);me(this,y,new Map);me(this,w,null);this.messageHandler=S,this.loadingTask=m,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:f.ownerDocument,styleElement:f.styleElement}),this._params=f,this.canvasFactory=P.canvasFactory,this.filterFactory=P.filterFactory,this.cMapReaderFactory=P.cMapReaderFactory,this.standardFontDataFactory=P.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=O,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(S,m=_util.AnnotationMode.ENABLE,O=null,f=!1){let P=_util.RenderingIntentFlag.DISPLAY,U=_annotation_storage.SerializableEmpty;switch(S){case"any":P=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":P=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${S}`)}switch(m){case _util.AnnotationMode.DISABLE:P+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:P+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:P+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,U=(P&_util.RenderingIntentFlag.PRINT&&O instanceof _annotation_storage.PrintAnnotationStorage?O:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${m}`)}return f&&(P+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:P,cacheKey:`${P}_${U.hash}`,annotationStorageSerializable:U}}destroy(){var O;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(O=l(this,w))==null||O.reject(new Error("Worker was destroyed during onPassword callback"));const S=[];for(const f of l(this,C).values())S.push(f._destroy());l(this,C).clear(),l(this,y).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const m=this.messageHandler.sendWithPromise("Terminate",null);return S.push(m),Promise.all(S).then(()=>{var f;this.commonObjs.clear(),this.fontLoader.clear(),l(this,g).clear(),this.filterFactory.destroy(),(f=this._networkStream)==null||f.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:S,loadingTask:m}=this;S.on("GetReader",(O,f)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=P=>{this._lastProgress={loaded:P.loaded,total:P.total}},f.onPull=()=>{this._fullReader.read().then(function({value:P,done:U}){if(U){f.close();return}(0,_util.assert)(P instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(P),1,[P])}).catch(P=>{f.error(P)})},f.onCancel=P=>{this._fullReader.cancel(P),f.ready.catch(U=>{if(!this.destroyed)throw U})}}),S.on("ReaderHeadersReady",O=>{const f=new _util.PromiseCapability,P=this._fullReader;return P.headersReady.then(()=>{var U;(!P.isStreamingSupported||!P.isRangeSupported)&&(this._lastProgress&&((U=m.onProgress)==null||U.call(m,this._lastProgress)),P.onProgress=ce=>{var se;(se=m.onProgress)==null||se.call(m,{loaded:ce.loaded,total:ce.total})}),f.resolve({isStreamingSupported:P.isStreamingSupported,isRangeSupported:P.isRangeSupported,contentLength:P.contentLength})},f.reject),f.promise}),S.on("GetRangeReader",(O,f)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const P=this._networkStream.getRangeReader(O.begin,O.end);if(!P){f.close();return}f.onPull=()=>{P.read().then(function({value:U,done:ce}){if(ce){f.close();return}(0,_util.assert)(U instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(U),1,[U])}).catch(U=>{f.error(U)})},f.onCancel=U=>{P.cancel(U),f.ready.catch(ce=>{if(!this.destroyed)throw ce})}}),S.on("GetDoc",({pdfInfo:O})=>{this._numPages=O.numPages,this._htmlForXfa=O.htmlForXfa,delete O.htmlForXfa,m._capability.resolve(new PDFDocumentProxy(O,this))}),S.on("DocException",function(O){let f;switch(O.name){case"PasswordException":f=new _util.PasswordException(O.message,O.code);break;case"InvalidPDFException":f=new _util.InvalidPDFException(O.message);break;case"MissingPDFException":f=new _util.MissingPDFException(O.message);break;case"UnexpectedResponseException":f=new _util.UnexpectedResponseException(O.message,O.status);break;case"UnknownErrorException":f=new _util.UnknownErrorException(O.message,O.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}m._capability.reject(f)}),S.on("PasswordRequest",O=>{if(ve(this,w,new _util.PromiseCapability),m.onPassword){const f=P=>{P instanceof Error?l(this,w).reject(P):l(this,w).resolve({password:P})};try{m.onPassword(f,O.code)}catch(P){l(this,w).reject(P)}}else l(this,w).reject(new _util.PasswordException(O.message,O.code));return l(this,w).promise}),S.on("DataLoaded",O=>{var f;(f=m.onProgress)==null||f.call(m,{loaded:O.length,total:O.length}),this.downloadInfoCapability.resolve(O)}),S.on("StartRenderPage",O=>{if(this.destroyed)return;l(this,C).get(O.pageIndex)._startRenderPage(O.transparency,O.cacheKey)}),S.on("commonobj",([O,f,P])=>{var U;if(!this.destroyed&&!this.commonObjs.has(O))switch(f){case"Font":const ce=this._params;if("error"in P){const ee=P.error;(0,_util.warn)(`Error during font loading: ${ee}`),this.commonObjs.resolve(O,ee);break}const se=ce.pdfBug&&((U=globalThis.FontInspector)!=null&&U.enabled)?(ee,ue)=>globalThis.FontInspector.fontAdded(ee,ue):null,ae=new _font_loader.FontFaceObject(P,{isEvalSupported:ce.isEvalSupported,disableFontFace:ce.disableFontFace,ignoreErrors:ce.ignoreErrors,inspectFont:se});this.fontLoader.bind(ae).catch(ee=>S.sendWithPromise("FontFallback",{id:O})).finally(()=>{!ce.fontExtraProperties&&ae.data&&(ae.data=null),this.commonObjs.resolve(O,ae)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(O,P);break;default:throw new Error(`Got unknown common object type ${f}`)}}),S.on("obj",([O,f,P,U])=>{var se;if(this.destroyed)return;const ce=l(this,C).get(f);if(!ce.objs.has(O))switch(P){case"Image":if(ce.objs.resolve(O,U),U){let ae;if(U.bitmap){const{width:ee,height:ue}=U;ae=ee*ue*4}else ae=((se=U.data)==null?void 0:se.length)||0;ae>_util.MAX_IMAGE_SIZE_TO_CACHE&&(ce._maybeCleanupAfterRender=!0)}break;case"Pattern":ce.objs.resolve(O,U);break;default:throw new Error(`Got unknown object type ${P}`)}}),S.on("DocProgress",O=>{var f;this.destroyed||(f=m.onProgress)==null||f.call(m,{loaded:O.loaded,total:O.total})}),S.on("FetchBuiltInCMap",O=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(O):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),S.on("FetchStandardFontData",O=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(O):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var O;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:S,transfers:m}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:S,filename:((O=this._fullReader)==null?void 0:O.filename)??null},m).finally(()=>{this.annotationStorage.resetModified()})}getPage(S){if(!Number.isInteger(S)||S<=0||S>this._numPages)return Promise.reject(new Error("Invalid page request."));const m=S-1,O=l(this,y).get(m);if(O)return O;const f=this.messageHandler.sendWithPromise("GetPage",{pageIndex:m}).then(P=>{if(this.destroyed)throw new Error("Transport destroyed");const U=new PDFPageProxy(m,P,this,this._params.pdfBug);return l(this,C).set(m,U),U});return l(this,y).set(m,f),f}getPageIndex(S){return typeof S!="object"||S===null||!Number.isInteger(S.num)||S.num<0||!Number.isInteger(S.gen)||S.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:S.num,gen:S.gen})}getAnnotations(S,m){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:S,intent:m})}getFieldObjects(){return le(this,F,St).call(this,"GetFieldObjects")}hasJSActions(){return le(this,F,St).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(S){return typeof S!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:S})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return le(this,F,St).call(this,"GetDocJSActions")}getPageJSActions(S){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:S})}getStructTree(S){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:S})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(S=>new _optional_content_config.OptionalContentConfig(S))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const S="GetMetadata",m=l(this,g).get(S);if(m)return m;const O=this.messageHandler.sendWithPromise(S,null).then(f=>{var P,U;return{info:f[0],metadata:f[1]?new _metadata.Metadata(f[1]):null,contentDispositionFilename:((P=this._fullReader)==null?void 0:P.filename)??null,contentLength:((U=this._fullReader)==null?void 0:U.contentLength)??null}});return l(this,g).set(S,O),O}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(S=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const m of l(this,C).values())if(!m.cleanup())throw new Error(`startCleanup: Page ${m.pageNumber} is currently rendering.`);this.commonObjs.clear(),S||this.fontLoader.clear(),l(this,g).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:S,enableXfa:m}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:S,enableXfa:m})}}g=new WeakMap,C=new WeakMap,y=new WeakMap,w=new WeakMap,F=new WeakSet,St=function(S,m=null){const O=l(this,g).get(S);if(O)return O;const f=this.messageHandler.sendWithPromise(S,m);return l(this,g).set(S,f),f};class PDFObjects{constructor(){me(this,k);me(this,T,Object.create(null))}get(S,m=null){if(m){const f=le(this,k,Nt).call(this,S);return f.capability.promise.then(()=>m(f.data)),null}const O=l(this,T)[S];if(!(O!=null&&O.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${S}.`);return O.data}has(S){const m=l(this,T)[S];return(m==null?void 0:m.capability.settled)||!1}resolve(S,m=null){const O=le(this,k,Nt).call(this,S);O.data=m,O.capability.resolve()}clear(){var S;for(const m in l(this,T)){const{data:O}=l(this,T)[m];(S=O==null?void 0:O.bitmap)==null||S.close()}ve(this,T,Object.create(null))}}T=new WeakMap,k=new WeakSet,Nt=function(S){var m;return(m=l(this,T))[S]||(m[S]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(S){me(this,I,null);ve(this,I,S),this.onContinue=null}get promise(){return l(this,I).capability.promise}cancel(S=0){l(this,I).cancel(null,S)}get separateAnnots(){const{separateAnnots:S}=l(this,I).operatorList;if(!S)return!1;const{annotationCanvasMap:m}=l(this,I);return S.form||S.canvas&&(m==null?void 0:m.size)>0}}I=new WeakMap,exports.RenderTask=RenderTask;const E=class E{constructor({callback:S,params:m,objs:O,commonObjs:f,annotationCanvasMap:P,operatorList:U,pageIndex:ce,canvasFactory:se,filterFactory:ae,useRequestAnimationFrame:ee=!1,pdfBug:ue=!1,pageColors:W=null}){this.callback=S,this.params=m,this.objs=O,this.commonObjs=f,this.annotationCanvasMap=P,this.operatorListIdx=null,this.operatorList=U,this._pageIndex=ce,this.canvasFactory=se,this.filterFactory=ae,this._pdfBug=ue,this.pageColors=W,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ee===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=m.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:S=!1,optionalContentConfig:m}){var ce,se;if(this.cancelled)return;if(this._canvas){if(l(E,_).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(E,_).add(this._canvas)}this._pdfBug&&((ce=globalThis.StepperManager)!=null&&ce.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:O,viewport:f,transform:P,background:U}=this.params;this.gfx=new _canvas.CanvasGraphics(O,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:m},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:P,viewport:f,transparency:S,background:U}),this.operatorListIdx=0,this.graphicsReady=!0,(se=this.graphicsReadyCallback)==null||se.call(this)}cancel(S=null,m=0){var O;this.running=!1,this.cancelled=!0,(O=this.gfx)==null||O.endDrawing(),l(E,_).delete(this._canvas),this.callback(S||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,m))}operatorListChanged(){var S;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(S=this.stepper)==null||S.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(E,_).delete(this._canvas),this.callback())))}};_=new WeakMap,me(E,_,new WeakSet);let InternalRenderTask=E;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(e,t,s)=>{var d,a,g,vn,y;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=s(1),i=s(4),o=s(8);const r=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=r;class u{constructor(){me(this,g);me(this,d,!1);me(this,a,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(F,x){const T=l(this,a).get(F);return T===void 0?x:Object.assign(x,T)}getRawValue(F){return l(this,a).get(F)}remove(F){if(l(this,a).delete(F),l(this,a).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const x of l(this,a).values())if(x instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(F,x){const T=l(this,a).get(F);let k=!1;if(T!==void 0)for(const[H,I]of Object.entries(x))T[H]!==I&&(k=!0,T[H]=I);else k=!0,l(this,a).set(F,x);k&&le(this,g,vn).call(this),x instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(x.constructor._type)}has(F){return l(this,a).has(F)}getAll(){return l(this,a).size>0?(0,n.objectFromMap)(l(this,a)):null}setAll(F){for(const[x,T]of Object.entries(F))this.setValue(x,T)}get size(){return l(this,a).size}resetModified(){l(this,d)&&(ve(this,d,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new c(this)}get serializable(){if(l(this,a).size===0)return r;const F=new Map,x=new o.MurmurHash3_64,T=[],k=Object.create(null);let H=!1;for(const[I,_]of l(this,a)){const E=_ instanceof i.AnnotationEditor?_.serialize(!1,k):_;E&&(F.set(I,E),x.update(`${I}:${JSON.stringify(E)}`),H||(H=!!E.bitmap))}if(H)for(const I of F.values())I.bitmap&&T.push(I.bitmap);return F.size>0?{map:F,hash:x.hexdigest(),transfers:T}:r}}d=new WeakMap,a=new WeakMap,g=new WeakSet,vn=function(){l(this,d)||(ve(this,d,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=u;class c extends u{constructor(x){super();me(this,y);const{map:T,hash:k,transfers:H}=x.serializable,I=structuredClone(T,H?{transfer:H}:null);ve(this,y,{map:I,hash:k,transfers:H})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,y)}}y=new WeakMap,t.PrintAnnotationStorage=c},(e,t,s)=>{var c,d,a,g,C,y,w,F,x,T,k,H,I,_,E,Lt,Bt,m,Vt,Ht,yn,An,Sn,Ut,En;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=s(5),i=s(1),o=s(6);const ee=class ee{constructor(W){me(this,E);me(this,c,"");me(this,d,!1);me(this,a,null);me(this,g,null);me(this,C,null);me(this,y,!1);me(this,w,null);me(this,F,this.focusin.bind(this));me(this,x,this.focusout.bind(this));me(this,T,!1);me(this,k,!1);me(this,H,!1);Qe(this,"_initialOptions",Object.create(null));Qe(this,"_uiManager",null);Qe(this,"_focusEventsAllowed",!0);Qe(this,"_l10nPromise",null);me(this,I,!1);me(this,_,ee._zIndex++);this.constructor===ee&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=W.parent,this.id=W.id,this.width=this.height=null,this.pageIndex=W.parent.pageIndex,this.name=W.name,this.div=null,this._uiManager=W.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=W.isCentered,this._structTreeParentId=null;const{rotation:ie,rawDims:{pageWidth:he,pageHeight:j,pageX:b,pageY:A}}=this.parent.viewport;this.rotation=ie,this.pageRotation=(360+ie-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[he,j],this.pageTranslation=[b,A];const[N,z]=this.parentDimensions;this.x=W.x/N,this.y=W.y/z,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(W){const ie=new u({id:W.parent.getNextId(),parent:W.parent,uiManager:W._uiManager});ie.annotationElementId=W.annotationElementId,ie.deleted=!0,ie._uiManager.addToAnnotationStorage(ie)}static initialize(W,ie=null){if(ee._l10nPromise||(ee._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(j=>[j,W.get(j)]))),ie!=null&&ie.strings)for(const j of ie.strings)ee._l10nPromise.set(j,W.get(j));if(ee._borderLineWidth!==-1)return;const he=getComputedStyle(document.documentElement);ee._borderLineWidth=parseFloat(he.getPropertyValue("--outline-width"))||0}static updateDefaultParams(W,ie){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(W){return!1}static paste(W,ie){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,I)}set _isDraggable(W){var ie;ve(this,I,W),(ie=this.div)==null||ie.classList.toggle("draggable",W)}center(){const[W,ie]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*ie/(W*2),this.y+=this.width*W/(ie*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*ie/(W*2),this.y-=this.width*W/(ie*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(W){this._uiManager.addCommands(W)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,_)}setParent(W){W!==null&&(this.pageIndex=W.pageIndex,this.pageDimensions=W.pageDimensions),this.parent=W}focusin(W){this._focusEventsAllowed&&(l(this,T)?ve(this,T,!1):this.parent.setSelected(this))}focusout(W){var he;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const ie=W.relatedTarget;ie!=null&&ie.closest(`#${this.id}`)||(W.preventDefault(),(he=this.parent)!=null&&he.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(W,ie,he,j){const[b,A]=this.parentDimensions;[he,j]=this.screenToPageTranslation(he,j),this.x=(W+he)/b,this.y=(ie+j)/A,this.fixAndSetPosition()}translate(W,ie){le(this,E,Lt).call(this,this.parentDimensions,W,ie)}translateInPage(W,ie){le(this,E,Lt).call(this,this.pageDimensions,W,ie),this.div.scrollIntoView({block:"nearest"})}drag(W,ie){const[he,j]=this.parentDimensions;if(this.x+=W/he,this.y+=ie/j,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:M,y:V}=this.div.getBoundingClientRect();this.parent.findNewParent(this,M,V)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:b,y:A}=this;const[N,z]=le(this,E,Bt).call(this);b+=N,A+=z,this.div.style.left=`${(100*b).toFixed(2)}%`,this.div.style.top=`${(100*A).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[W,ie]=this.pageDimensions;let{x:he,y:j,width:b,height:A}=this;switch(b*=W,A*=ie,he*=W,j*=ie,this.rotation){case 0:he=Math.max(0,Math.min(W-b,he)),j=Math.max(0,Math.min(ie-A,j));break;case 90:he=Math.max(0,Math.min(W-A,he)),j=Math.min(ie,Math.max(b,j));break;case 180:he=Math.min(W,Math.max(b,he)),j=Math.min(ie,Math.max(A,j));break;case 270:he=Math.min(W,Math.max(A,he)),j=Math.max(0,Math.min(ie-b,j));break}this.x=he/=W,this.y=j/=ie;const[N,z]=le(this,E,Bt).call(this);he+=N,j+=z;const{style:M}=this.div;M.left=`${(100*he).toFixed(2)}%`,M.top=`${(100*j).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(W,ie){var he;return le(he=ee,m,Vt).call(he,W,ie,this.parentRotation)}pageTranslationToScreen(W,ie){var he;return le(he=ee,m,Vt).call(he,W,ie,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:W,pageDimensions:[ie,he]}=this,j=ie*W,b=he*W;return i.FeatureTest.isCSSRoundSupported?[Math.round(j),Math.round(b)]:[j,b]}setDims(W,ie){var b;const[he,j]=this.parentDimensions;this.div.style.width=`${(100*W/he).toFixed(2)}%`,l(this,y)||(this.div.style.height=`${(100*ie/j).toFixed(2)}%`),(b=l(this,a))==null||b.classList.toggle("small",W<ee.SMALL_EDITOR_SIZE||ie<ee.SMALL_EDITOR_SIZE)}fixDims(){const{style:W}=this.div,{height:ie,width:he}=W,j=he.endsWith("%"),b=!l(this,y)&&ie.endsWith("%");if(j&&b)return;const[A,N]=this.parentDimensions;j||(W.width=`${(100*parseFloat(he)/A).toFixed(2)}%`),!l(this,y)&&!b&&(W.height=`${(100*parseFloat(ie)/N).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(l(this,a))return;const W=ve(this,a,document.createElement("button"));W.className="altText";const ie=await ee._l10nPromise.get("editor_alt_text_button_label");W.textContent=ie,W.setAttribute("aria-label",ie),W.tabIndex="0",W.addEventListener("contextmenu",o.noContextMenu),W.addEventListener("pointerdown",he=>he.stopPropagation()),W.addEventListener("click",he=>{he.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),W.addEventListener("keydown",he=>{he.target===W&&he.key==="Enter"&&(he.preventDefault(),this._uiManager.editAltText(this))}),le(this,E,Ut).call(this),this.div.append(W),ee.SMALL_EDITOR_SIZE||(ee.SMALL_EDITOR_SIZE=Math.min(128,Math.round(W.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:l(this,c),decorative:l(this,d)}}set altTextData({altText:W,decorative:ie}){l(this,c)===W&&l(this,d)===ie||(ve(this,c,W),ve(this,d,ie),le(this,E,Ut).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",l(this,F)),this.div.addEventListener("focusout",l(this,x));const[W,ie]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*ie/W).toFixed(2)}%`,this.div.style.maxHeight=`${(100*W/ie).toFixed(2)}%`);const[he,j]=this.getInitialTranslation();return this.translate(he,j),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(W){const{isMac:ie}=i.FeatureTest.platform;if(W.button!==0||W.ctrlKey&&ie){W.preventDefault();return}ve(this,T,!0),le(this,E,En).call(this,W)}moveInDOM(){var W;(W=this.parent)==null||W.moveEditorInDOM(this)}_setParentAndPosition(W,ie,he){W.changeParent(this),this.x=ie,this.y=he,this.fixAndSetPosition()}getRect(W,ie){const he=this.parentScale,[j,b]=this.pageDimensions,[A,N]=this.pageTranslation,z=W/he,M=ie/he,V=this.x*j,Y=this.y*b,re=this.width*j,ge=this.height*b;switch(this.rotation){case 0:return[V+z+A,b-Y-M-ge+N,V+z+re+A,b-Y-M+N];case 90:return[V+M+A,b-Y+z+N,V+M+ge+A,b-Y+z+re+N];case 180:return[V-z-re+A,b-Y+M+N,V-z+A,b-Y+M+ge+N];case 270:return[V-M-ge+A,b-Y-z-re+N,V-M+A,b-Y-z+N];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(W,ie){const[he,j,b,A]=W,N=b-he,z=A-j;switch(this.rotation){case 0:return[he,ie-A,N,z];case 90:return[he,ie-j,z,N];case 180:return[b,ie-j,N,z];case 270:return[b,ie-A,z,N];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ve(this,H,!0)}disableEditMode(){ve(this,H,!1)}isInEditMode(){return l(this,H)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var W,ie;(W=this.div)==null||W.addEventListener("focusin",l(this,F)),(ie=this.div)==null||ie.addEventListener("focusout",l(this,x))}serialize(W=!1,ie=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(W,ie,he){const j=new this.prototype.constructor({parent:ie,id:ie.getNextId(),uiManager:he});j.rotation=W.rotation;const[b,A]=j.pageDimensions,[N,z,M,V]=j.getRectInCurrentCoords(W.rect,A);return j.x=N/b,j.y=z/A,j.width=M/b,j.height=V/A,j}remove(){var W;this.div.removeEventListener("focusin",l(this,F)),this.div.removeEventListener("focusout",l(this,x)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(W=l(this,a))==null||W.remove(),ve(this,a,null),ve(this,g,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(le(this,E,yn).call(this),l(this,w).classList.remove("hidden"))}select(){var W;this.makeResizable(),(W=this.div)==null||W.classList.add("selectedEditor")}unselect(){var W,ie,he;(W=l(this,w))==null||W.classList.add("hidden"),(ie=this.div)==null||ie.classList.remove("selectedEditor"),(he=this.div)!=null&&he.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(W,ie){}disableEditing(){l(this,a)&&(l(this,a).hidden=!0)}enableEditing(){l(this,a)&&(l(this,a).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return l(this,k)}set isEditing(W){ve(this,k,W),this.parent&&(W?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(W,ie){ve(this,y,!0);const he=W/ie,{style:j}=this.div;j.aspectRatio=he,j.height="auto"}static get MIN_SIZE(){return 16}};c=new WeakMap,d=new WeakMap,a=new WeakMap,g=new WeakMap,C=new WeakMap,y=new WeakMap,w=new WeakMap,F=new WeakMap,x=new WeakMap,T=new WeakMap,k=new WeakMap,H=new WeakMap,I=new WeakMap,_=new WeakMap,E=new WeakSet,Lt=function([W,ie],he,j){[he,j]=this.screenToPageTranslation(he,j),this.x+=he/W,this.y+=j/ie,this.fixAndSetPosition()},Bt=function(){const[W,ie]=this.parentDimensions,{_borderLineWidth:he}=ee,j=he/W,b=he/ie;switch(this.rotation){case 90:return[-j,b];case 180:return[j,b];case 270:return[j,-b];default:return[-j,-b]}},m=new WeakSet,Vt=function(W,ie,he){switch(he){case 90:return[ie,-W];case 180:return[-W,-ie];case 270:return[-ie,W];default:return[W,ie]}},Ht=function(W){switch(W){case 90:{const[ie,he]=this.pageDimensions;return[0,-ie/he,he/ie,0]}case 180:return[-1,0,0,-1];case 270:{const[ie,he]=this.pageDimensions;return[0,ie/he,-he/ie,0]}default:return[1,0,0,1]}},yn=function(){if(l(this,w))return;ve(this,w,document.createElement("div")),l(this,w).classList.add("resizers");const W=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||W.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const ie of W){const he=document.createElement("div");l(this,w).append(he),he.classList.add("resizer",ie),he.addEventListener("pointerdown",le(this,E,An).bind(this,ie)),he.addEventListener("contextmenu",o.noContextMenu)}this.div.prepend(l(this,w))},An=function(W,ie){ie.preventDefault();const{isMac:he}=i.FeatureTest.platform;if(ie.button!==0||ie.ctrlKey&&he)return;const j=le(this,E,Sn).bind(this,W),b=this._isDraggable;this._isDraggable=!1;const A={passive:!0,capture:!0};window.addEventListener("pointermove",j,A);const N=this.x,z=this.y,M=this.width,V=this.height,Y=this.parent.div.style.cursor,re=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(ie.target).cursor;const ge=()=>{this._isDraggable=b,window.removeEventListener("pointerup",ge),window.removeEventListener("blur",ge),window.removeEventListener("pointermove",j,A),this.parent.div.style.cursor=Y,this.div.style.cursor=re;const D=this.x,L=this.y,q=this.width,ne=this.height;D===N&&L===z&&q===M&&ne===V||this.addCommands({cmd:()=>{this.width=q,this.height=ne,this.x=D,this.y=L;const[X,G]=this.parentDimensions;this.setDims(X*q,G*ne),this.fixAndSetPosition()},undo:()=>{this.width=M,this.height=V,this.x=N,this.y=z;const[X,G]=this.parentDimensions;this.setDims(X*M,G*V),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ge),window.addEventListener("blur",ge)},Sn=function(W,ie){const[he,j]=this.parentDimensions,b=this.x,A=this.y,N=this.width,z=this.height,M=ee.MIN_SIZE/he,V=ee.MIN_SIZE/j,Y=ke=>Math.round(ke*1e4)/1e4,re=le(this,E,Ht).call(this,this.rotation),ge=(ke,De)=>[re[0]*ke+re[2]*De,re[1]*ke+re[3]*De],D=le(this,E,Ht).call(this,360-this.rotation),L=(ke,De)=>[D[0]*ke+D[2]*De,D[1]*ke+D[3]*De];let q,ne,X=!1,G=!1;switch(W){case"topLeft":X=!0,q=(ke,De)=>[0,0],ne=(ke,De)=>[ke,De];break;case"topMiddle":q=(ke,De)=>[ke/2,0],ne=(ke,De)=>[ke/2,De];break;case"topRight":X=!0,q=(ke,De)=>[ke,0],ne=(ke,De)=>[0,De];break;case"middleRight":G=!0,q=(ke,De)=>[ke,De/2],ne=(ke,De)=>[0,De/2];break;case"bottomRight":X=!0,q=(ke,De)=>[ke,De],ne=(ke,De)=>[0,0];break;case"bottomMiddle":q=(ke,De)=>[ke/2,De],ne=(ke,De)=>[ke/2,0];break;case"bottomLeft":X=!0,q=(ke,De)=>[0,De],ne=(ke,De)=>[ke,0];break;case"middleLeft":G=!0,q=(ke,De)=>[0,De/2],ne=(ke,De)=>[ke,De/2];break}const R=q(N,z),B=ne(N,z);let J=ge(...B);const Q=Y(b+J[0]),de=Y(A+J[1]);let fe=1,_e=1,[te,Te]=this.screenToPageTranslation(ie.movementX,ie.movementY);if([te,Te]=L(te/he,Te/j),X){const ke=Math.hypot(N,z);fe=_e=Math.max(Math.min(Math.hypot(B[0]-R[0]-te,B[1]-R[1]-Te)/ke,1/N,1/z),M/N,V/z)}else G?fe=Math.max(M,Math.min(1,Math.abs(B[0]-R[0]-te)))/N:_e=Math.max(V,Math.min(1,Math.abs(B[1]-R[1]-Te)))/z;const Ce=Y(N*fe),Fe=Y(z*_e);J=ge(...ne(Ce,Fe));const Ne=Q-J[0],je=de-J[1];this.width=Ce,this.height=Fe,this.x=Ne,this.y=je,this.setDims(he*Ce,j*Fe),this.fixAndSetPosition()},Ut=async function(){var he;const W=l(this,a);if(!W)return;if(!l(this,c)&&!l(this,d)){W.classList.remove("done"),(he=l(this,g))==null||he.remove();return}ee._l10nPromise.get("editor_alt_text_edit_button_label").then(j=>{W.setAttribute("aria-label",j)});let ie=l(this,g);if(!ie){ve(this,g,ie=document.createElement("span")),ie.className="tooltip",ie.setAttribute("role","tooltip");const j=ie.id=`alt-text-tooltip-${this.id}`;W.setAttribute("aria-describedby",j);const b=100;W.addEventListener("mouseenter",()=>{ve(this,C,setTimeout(()=>{ve(this,C,null),l(this,g).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},b))}),W.addEventListener("mouseleave",()=>{var A;clearTimeout(l(this,C)),ve(this,C,null),(A=l(this,g))==null||A.classList.remove("show")})}W.classList.add("done"),ie.innerText=l(this,d)?await ee._l10nPromise.get("editor_alt_text_decorative_tooltip"):l(this,c),ie.parentNode||W.append(ie)},En=function(W){if(!this._isDraggable)return;const ie=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let he,j;ie&&(he={passive:!0,capture:!0},j=A=>{const[N,z]=this.screenToPageTranslation(A.movementX,A.movementY);this._uiManager.dragSelectedEditors(N,z)},window.addEventListener("pointermove",j,he));const b=()=>{if(window.removeEventListener("pointerup",b),window.removeEventListener("blur",b),ie&&window.removeEventListener("pointermove",j,he),ve(this,T,!1),!this._uiManager.endDragSession()){const{isMac:A}=i.FeatureTest.platform;W.ctrlKey&&!A||W.shiftKey||W.metaKey&&A?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",b),window.addEventListener("blur",b)},me(ee,m),Qe(ee,"_borderLineWidth",-1),Qe(ee,"_colorManager",new n.ColorManager),Qe(ee,"_zIndex",1),Qe(ee,"SMALL_EDITOR_SIZE",0);let r=ee;t.AnnotationEditor=r;class u extends r{constructor(W){super(W),this.annotationElementId=W.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,s)=>{var y,w,F,x,T,jt,I,_,E,v,S,Tn,f,P,U,ce,se,ae,ee,ue,W,ie,he,j,b,A,N,z,M,V,Y,re,ge,D,L,q,ne,X,G,R,B,J,Q,de,fe,_e,te,Cn,$t,Wt,Et,zt,Gt,nt,pt,wn,Pn,qt,gt,Kt;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=o,t.opacityToHex=r;var n=s(1),i=s(6);function o(qe,Z,Se){for(const Re of Se)Z.addEventListener(Re,qe[Re].bind(qe))}function r(qe){return Math.round(Math.min(255,Math.max(1,255*qe))).toString(16).padStart(2,"0")}class u{constructor(){me(this,y,0)}getId(){return`${n.AnnotationEditorPrefix}${ft(this,y)._++}`}}y=new WeakMap;const H=class H{constructor(){me(this,T);me(this,w,(0,n.getUuid)());me(this,F,0);me(this,x,null)}static get _isSVGFittingCanvas(){const Z='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Re=new OffscreenCanvas(1,3).getContext("2d"),Be=new Image;Be.src=Z;const Ue=Be.decode().then(()=>(Re.drawImage(Be,0,0,1,1,0,0,1,3),new Uint32Array(Re.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",Ue)}async getFromFile(Z){const{lastModified:Se,name:Re,size:Be,type:Ue}=Z;return le(this,T,jt).call(this,`${Se}_${Re}_${Be}_${Ue}`,Z)}async getFromUrl(Z){return le(this,T,jt).call(this,Z,Z)}async getFromId(Z){l(this,x)||ve(this,x,new Map);const Se=l(this,x).get(Z);return Se?Se.bitmap?(Se.refCounter+=1,Se):Se.file?this.getFromFile(Se.file):this.getFromUrl(Se.url):null}getSvgUrl(Z){const Se=l(this,x).get(Z);return Se!=null&&Se.isSvg?Se.svgUrl:null}deleteId(Z){l(this,x)||ve(this,x,new Map);const Se=l(this,x).get(Z);Se&&(Se.refCounter-=1,Se.refCounter===0&&(Se.bitmap=null))}isValidId(Z){return Z.startsWith(`image_${l(this,w)}_`)}};w=new WeakMap,F=new WeakMap,x=new WeakMap,T=new WeakSet,jt=async function(Z,Se){l(this,x)||ve(this,x,new Map);let Re=l(this,x).get(Z);if(Re===null)return null;if(Re!=null&&Re.bitmap)return Re.refCounter+=1,Re;try{Re||(Re={bitmap:null,id:`image_${l(this,w)}_${ft(this,F)._++}`,refCounter:0,isSvg:!1});let Be;if(typeof Se=="string"){Re.url=Se;const Ue=await fetch(Se);if(!Ue.ok)throw new Error(Ue.statusText);Be=await Ue.blob()}else Be=Re.file=Se;if(Be.type==="image/svg+xml"){const Ue=H._isSVGFittingCanvas,Ie=new FileReader,K=new Image,$=new Promise((oe,ye)=>{K.onload=()=>{Re.bitmap=K,Re.isSvg=!0,oe()},Ie.onload=async()=>{const Ae=Re.svgUrl=Ie.result;K.src=await Ue?`${Ae}#svgView(preserveAspectRatio(none))`:Ae},K.onerror=Ie.onerror=ye});Ie.readAsDataURL(Be),await $}else Re.bitmap=await createImageBitmap(Be);Re.refCounter=1}catch(Be){console.error(Be),Re=null}return l(this,x).set(Z,Re),Re&&l(this,x).set(Re.id,Re),Re};let c=H;class d{constructor(Z=128){me(this,I,[]);me(this,_,!1);me(this,E);me(this,v,-1);ve(this,E,Z)}add({cmd:Z,undo:Se,mustExec:Re,type:Be=NaN,overwriteIfSameType:Ue=!1,keepUndo:Ie=!1}){if(Re&&Z(),l(this,_))return;const K={cmd:Z,undo:Se,type:Be};if(l(this,v)===-1){l(this,I).length>0&&(l(this,I).length=0),ve(this,v,0),l(this,I).push(K);return}if(Ue&&l(this,I)[l(this,v)].type===Be){Ie&&(K.undo=l(this,I)[l(this,v)].undo),l(this,I)[l(this,v)]=K;return}const $=l(this,v)+1;$===l(this,E)?l(this,I).splice(0,1):(ve(this,v,$),$<l(this,I).length&&l(this,I).splice($)),l(this,I).push(K)}undo(){l(this,v)!==-1&&(ve(this,_,!0),l(this,I)[l(this,v)].undo(),ve(this,_,!1),ve(this,v,l(this,v)-1))}redo(){l(this,v)<l(this,I).length-1&&(ve(this,v,l(this,v)+1),ve(this,_,!0),l(this,I)[l(this,v)].cmd(),ve(this,_,!1))}hasSomethingToUndo(){return l(this,v)!==-1}hasSomethingToRedo(){return l(this,v)<l(this,I).length-1}destroy(){ve(this,I,null)}}I=new WeakMap,_=new WeakMap,E=new WeakMap,v=new WeakMap,t.CommandManager=d;class a{constructor(Z){me(this,S);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Se}=n.FeatureTest.platform;for(const[Re,Be,Ue={}]of Z)for(const Ie of Re){const K=Ie.startsWith("mac+");Se&&K?(this.callbacks.set(Ie.slice(4),{callback:Be,options:Ue}),this.allKeys.add(Ie.split("+").at(-1))):!Se&&!K&&(this.callbacks.set(Ie,{callback:Be,options:Ue}),this.allKeys.add(Ie.split("+").at(-1)))}}exec(Z,Se){if(!this.allKeys.has(Se.key))return;const Re=this.callbacks.get(le(this,S,Tn).call(this,Se));if(!Re)return;const{callback:Be,options:{bubbles:Ue=!1,args:Ie=[],checker:K=null}}=Re;K&&!K(Z,Se)||(Be.bind(Z,...Ie)(),Ue||(Se.stopPropagation(),Se.preventDefault()))}}S=new WeakSet,Tn=function(Z){Z.altKey&&this.buffer.push("alt"),Z.ctrlKey&&this.buffer.push("ctrl"),Z.metaKey&&this.buffer.push("meta"),Z.shiftKey&&this.buffer.push("shift"),this.buffer.push(Z.key);const Se=this.buffer.join("+");return this.buffer.length=0,Se},t.KeyboardManager=a;const O=class O{get _colors(){const Z=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(Z),(0,n.shadow)(this,"_colors",Z)}convert(Z){const Se=(0,i.getRGB)(Z);if(!window.matchMedia("(forced-colors: active)").matches)return Se;for(const[Re,Be]of this._colors)if(Be.every((Ue,Ie)=>Ue===Se[Ie]))return O._colorsMapping.get(Re);return Se}getHexCode(Z){const Se=this._colors.get(Z);return Se?n.Util.makeHexColor(...Se):Z}};Qe(O,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let g=O;t.ColorManager=g;const Ke=class Ke{constructor(Z,Se,Re,Be,Ue,Ie){me(this,te);me(this,f,null);me(this,P,new Map);me(this,U,new Map);me(this,ce,null);me(this,se,null);me(this,ae,new d);me(this,ee,0);me(this,ue,new Set);me(this,W,null);me(this,ie,null);me(this,he,new Set);me(this,j,null);me(this,b,new u);me(this,A,!1);me(this,N,!1);me(this,z,null);me(this,M,n.AnnotationEditorType.NONE);me(this,V,new Set);me(this,Y,null);me(this,re,this.blur.bind(this));me(this,ge,this.focus.bind(this));me(this,D,this.copy.bind(this));me(this,L,this.cut.bind(this));me(this,q,this.paste.bind(this));me(this,ne,this.keydown.bind(this));me(this,X,this.onEditingAction.bind(this));me(this,G,this.onPageChanging.bind(this));me(this,R,this.onScaleChanging.bind(this));me(this,B,this.onRotationChanging.bind(this));me(this,J,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});me(this,Q,[0,0]);me(this,de,null);me(this,fe,null);me(this,_e,null);ve(this,fe,Z),ve(this,_e,Se),ve(this,ce,Re),this._eventBus=Be,this._eventBus._on("editingaction",l(this,X)),this._eventBus._on("pagechanging",l(this,G)),this._eventBus._on("scalechanging",l(this,R)),this._eventBus._on("rotationchanging",l(this,B)),ve(this,se,Ue.annotationStorage),ve(this,j,Ue.filterFactory),ve(this,Y,Ie),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Z=Ke.prototype,Se=Ue=>{const{activeElement:Ie}=document;return Ie&&l(Ue,fe).contains(Ie)&&Ue.hasSomethingToControl()},Re=this.TRANSLATE_SMALL,Be=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new a([[["ctrl+a","mac+meta+a"],Z.selectAll],[["ctrl+z","mac+meta+z"],Z.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Z.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Z.delete],[["Escape","mac+Escape"],Z.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Z.translateSelectedEditors,{args:[-Re,0],checker:Se}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Z.translateSelectedEditors,{args:[-Be,0],checker:Se}],[["ArrowRight","mac+ArrowRight"],Z.translateSelectedEditors,{args:[Re,0],checker:Se}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Z.translateSelectedEditors,{args:[Be,0],checker:Se}],[["ArrowUp","mac+ArrowUp"],Z.translateSelectedEditors,{args:[0,-Re],checker:Se}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Z.translateSelectedEditors,{args:[0,-Be],checker:Se}],[["ArrowDown","mac+ArrowDown"],Z.translateSelectedEditors,{args:[0,Re],checker:Se}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Z.translateSelectedEditors,{args:[0,Be],checker:Se}]]))}destroy(){le(this,te,Et).call(this),le(this,te,$t).call(this),this._eventBus._off("editingaction",l(this,X)),this._eventBus._off("pagechanging",l(this,G)),this._eventBus._off("scalechanging",l(this,R)),this._eventBus._off("rotationchanging",l(this,B));for(const Z of l(this,U).values())Z.destroy();l(this,U).clear(),l(this,P).clear(),l(this,he).clear(),ve(this,f,null),l(this,V).clear(),l(this,ae).destroy(),l(this,ce).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",l(this,Y)?l(this,j).addHCMFilter(l(this,Y).foreground,l(this,Y).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(l(this,fe)).direction)}editAltText(Z){var Se;(Se=l(this,ce))==null||Se.editAltText(this,Z)}onPageChanging({pageNumber:Z}){ve(this,ee,Z-1)}focusMainContainer(){l(this,fe).focus()}findParent(Z,Se){for(const Re of l(this,U).values()){const{x:Be,y:Ue,width:Ie,height:K}=Re.div.getBoundingClientRect();if(Z>=Be&&Z<=Be+Ie&&Se>=Ue&&Se<=Ue+K)return Re}return null}disableUserSelect(Z=!1){l(this,_e).classList.toggle("noUserSelect",Z)}addShouldRescale(Z){l(this,he).add(Z)}removeShouldRescale(Z){l(this,he).delete(Z)}onScaleChanging({scale:Z}){this.commitOrRemove(),this.viewParameters.realScale=Z*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Se of l(this,he))Se.onScaleChanging()}onRotationChanging({pagesRotation:Z}){this.commitOrRemove(),this.viewParameters.rotation=Z}addToAnnotationStorage(Z){!Z.isEmpty()&&l(this,se)&&!l(this,se).has(Z.id)&&l(this,se).setValue(Z.id,Z)}blur(){if(!this.hasSelection)return;const{activeElement:Z}=document;for(const Se of l(this,V))if(Se.div.contains(Z)){ve(this,z,[Se,Z]),Se._focusEventsAllowed=!1;break}}focus(){if(!l(this,z))return;const[Z,Se]=l(this,z);ve(this,z,null),Se.addEventListener("focusin",()=>{Z._focusEventsAllowed=!0},{once:!0}),Se.focus()}addEditListeners(){le(this,te,Wt).call(this),le(this,te,zt).call(this)}removeEditListeners(){le(this,te,Et).call(this),le(this,te,Gt).call(this)}copy(Z){var Re;if(Z.preventDefault(),(Re=l(this,f))==null||Re.commitOrRemove(),!this.hasSelection)return;const Se=[];for(const Be of l(this,V)){const Ue=Be.serialize(!0);Ue&&Se.push(Ue)}Se.length!==0&&Z.clipboardData.setData("application/pdfjs",JSON.stringify(Se))}cut(Z){this.copy(Z),this.delete()}paste(Z){Z.preventDefault();const{clipboardData:Se}=Z;for(const Ue of Se.items)for(const Ie of l(this,ie))if(Ie.isHandlingMimeForPasting(Ue.type)){Ie.paste(Ue,this.currentLayer);return}let Re=Se.getData("application/pdfjs");if(!Re)return;try{Re=JSON.parse(Re)}catch(Ue){(0,n.warn)(`paste: "${Ue.message}".`);return}if(!Array.isArray(Re))return;this.unselectAll();const Be=this.currentLayer;try{const Ue=[];for(const $ of Re){const oe=Be.deserialize($);if(!oe)return;Ue.push(oe)}const Ie=()=>{for(const $ of Ue)le(this,te,qt).call(this,$);le(this,te,Kt).call(this,Ue)},K=()=>{for(const $ of Ue)$.remove()};this.addCommands({cmd:Ie,undo:K,mustExec:!0})}catch(Ue){(0,n.warn)(`paste: "${Ue.message}".`)}}keydown(Z){var Se;(Se=this.getActive())!=null&&Se.shouldGetKeyboardEvents()||Ke._keyboardManager.exec(this,Z)}onEditingAction(Z){["undo","redo","delete","selectAll"].includes(Z.name)&&this[Z.name]()}setEditingState(Z){Z?(le(this,te,Cn).call(this),le(this,te,Wt).call(this),le(this,te,zt).call(this),le(this,te,nt).call(this,{isEditing:l(this,M)!==n.AnnotationEditorType.NONE,isEmpty:le(this,te,gt).call(this),hasSomethingToUndo:l(this,ae).hasSomethingToUndo(),hasSomethingToRedo:l(this,ae).hasSomethingToRedo(),hasSelectedEditor:!1})):(le(this,te,$t).call(this),le(this,te,Et).call(this),le(this,te,Gt).call(this),le(this,te,nt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Z){if(!l(this,ie)){ve(this,ie,Z);for(const Se of l(this,ie))le(this,te,pt).call(this,Se.defaultPropertiesToUpdate)}}getId(){return l(this,b).getId()}get currentLayer(){return l(this,U).get(l(this,ee))}getLayer(Z){return l(this,U).get(Z)}get currentPageIndex(){return l(this,ee)}addLayer(Z){l(this,U).set(Z.pageIndex,Z),l(this,A)?Z.enable():Z.disable()}removeLayer(Z){l(this,U).delete(Z.pageIndex)}updateMode(Z,Se=null){if(l(this,M)!==Z){if(ve(this,M,Z),Z===n.AnnotationEditorType.NONE){this.setEditingState(!1),le(this,te,Pn).call(this);return}this.setEditingState(!0),le(this,te,wn).call(this),this.unselectAll();for(const Re of l(this,U).values())Re.updateMode(Z);if(Se){for(const Re of l(this,P).values())if(Re.annotationElementId===Se){this.setSelected(Re),Re.enterInEditMode();break}}}}updateToolbar(Z){Z!==l(this,M)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Z})}updateParams(Z,Se){if(l(this,ie)){if(Z===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Z);return}for(const Re of l(this,V))Re.updateParams(Z,Se);for(const Re of l(this,ie))Re.updateDefaultParams(Z,Se)}}enableWaiting(Z=!1){if(l(this,N)!==Z){ve(this,N,Z);for(const Se of l(this,U).values())Z?Se.disableClick():Se.enableClick(),Se.div.classList.toggle("waiting",Z)}}getEditors(Z){const Se=[];for(const Re of l(this,P).values())Re.pageIndex===Z&&Se.push(Re);return Se}getEditor(Z){return l(this,P).get(Z)}addEditor(Z){l(this,P).set(Z.id,Z)}removeEditor(Z){var Se;l(this,P).delete(Z.id),this.unselect(Z),(!Z.annotationElementId||!l(this,ue).has(Z.annotationElementId))&&((Se=l(this,se))==null||Se.remove(Z.id))}addDeletedAnnotationElement(Z){l(this,ue).add(Z.annotationElementId),Z.deleted=!0}isDeletedAnnotationElement(Z){return l(this,ue).has(Z)}removeDeletedAnnotationElement(Z){l(this,ue).delete(Z.annotationElementId),Z.deleted=!1}setActiveEditor(Z){l(this,f)!==Z&&(ve(this,f,Z),Z&&le(this,te,pt).call(this,Z.propertiesToUpdate))}toggleSelected(Z){if(l(this,V).has(Z)){l(this,V).delete(Z),Z.unselect(),le(this,te,nt).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,V).add(Z),Z.select(),le(this,te,pt).call(this,Z.propertiesToUpdate),le(this,te,nt).call(this,{hasSelectedEditor:!0})}setSelected(Z){for(const Se of l(this,V))Se!==Z&&Se.unselect();l(this,V).clear(),l(this,V).add(Z),Z.select(),le(this,te,pt).call(this,Z.propertiesToUpdate),le(this,te,nt).call(this,{hasSelectedEditor:!0})}isSelected(Z){return l(this,V).has(Z)}unselect(Z){Z.unselect(),l(this,V).delete(Z),le(this,te,nt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,V).size!==0}undo(){l(this,ae).undo(),le(this,te,nt).call(this,{hasSomethingToUndo:l(this,ae).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:le(this,te,gt).call(this)})}redo(){l(this,ae).redo(),le(this,te,nt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,ae).hasSomethingToRedo(),isEmpty:le(this,te,gt).call(this)})}addCommands(Z){l(this,ae).add(Z),le(this,te,nt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:le(this,te,gt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Z=[...l(this,V)],Se=()=>{for(const Be of Z)Be.remove()},Re=()=>{for(const Be of Z)le(this,te,qt).call(this,Be)};this.addCommands({cmd:Se,undo:Re,mustExec:!0})}commitOrRemove(){var Z;(Z=l(this,f))==null||Z.commitOrRemove()}hasSomethingToControl(){return l(this,f)||this.hasSelection}selectAll(){for(const Z of l(this,V))Z.commit();le(this,te,Kt).call(this,l(this,P).values())}unselectAll(){if(l(this,f)){l(this,f).commitOrRemove();return}if(this.hasSelection){for(const Z of l(this,V))Z.unselect();l(this,V).clear(),le(this,te,nt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Z,Se,Re=!1){if(Re||this.commitOrRemove(),!this.hasSelection)return;l(this,Q)[0]+=Z,l(this,Q)[1]+=Se;const[Be,Ue]=l(this,Q),Ie=[...l(this,V)],K=1e3;l(this,de)&&clearTimeout(l(this,de)),ve(this,de,setTimeout(()=>{ve(this,de,null),l(this,Q)[0]=l(this,Q)[1]=0,this.addCommands({cmd:()=>{for(const $ of Ie)l(this,P).has($.id)&&$.translateInPage(Be,Ue)},undo:()=>{for(const $ of Ie)l(this,P).has($.id)&&$.translateInPage(-Be,-Ue)},mustExec:!1})},K));for(const $ of Ie)$.translateInPage(Z,Se)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ve(this,W,new Map);for(const Z of l(this,V))l(this,W).set(Z,{savedX:Z.x,savedY:Z.y,savedPageIndex:Z.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,W))return!1;this.disableUserSelect(!1);const Z=l(this,W);ve(this,W,null);let Se=!1;for(const[{x:Be,y:Ue,pageIndex:Ie},K]of Z)K.newX=Be,K.newY=Ue,K.newPageIndex=Ie,Se||(Se=Be!==K.savedX||Ue!==K.savedY||Ie!==K.savedPageIndex);if(!Se)return!1;const Re=(Be,Ue,Ie,K)=>{if(l(this,P).has(Be.id)){const $=l(this,U).get(K);$?Be._setParentAndPosition($,Ue,Ie):(Be.pageIndex=K,Be.x=Ue,Be.y=Ie)}};return this.addCommands({cmd:()=>{for(const[Be,{newX:Ue,newY:Ie,newPageIndex:K}]of Z)Re(Be,Ue,Ie,K)},undo:()=>{for(const[Be,{savedX:Ue,savedY:Ie,savedPageIndex:K}]of Z)Re(Be,Ue,Ie,K)},mustExec:!0}),!0}dragSelectedEditors(Z,Se){if(l(this,W))for(const Re of l(this,W).keys())Re.drag(Z,Se)}rebuild(Z){if(Z.parent===null){const Se=this.getLayer(Z.pageIndex);Se?(Se.changeParent(Z),Se.addOrRebuild(Z)):(this.addEditor(Z),this.addToAnnotationStorage(Z),Z.rebuild())}else Z.parent.addOrRebuild(Z)}isActive(Z){return l(this,f)===Z}getActive(){return l(this,f)}getMode(){return l(this,M)}get imageManager(){return(0,n.shadow)(this,"imageManager",new c)}};f=new WeakMap,P=new WeakMap,U=new WeakMap,ce=new WeakMap,se=new WeakMap,ae=new WeakMap,ee=new WeakMap,ue=new WeakMap,W=new WeakMap,ie=new WeakMap,he=new WeakMap,j=new WeakMap,b=new WeakMap,A=new WeakMap,N=new WeakMap,z=new WeakMap,M=new WeakMap,V=new WeakMap,Y=new WeakMap,re=new WeakMap,ge=new WeakMap,D=new WeakMap,L=new WeakMap,q=new WeakMap,ne=new WeakMap,X=new WeakMap,G=new WeakMap,R=new WeakMap,B=new WeakMap,J=new WeakMap,Q=new WeakMap,de=new WeakMap,fe=new WeakMap,_e=new WeakMap,te=new WeakSet,Cn=function(){window.addEventListener("focus",l(this,ge)),window.addEventListener("blur",l(this,re))},$t=function(){window.removeEventListener("focus",l(this,ge)),window.removeEventListener("blur",l(this,re))},Wt=function(){window.addEventListener("keydown",l(this,ne),{capture:!0})},Et=function(){window.removeEventListener("keydown",l(this,ne),{capture:!0})},zt=function(){document.addEventListener("copy",l(this,D)),document.addEventListener("cut",l(this,L)),document.addEventListener("paste",l(this,q))},Gt=function(){document.removeEventListener("copy",l(this,D)),document.removeEventListener("cut",l(this,L)),document.removeEventListener("paste",l(this,q))},nt=function(Z){Object.entries(Z).some(([Re,Be])=>l(this,J)[Re]!==Be)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,J),Z)})},pt=function(Z){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Z})},wn=function(){if(!l(this,A)){ve(this,A,!0);for(const Z of l(this,U).values())Z.enable()}},Pn=function(){if(this.unselectAll(),l(this,A)){ve(this,A,!1);for(const Z of l(this,U).values())Z.disable()}},qt=function(Z){const Se=l(this,U).get(Z.pageIndex);Se?Se.addOrRebuild(Z):this.addEditor(Z)},gt=function(){if(l(this,P).size===0)return!0;if(l(this,P).size===1)for(const Z of l(this,P).values())return Z.isEmpty();return!1},Kt=function(Z){l(this,V).clear();for(const Se of Z)Se.isEmpty()||(l(this,V).add(Se),Se.select());le(this,te,nt).call(this,{hasSelectedEditor:!0})},Qe(Ke,"TRANSLATE_SMALL",1),Qe(Ke,"TRANSLATE_BIG",10);let C=Ke;t.AnnotationEditorUIManager=C},(e,t,s)=>{var ee,ue,W,ie,he,j,b,A,N,z,M,V,ct,dt,Xt,Tt,Ct,mt,_t;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=v,t.getColorValues=P,t.getCurrentTransform=U,t.getCurrentTransformInverse=ce,t.getFilenameFromUrl=T,t.getPdfFilenameFromUrl=k,t.getRGB=f,t.getXfaPageViewport=O,t.isDataScheme=F,t.isPdfFile=x,t.isValidFetchUrl=I,t.loadScript=E,t.noContextMenu=_,t.setLayerDimensions=se;var n=s(7),i=s(1);const o="http://www.w3.org/2000/svg",ae=class ae{};Qe(ae,"CSS",96),Qe(ae,"PDF",72),Qe(ae,"PDF_TO_CSS_UNITS",ae.CSS/ae.PDF);let r=ae;t.PixelsPerInch=r;class u extends n.BaseFilterFactory{constructor({docId:R,ownerDocument:B=globalThis.document}={}){super();me(this,V);me(this,ee);me(this,ue);me(this,W);me(this,ie);me(this,he);me(this,j);me(this,b);me(this,A);me(this,N);me(this,z);me(this,M,0);ve(this,W,R),ve(this,ie,B)}addFilter(R){if(!R)return"none";let B=l(this,V,ct).get(R);if(B)return B;let J,Q,de,fe;if(R.length===1){const Ce=R[0],Fe=new Array(256);for(let Ne=0;Ne<256;Ne++)Fe[Ne]=Ce[Ne]/255;fe=J=Q=de=Fe.join(",")}else{const[Ce,Fe,Ne]=R,je=new Array(256),ke=new Array(256),De=new Array(256);for(let ze=0;ze<256;ze++)je[ze]=Ce[ze]/255,ke[ze]=Fe[ze]/255,De[ze]=Ne[ze]/255;J=je.join(","),Q=ke.join(","),de=De.join(","),fe=`${J}${Q}${de}`}if(B=l(this,V,ct).get(fe),B)return l(this,V,ct).set(R,B),B;const _e=`g_${l(this,W)}_transfer_map_${ft(this,M)._++}`,te=`url(#${_e})`;l(this,V,ct).set(R,te),l(this,V,ct).set(fe,te);const Te=le(this,V,Tt).call(this,_e);return le(this,V,mt).call(this,J,Q,de,Te),te}addHCMFilter(R,B){var Fe;const J=`${R}-${B}`;if(l(this,j)===J)return l(this,b);if(ve(this,j,J),ve(this,b,"none"),(Fe=l(this,he))==null||Fe.remove(),!R||!B)return l(this,b);const Q=le(this,V,_t).call(this,R);R=i.Util.makeHexColor(...Q);const de=le(this,V,_t).call(this,B);if(B=i.Util.makeHexColor(...de),l(this,V,dt).style.color="",R==="#000000"&&B==="#ffffff"||R===B)return l(this,b);const fe=new Array(256);for(let Ne=0;Ne<=255;Ne++){const je=Ne/255;fe[Ne]=je<=.03928?je/12.92:((je+.055)/1.055)**2.4}const _e=fe.join(","),te=`g_${l(this,W)}_hcm_filter`,Te=ve(this,A,le(this,V,Tt).call(this,te));le(this,V,mt).call(this,_e,_e,_e,Te),le(this,V,Xt).call(this,Te);const Ce=(Ne,je)=>{const ke=Q[Ne]/255,De=de[Ne]/255,ze=new Array(je+1);for(let Xe=0;Xe<=je;Xe++)ze[Xe]=ke+Xe/je*(De-ke);return ze.join(",")};return le(this,V,mt).call(this,Ce(0,5),Ce(1,5),Ce(2,5),Te),ve(this,b,`url(#${te})`),l(this,b)}addHighlightHCMFilter(R,B,J,Q){var De;const de=`${R}-${B}-${J}-${Q}`;if(l(this,N)===de)return l(this,z);if(ve(this,N,de),ve(this,z,"none"),(De=l(this,A))==null||De.remove(),!R||!B)return l(this,z);const[fe,_e]=[R,B].map(le(this,V,_t).bind(this));let te=Math.round(.2126*fe[0]+.7152*fe[1]+.0722*fe[2]),Te=Math.round(.2126*_e[0]+.7152*_e[1]+.0722*_e[2]),[Ce,Fe]=[J,Q].map(le(this,V,_t).bind(this));Te<te&&([te,Te,Ce,Fe]=[Te,te,Fe,Ce]),l(this,V,dt).style.color="";const Ne=(ze,Xe,Ee)=>{const pe=new Array(256),be=(Te-te)/Ee,Me=ze/255,Ke=(Xe-ze)/(255*Ee);let qe=0;for(let Z=0;Z<=Ee;Z++){const Se=Math.round(te+Z*be),Re=Me+Z*Ke;for(let Be=qe;Be<=Se;Be++)pe[Be]=Re;qe=Se+1}for(let Z=qe;Z<256;Z++)pe[Z]=pe[qe-1];return pe.join(",")},je=`g_${l(this,W)}_hcm_highlight_filter`,ke=ve(this,A,le(this,V,Tt).call(this,je));return le(this,V,Xt).call(this,ke),le(this,V,mt).call(this,Ne(Ce[0],Fe[0],5),Ne(Ce[1],Fe[1],5),Ne(Ce[2],Fe[2],5),ke),ve(this,z,`url(#${je})`),l(this,z)}destroy(R=!1){R&&(l(this,b)||l(this,z))||(l(this,ue)&&(l(this,ue).parentNode.parentNode.remove(),ve(this,ue,null)),l(this,ee)&&(l(this,ee).clear(),ve(this,ee,null)),ve(this,M,0))}}ee=new WeakMap,ue=new WeakMap,W=new WeakMap,ie=new WeakMap,he=new WeakMap,j=new WeakMap,b=new WeakMap,A=new WeakMap,N=new WeakMap,z=new WeakMap,M=new WeakMap,V=new WeakSet,ct=function(){return l(this,ee)||ve(this,ee,new Map)},dt=function(){if(!l(this,ue)){const R=l(this,ie).createElement("div"),{style:B}=R;B.visibility="hidden",B.contain="strict",B.width=B.height=0,B.position="absolute",B.top=B.left=0,B.zIndex=-1;const J=l(this,ie).createElementNS(o,"svg");J.setAttribute("width",0),J.setAttribute("height",0),ve(this,ue,l(this,ie).createElementNS(o,"defs")),R.append(J),J.append(l(this,ue)),l(this,ie).body.append(R)}return l(this,ue)},Xt=function(R){const B=l(this,ie).createElementNS(o,"feColorMatrix");B.setAttribute("type","matrix"),B.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),R.append(B)},Tt=function(R){const B=l(this,ie).createElementNS(o,"filter");return B.setAttribute("color-interpolation-filters","sRGB"),B.setAttribute("id",R),l(this,V,dt).append(B),B},Ct=function(R,B,J){const Q=l(this,ie).createElementNS(o,B);Q.setAttribute("type","discrete"),Q.setAttribute("tableValues",J),R.append(Q)},mt=function(R,B,J,Q){const de=l(this,ie).createElementNS(o,"feComponentTransfer");Q.append(de),le(this,V,Ct).call(this,de,"feFuncR",R),le(this,V,Ct).call(this,de,"feFuncG",B),le(this,V,Ct).call(this,de,"feFuncB",J)},_t=function(R){return l(this,V,dt).style.color=R,f(getComputedStyle(l(this,V,dt)).getPropertyValue("color"))},t.DOMFilterFactory=u;class c extends n.BaseCanvasFactory{constructor({ownerDocument:G=globalThis.document}={}){super(),this._document=G}_createCanvas(G,R){const B=this._document.createElement("canvas");return B.width=G,B.height=R,B}}t.DOMCanvasFactory=c;async function d(X,G=!1){if(I(X,document.baseURI)){const R=await fetch(X);if(!R.ok)throw new Error(R.statusText);return G?new Uint8Array(await R.arrayBuffer()):(0,i.stringToBytes)(await R.text())}return new Promise((R,B)=>{const J=new XMLHttpRequest;J.open("GET",X,!0),G&&(J.responseType="arraybuffer"),J.onreadystatechange=()=>{if(J.readyState===XMLHttpRequest.DONE){if(J.status===200||J.status===0){let Q;if(G&&J.response?Q=new Uint8Array(J.response):!G&&J.responseText&&(Q=(0,i.stringToBytes)(J.responseText)),Q){R(Q);return}}B(new Error(J.statusText))}},J.send(null)})}class a extends n.BaseCMapReaderFactory{_fetchData(G,R){return d(G,this.isCompressed).then(B=>({cMapData:B,compressionType:R}))}}t.DOMCMapReaderFactory=a;class g extends n.BaseStandardFontDataFactory{_fetchData(G){return d(G,!0)}}t.DOMStandardFontDataFactory=g;class C extends n.BaseSVGFactory{_createSVG(G){return document.createElementNS(o,G)}}t.DOMSVGFactory=C;class y{constructor({viewBox:G,scale:R,rotation:B,offsetX:J=0,offsetY:Q=0,dontFlip:de=!1}){this.viewBox=G,this.scale=R,this.rotation=B,this.offsetX=J,this.offsetY=Q;const fe=(G[2]+G[0])/2,_e=(G[3]+G[1])/2;let te,Te,Ce,Fe;switch(B%=360,B<0&&(B+=360),B){case 180:te=-1,Te=0,Ce=0,Fe=1;break;case 90:te=0,Te=1,Ce=1,Fe=0;break;case 270:te=0,Te=-1,Ce=-1,Fe=0;break;case 0:te=1,Te=0,Ce=0,Fe=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}de&&(Ce=-Ce,Fe=-Fe);let Ne,je,ke,De;te===0?(Ne=Math.abs(_e-G[1])*R+J,je=Math.abs(fe-G[0])*R+Q,ke=(G[3]-G[1])*R,De=(G[2]-G[0])*R):(Ne=Math.abs(fe-G[0])*R+J,je=Math.abs(_e-G[1])*R+Q,ke=(G[2]-G[0])*R,De=(G[3]-G[1])*R),this.transform=[te*R,Te*R,Ce*R,Fe*R,Ne-te*R*fe-Ce*R*_e,je-Te*R*fe-Fe*R*_e],this.width=ke,this.height=De}get rawDims(){const{viewBox:G}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:G[2]-G[0],pageHeight:G[3]-G[1],pageX:G[0],pageY:G[1]})}clone({scale:G=this.scale,rotation:R=this.rotation,offsetX:B=this.offsetX,offsetY:J=this.offsetY,dontFlip:Q=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:G,rotation:R,offsetX:B,offsetY:J,dontFlip:Q})}convertToViewportPoint(G,R){return i.Util.applyTransform([G,R],this.transform)}convertToViewportRectangle(G){const R=i.Util.applyTransform([G[0],G[1]],this.transform),B=i.Util.applyTransform([G[2],G[3]],this.transform);return[R[0],R[1],B[0],B[1]]}convertToPdfPoint(G,R){return i.Util.applyInverseTransform([G,R],this.transform)}}t.PageViewport=y;class w extends i.BaseException{constructor(G,R=0){super(G,"RenderingCancelledException"),this.extraDelay=R}}t.RenderingCancelledException=w;function F(X){const G=X.length;let R=0;for(;R<G&&X[R].trim()==="";)R++;return X.substring(R,R+5).toLowerCase()==="data:"}function x(X){return typeof X=="string"&&/\.pdf$/i.test(X)}function T(X,G=!1){return G||([X]=X.split(/[#?]/,1)),X.substring(X.lastIndexOf("/")+1)}function k(X,G="document.pdf"){if(typeof X!="string")return G;if(F(X))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),G;const R=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,B=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,J=R.exec(X);let Q=B.exec(J[1])||B.exec(J[2])||B.exec(J[3]);if(Q&&(Q=Q[0],Q.includes("%")))try{Q=B.exec(decodeURIComponent(Q))[0]}catch{}return Q||G}class H{constructor(){Qe(this,"started",Object.create(null));Qe(this,"times",[])}time(G){G in this.started&&(0,i.warn)(`Timer is already running for ${G}`),this.started[G]=Date.now()}timeEnd(G){G in this.started||(0,i.warn)(`Timer has not been started for ${G}`),this.times.push({name:G,start:this.started[G],end:Date.now()}),delete this.started[G]}toString(){const G=[];let R=0;for(const{name:B}of this.times)R=Math.max(B.length,R);for(const{name:B,start:J,end:Q}of this.times)G.push(`${B.padEnd(R)} ${Q-J}ms
`);return G.join("")}}t.StatTimer=H;function I(X,G){try{const{protocol:R}=G?new URL(X,G):new URL(X);return R==="http:"||R==="https:"}catch{return!1}}function _(X){X.preventDefault()}function E(X,G=!1){return new Promise((R,B)=>{const J=document.createElement("script");J.src=X,J.onload=function(Q){G&&J.remove(),R(Q)},J.onerror=function(){B(new Error(`Cannot load script at: ${J.src}`))},(document.head||document.documentElement).append(J)})}function v(X){console.log("Deprecated API usage: "+X)}let S;class m{static toDateObject(G){if(!G||typeof G!="string")return null;S||(S=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const R=S.exec(G);if(!R)return null;const B=parseInt(R[1],10);let J=parseInt(R[2],10);J=J>=1&&J<=12?J-1:0;let Q=parseInt(R[3],10);Q=Q>=1&&Q<=31?Q:1;let de=parseInt(R[4],10);de=de>=0&&de<=23?de:0;let fe=parseInt(R[5],10);fe=fe>=0&&fe<=59?fe:0;let _e=parseInt(R[6],10);_e=_e>=0&&_e<=59?_e:0;const te=R[7]||"Z";let Te=parseInt(R[8],10);Te=Te>=0&&Te<=23?Te:0;let Ce=parseInt(R[9],10)||0;return Ce=Ce>=0&&Ce<=59?Ce:0,te==="-"?(de+=Te,fe+=Ce):te==="+"&&(de-=Te,fe-=Ce),new Date(Date.UTC(B,J,Q,de,fe,_e))}}t.PDFDateString=m;function O(X,{scale:G=1,rotation:R=0}){const{width:B,height:J}=X.attributes.style,Q=[0,0,parseInt(B),parseInt(J)];return new y({viewBox:Q,scale:G,rotation:R})}function f(X){if(X.startsWith("#")){const G=parseInt(X.slice(1),16);return[(G&16711680)>>16,(G&65280)>>8,G&255]}return X.startsWith("rgb(")?X.slice(4,-1).split(",").map(G=>parseInt(G)):X.startsWith("rgba(")?X.slice(5,-1).split(",").map(G=>parseInt(G)).slice(0,3):((0,i.warn)(`Not a valid color format: "${X}"`),[0,0,0])}function P(X){const G=document.createElement("span");G.style.visibility="hidden",document.body.append(G);for(const R of X.keys()){G.style.color=R;const B=window.getComputedStyle(G).color;X.set(R,f(B))}G.remove()}function U(X){const{a:G,b:R,c:B,d:J,e:Q,f:de}=X.getTransform();return[G,R,B,J,Q,de]}function ce(X){const{a:G,b:R,c:B,d:J,e:Q,f:de}=X.getTransform().invertSelf();return[G,R,B,J,Q,de]}function se(X,G,R=!1,B=!0){if(G instanceof y){const{pageWidth:J,pageHeight:Q}=G.rawDims,{style:de}=X,fe=i.FeatureTest.isCSSRoundSupported,_e=`var(--scale-factor) * ${J}px`,te=`var(--scale-factor) * ${Q}px`,Te=fe?`round(${_e}, 1px)`:`calc(${_e})`,Ce=fe?`round(${te}, 1px)`:`calc(${te})`;!R||G.rotation%180===0?(de.width=Te,de.height=Ce):(de.width=Ce,de.height=Te)}B&&X.setAttribute("data-main-rotation",G.rotation)}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=s(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(a){return"none"}addHCMFilter(a,g){return"none"}addHighlightHCMFilter(a,g,C,y){return"none"}destroy(a=!1){}}t.BaseFilterFactory=i;class o{constructor(){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(a,g){if(a<=0||g<=0)throw new Error("Invalid canvas size");const C=this._createCanvas(a,g);return{canvas:C,context:C.getContext("2d")}}reset(a,g,C){if(!a.canvas)throw new Error("Canvas is not specified");if(g<=0||C<=0)throw new Error("Invalid canvas size");a.canvas.width=g,a.canvas.height=C}destroy(a){if(!a.canvas)throw new Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}_createCanvas(a,g){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=o;class r{constructor({baseUrl:a=null,isCompressed:g=!0}){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=g}async fetch({name:a}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw new Error("CMap name must be specified.");const g=this.baseUrl+a+(this.isCompressed?".bcmap":""),C=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(g,C).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${g}`)})}_fetchData(a,g){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=r;class u{constructor({baseUrl:a=null}){this.constructor===u&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=a}async fetch({filename:a}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!a)throw new Error("Font filename must be specified.");const g=`${this.baseUrl}${a}`;return this._fetchData(g).catch(C=>{throw new Error(`Unable to load font data at: ${g}`)})}_fetchData(a){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=u;class c{constructor(){this.constructor===c&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(a,g,C=!1){if(a<=0||g<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),C||(y.setAttribute("width",`${a}px`),y.setAttribute("height",`${g}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${a} ${g}`),y}createElement(a){if(typeof a!="string")throw new Error("Invalid SVG element type");return this._createSVG(a)}_createSVG(a){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=c},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,o=4294901760,r=65535;class u{constructor(d){this.h1=d?d&4294967295:i,this.h2=d?d&4294967295:i}update(d){let a,g;if(typeof d=="string"){a=new Uint8Array(d.length*2),g=0;for(let v=0,S=d.length;v<S;v++){const m=d.charCodeAt(v);m<=255?a[g++]=m:(a[g++]=m>>>8,a[g++]=m&255)}}else if((0,n.isArrayBuffer)(d))a=d.slice(),g=a.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const C=g>>2,y=g-C*4,w=new Uint32Array(a.buffer,0,C);let F=0,x=0,T=this.h1,k=this.h2;const H=3432918353,I=461845907,_=H&r,E=I&r;for(let v=0;v<C;v++)v&1?(F=w[v],F=F*H&o|F*_&r,F=F<<15|F>>>17,F=F*I&o|F*E&r,T^=F,T=T<<13|T>>>19,T=T*5+3864292196):(x=w[v],x=x*H&o|x*_&r,x=x<<15|x>>>17,x=x*I&o|x*E&r,k^=x,k=k<<13|k>>>19,k=k*5+3864292196);switch(F=0,y){case 3:F^=a[C*4+2]<<16;case 2:F^=a[C*4+1]<<8;case 1:F^=a[C*4],F=F*H&o|F*_&r,F=F<<15|F>>>17,F=F*I&o|F*E&r,C&1?T^=F:k^=F}this.h1=T,this.h2=k}hexdigest(){let d=this.h1,a=this.h2;return d^=a>>>1,d=d*3981806797&o|d*36045&r,a=a*4283543511&o|((a<<16|d>>>16)*2950163797&o)>>>16,d^=a>>>1,d=d*444984403&o|d*60499&r,a=a*3301882366&o|((a<<16|d>>>16)*3120437893&o)>>>16,d^=a>>>1,(d>>>0).toString(16).padStart(8,"0")+(a>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=u},(e,t,s)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=s(1);class i{constructor({ownerDocument:c=globalThis.document,styleElement:d=null}){me(this,r,new Set);this._document=c,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(c){this.nativeFontFaces.add(c),this._document.fonts.add(c)}removeNativeFontFace(c){this.nativeFontFaces.delete(c),this._document.fonts.delete(c)}insertRule(c){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const d=this.styleElement.sheet;d.insertRule(c,d.cssRules.length)}clear(){for(const c of this.nativeFontFaces)this._document.fonts.delete(c);this.nativeFontFaces.clear(),l(this,r).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(c){if(!(!c||l(this,r).has(c.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:d,src:a,style:g}=c,C=new FontFace(d,a,g);this.addNativeFontFace(C);try{await C.load(),l(this,r).add(d)}catch{(0,n.warn)(`Cannot load system font: ${c.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(C)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(c){if(c.attached||c.missingFile&&!c.systemFontInfo)return;if(c.attached=!0,c.systemFontInfo){await this.loadSystemFont(c.systemFontInfo);return}if(this.isFontLoadingAPISupported){const a=c.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(g){throw(0,n.warn)(`Failed to load font '${a.family}': '${g}'.`),c.disableFontFace=!0,g}}return}const d=c.createFontFaceRule();if(d){if(this.insertRule(d),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const g=this._queueLoadingCallback(a);this._prepareFontLoadEvent(c,g)})}}get isFontLoadingAPISupported(){var d;const c=!!((d=this._document)!=null&&d.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",c)}get isSyncFontLoadingSupported(){let c=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(c=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",c)}_queueLoadingCallback(c){function d(){for((0,n.assert)(!g.done,"completeRequest() cannot be called twice."),g.done=!0;a.length>0&&a[0].done;){const C=a.shift();setTimeout(C.callback,0)}}const{loadingRequests:a}=this,g={done:!1,complete:d,callback:c};return a.push(g),g}get _loadTestFont(){const c=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",c)}_prepareFontLoadEvent(c,d){function a(f,P){return f.charCodeAt(P)<<24|f.charCodeAt(P+1)<<16|f.charCodeAt(P+2)<<8|f.charCodeAt(P+3)&255}function g(f,P,U,ce){const se=f.substring(0,P),ae=f.substring(P+U);return se+ce+ae}let C,y;const w=this._document.createElement("canvas");w.width=1,w.height=1;const F=w.getContext("2d");let x=0;function T(f,P){if(++x>30){(0,n.warn)("Load test font never loaded."),P();return}if(F.font="30px "+f,F.fillText(".",0,20),F.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(T.bind(null,f,P))}const k=`lt${Date.now()}${this.loadTestFontId++}`;let H=this._loadTestFont;H=g(H,976,k.length,k);const _=16,E=1482184792;let v=a(H,_);for(C=0,y=k.length-3;C<y;C+=4)v=v-E+a(k,C)|0;C<k.length&&(v=v-E+a(k+"XXX",C)|0),H=g(H,_,4,(0,n.string32)(v));const S=`url(data:font/opentype;base64,${btoa(H)});`,m=`@font-face {font-family:"${k}";src:${S}}`;this.insertRule(m);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const f of[c.loadedName,k]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=f,O.append(P)}this._document.body.append(O),T(k,()=>{O.remove(),d.complete()})}}r=new WeakMap,t.FontLoader=i;class o{constructor(c,{isEvalSupported:d=!0,disableFontFace:a=!1,ignoreErrors:g=!1,inspectFont:C=null}){this.compiledGlyphs=Object.create(null);for(const y in c)this[y]=c[y];this.isEvalSupported=d!==!1,this.disableFontFace=a===!0,this.ignoreErrors=g===!0,this._inspectFont=C}createNativeFontFace(){var d;if(!this.data||this.disableFontFace)return null;let c;if(!this.cssFontInfo)c=new FontFace(this.loadedName,this.data,{});else{const a={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(a.style=`oblique ${this.cssFontInfo.italicAngle}deg`),c=new FontFace(this.cssFontInfo.fontFamily,this.data,a)}return(d=this._inspectFont)==null||d.call(this,this),c}createFontFaceRule(){var g;if(!this.data||this.disableFontFace)return null;const c=(0,n.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(c)});`;let a;if(!this.cssFontInfo)a=`@font-face {font-family:"${this.loadedName}";src:${d}}`;else{let C=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(C+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${C}src:${d}}`}return(g=this._inspectFont)==null||g.call(this,this,d),a}getPathGenerator(c,d){if(this.compiledGlyphs[d]!==void 0)return this.compiledGlyphs[d];let a;try{a=c.get(this.loadedName+"_path_"+d)}catch(g){if(!this.ignoreErrors)throw g;return(0,n.warn)(`getPathGenerator - ignoring character: "${g}".`),this.compiledGlyphs[d]=function(C,y){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const g=[];for(const C of a){const y=C.args!==void 0?C.args.join(","):"";g.push("c.",C.cmd,"(",y,`);
`)}return this.compiledGlyphs[d]=new Function("c","size",g.join(""))}return this.compiledGlyphs[d]=function(g,C){for(const y of a)y.cmd==="scale"&&(y.args=[C,-C]),g[y.cmd].apply(g,y.args)}}}t.FontFaceObject=o},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=s(7);s(1);const i=function(d){return new Promise((a,g)=>{require$$5.readFile(d,(y,w)=>{if(y||!w){g(new Error(y));return}a(new Uint8Array(w))})})};class o extends n.BaseFilterFactory{}t.NodeFilterFactory=o;class r extends n.BaseCanvasFactory{_createCanvas(a,g){return require$$5.createCanvas(a,g)}}t.NodeCanvasFactory=r;class u extends n.BaseCMapReaderFactory{_fetchData(a,g){return i(a).then(C=>({cMapData:C,compressionType:g}))}}t.NodeCMapReaderFactory=u;class c extends n.BaseStandardFontDataFactory{_fetchData(a){return i(a)}}t.NodeStandardFontDataFactory=c},(e,t,s)=>{var ue,Yt,Jt;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=s(1),i=s(6),o=s(12),r=s(13);const u=16,c=100,d=4096,a=15,g=10,C=1e3,y=16;function w(j,b){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){b.save(),this.__originalSave()},j.restore=function(){b.restore(),this.__originalRestore()},j.translate=function(N,z){b.translate(N,z),this.__originalTranslate(N,z)},j.scale=function(N,z){b.scale(N,z),this.__originalScale(N,z)},j.transform=function(N,z,M,V,Y,re){b.transform(N,z,M,V,Y,re),this.__originalTransform(N,z,M,V,Y,re)},j.setTransform=function(N,z,M,V,Y,re){b.setTransform(N,z,M,V,Y,re),this.__originalSetTransform(N,z,M,V,Y,re)},j.resetTransform=function(){b.resetTransform(),this.__originalResetTransform()},j.rotate=function(N){b.rotate(N),this.__originalRotate(N)},j.clip=function(N){b.clip(N),this.__originalClip(N)},j.moveTo=function(A,N){b.moveTo(A,N),this.__originalMoveTo(A,N)},j.lineTo=function(A,N){b.lineTo(A,N),this.__originalLineTo(A,N)},j.bezierCurveTo=function(A,N,z,M,V,Y){b.bezierCurveTo(A,N,z,M,V,Y),this.__originalBezierCurveTo(A,N,z,M,V,Y)},j.rect=function(A,N,z,M){b.rect(A,N,z,M),this.__originalRect(A,N,z,M)},j.closePath=function(){b.closePath(),this.__originalClosePath()},j.beginPath=function(){b.beginPath(),this.__originalBeginPath()}}class F{constructor(b){this.canvasFactory=b,this.cache=Object.create(null)}getCanvas(b,A,N){let z;return this.cache[b]!==void 0?(z=this.cache[b],this.canvasFactory.reset(z,A,N)):(z=this.canvasFactory.create(A,N),this.cache[b]=z),z}delete(b){delete this.cache[b]}clear(){for(const b in this.cache){const A=this.cache[b];this.canvasFactory.destroy(A),delete this.cache[b]}}}function x(j,b,A,N,z,M,V,Y,re,ge){const[D,L,q,ne,X,G]=(0,i.getCurrentTransform)(j);if(L===0&&q===0){const J=V*D+X,Q=Math.round(J),de=Y*ne+G,fe=Math.round(de),_e=(V+re)*D+X,te=Math.abs(Math.round(_e)-Q)||1,Te=(Y+ge)*ne+G,Ce=Math.abs(Math.round(Te)-fe)||1;return j.setTransform(Math.sign(D),0,0,Math.sign(ne),Q,fe),j.drawImage(b,A,N,z,M,0,0,te,Ce),j.setTransform(D,L,q,ne,X,G),[te,Ce]}if(D===0&&ne===0){const J=Y*q+X,Q=Math.round(J),de=V*L+G,fe=Math.round(de),_e=(Y+ge)*q+X,te=Math.abs(Math.round(_e)-Q)||1,Te=(V+re)*L+G,Ce=Math.abs(Math.round(Te)-fe)||1;return j.setTransform(0,Math.sign(L),Math.sign(q),0,Q,fe),j.drawImage(b,A,N,z,M,0,0,Ce,te),j.setTransform(D,L,q,ne,X,G),[Ce,te]}j.drawImage(b,A,N,z,M,V,Y,re,ge);const R=Math.hypot(D,L),B=Math.hypot(q,ne);return[R*re,B*ge]}function T(j){const{width:b,height:A}=j;if(b>C||A>C)return null;const N=1e3,z=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),M=b+1;let V=new Uint8Array(M*(A+1)),Y,re,ge;const D=b+7&-8;let L=new Uint8Array(D*A),q=0;for(const B of j.data){let J=128;for(;J>0;)L[q++]=B&J?0:255,J>>=1}let ne=0;for(q=0,L[q]!==0&&(V[0]=1,++ne),re=1;re<b;re++)L[q]!==L[q+1]&&(V[re]=L[q]?2:1,++ne),q++;for(L[q]!==0&&(V[re]=2,++ne),Y=1;Y<A;Y++){q=Y*D,ge=Y*M,L[q-D]!==L[q]&&(V[ge]=L[q]?1:8,++ne);let B=(L[q]?4:0)+(L[q-D]?8:0);for(re=1;re<b;re++)B=(B>>2)+(L[q+1]?4:0)+(L[q-D+1]?8:0),z[B]&&(V[ge+re]=z[B],++ne),q++;if(L[q-D]!==L[q]&&(V[ge+re]=L[q]?2:4,++ne),ne>N)return null}for(q=D*(A-1),ge=Y*M,L[q]!==0&&(V[ge]=8,++ne),re=1;re<b;re++)L[q]!==L[q+1]&&(V[ge+re]=L[q]?4:8,++ne),q++;if(L[q]!==0&&(V[ge+re]=4,++ne),ne>N)return null;const X=new Int32Array([0,M,-1,0,-M,0,0,0,1]),G=new Path2D;for(Y=0;ne&&Y<=A;Y++){let B=Y*M;const J=B+b;for(;B<J&&!V[B];)B++;if(B===J)continue;G.moveTo(B%M,Y);const Q=B;let de=V[B];do{const fe=X[de];do B+=fe;while(!V[B]);const _e=V[B];_e!==5&&_e!==10?(de=_e,V[B]=0):(de=_e&51*de>>4,V[B]&=de>>2|de<<2),G.lineTo(B%M,B/M|0),V[B]||--ne}while(Q!==B);--Y}return L=null,V=null,function(B){B.save(),B.scale(1/b,-1/A),B.translate(0,-A),B.fill(G),B.beginPath(),B.restore()}}class k{constructor(b,A){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,b,A])}clone(){const b=Object.create(this);return b.clipBox=this.clipBox.slice(),b}setCurrentPoint(b,A){this.x=b,this.y=A}updatePathMinMax(b,A,N){[A,N]=n.Util.applyTransform([A,N],b),this.minX=Math.min(this.minX,A),this.minY=Math.min(this.minY,N),this.maxX=Math.max(this.maxX,A),this.maxY=Math.max(this.maxY,N)}updateRectMinMax(b,A){const N=n.Util.applyTransform(A,b),z=n.Util.applyTransform(A.slice(2),b);this.minX=Math.min(this.minX,N[0],z[0]),this.minY=Math.min(this.minY,N[1],z[1]),this.maxX=Math.max(this.maxX,N[0],z[0]),this.maxY=Math.max(this.maxY,N[1],z[1])}updateScalingPathMinMax(b,A){n.Util.scaleMinMax(b,A),this.minX=Math.min(this.minX,A[0]),this.maxX=Math.max(this.maxX,A[1]),this.minY=Math.min(this.minY,A[2]),this.maxY=Math.max(this.maxY,A[3])}updateCurvePathMinMax(b,A,N,z,M,V,Y,re,ge,D){const L=n.Util.bezierBoundingBox(A,N,z,M,V,Y,re,ge);if(D){D[0]=Math.min(D[0],L[0],L[2]),D[1]=Math.max(D[1],L[0],L[2]),D[2]=Math.min(D[2],L[1],L[3]),D[3]=Math.max(D[3],L[1],L[3]);return}this.updateRectMinMax(b,L)}getPathBoundingBox(b=o.PathType.FILL,A=null){const N=[this.minX,this.minY,this.maxX,this.maxY];if(b===o.PathType.STROKE){A||(0,n.unreachable)("Stroke bounding box must include transform.");const z=n.Util.singularValueDecompose2dScale(A),M=z[0]*this.lineWidth/2,V=z[1]*this.lineWidth/2;N[0]-=M,N[1]-=V,N[2]+=M,N[3]+=V}return N}updateClipFromPath(){const b=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(b||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(b){this.clipBox=b,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(b=o.PathType.FILL,A=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(b,A))}}function H(j,b){if(typeof ImageData<"u"&&b instanceof ImageData){j.putImageData(b,0,0);return}const A=b.height,N=b.width,z=A%y,M=(A-z)/y,V=z===0?M:M+1,Y=j.createImageData(N,y);let re=0,ge;const D=b.data,L=Y.data;let q,ne,X,G;if(b.kind===n.ImageKind.GRAYSCALE_1BPP){const R=D.byteLength,B=new Uint32Array(L.buffer,0,L.byteLength>>2),J=B.length,Q=N+7>>3,de=4294967295,fe=n.FeatureTest.isLittleEndian?4278190080:255;for(q=0;q<V;q++){for(X=q<M?y:z,ge=0,ne=0;ne<X;ne++){const _e=R-re;let te=0;const Te=_e>Q?N:_e*8-7,Ce=Te&-8;let Fe=0,Ne=0;for(;te<Ce;te+=8)Ne=D[re++],B[ge++]=Ne&128?de:fe,B[ge++]=Ne&64?de:fe,B[ge++]=Ne&32?de:fe,B[ge++]=Ne&16?de:fe,B[ge++]=Ne&8?de:fe,B[ge++]=Ne&4?de:fe,B[ge++]=Ne&2?de:fe,B[ge++]=Ne&1?de:fe;for(;te<Te;te++)Fe===0&&(Ne=D[re++],Fe=128),B[ge++]=Ne&Fe?de:fe,Fe>>=1}for(;ge<J;)B[ge++]=0;j.putImageData(Y,0,q*y)}}else if(b.kind===n.ImageKind.RGBA_32BPP){for(ne=0,G=N*y*4,q=0;q<M;q++)L.set(D.subarray(re,re+G)),re+=G,j.putImageData(Y,0,ne),ne+=y;q<V&&(G=N*z*4,L.set(D.subarray(re,re+G)),j.putImageData(Y,0,ne))}else if(b.kind===n.ImageKind.RGB_24BPP)for(X=y,G=N*X,q=0;q<V;q++){for(q>=M&&(X=z,G=N*X),ge=0,ne=G;ne--;)L[ge++]=D[re++],L[ge++]=D[re++],L[ge++]=D[re++],L[ge++]=255;j.putImageData(Y,0,q*y)}else throw new Error(`bad image kind: ${b.kind}`)}function I(j,b){if(b.bitmap){j.drawImage(b.bitmap,0,0);return}const A=b.height,N=b.width,z=A%y,M=(A-z)/y,V=z===0?M:M+1,Y=j.createImageData(N,y);let re=0;const ge=b.data,D=Y.data;for(let L=0;L<V;L++){const q=L<M?y:z;({srcPos:re}=(0,r.convertBlackAndWhiteToRGBA)({src:ge,srcPos:re,dest:D,width:N,height:q,nonBlackColor:0})),j.putImageData(Y,0,L*y)}}function _(j,b){const A=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const N of A)j[N]!==void 0&&(b[N]=j[N]);j.setLineDash!==void 0&&(b.setLineDash(j.getLineDash()),b.lineDashOffset=j.lineDashOffset)}function E(j){if(j.strokeStyle=j.fillStyle="#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",j.setLineDash!==void 0&&(j.setLineDash([]),j.lineDashOffset=0),!n.isNodeJS){const{filter:b}=j;b!=="none"&&b!==""&&(j.filter="none")}}function v(j,b,A,N){const z=j.length;for(let M=3;M<z;M+=4){const V=j[M];if(V===0)j[M-3]=b,j[M-2]=A,j[M-1]=N;else if(V<255){const Y=255-V;j[M-3]=j[M-3]*V+b*Y>>8,j[M-2]=j[M-2]*V+A*Y>>8,j[M-1]=j[M-1]*V+N*Y>>8}}}function S(j,b,A){const N=j.length,z=1/255;for(let M=3;M<N;M+=4){const V=A?A[j[M]]:j[M];b[M]=b[M]*V*z|0}}function m(j,b,A){const N=j.length;for(let z=3;z<N;z+=4){const M=j[z-3]*77+j[z-2]*152+j[z-1]*28;b[z]=A?b[z]*A[M>>8]>>8:b[z]*M>>16}}function O(j,b,A,N,z,M,V,Y,re,ge,D){const L=!!M,q=L?M[0]:0,ne=L?M[1]:0,X=L?M[2]:0,G=z==="Luminosity"?m:S,B=Math.min(N,Math.ceil(1048576/A));for(let J=0;J<N;J+=B){const Q=Math.min(B,N-J),de=j.getImageData(Y-ge,J+(re-D),A,Q),fe=b.getImageData(Y,J+re,A,Q);L&&v(de.data,q,ne,X),G(de.data,fe.data,V),b.putImageData(fe,Y,J+re)}}function f(j,b,A,N){const z=N[0],M=N[1],V=N[2]-z,Y=N[3]-M;V===0||Y===0||(O(b.context,A,V,Y,b.subtype,b.backdrop,b.transferMap,z,M,b.offsetX,b.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(A.canvas,0,0),j.restore())}function P(j,b){const A=n.Util.singularValueDecompose2dScale(j);A[0]=Math.fround(A[0]),A[1]=Math.fround(A[1]);const N=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return b!==void 0?b:A[0]<=N||A[1]<=N}const U=["butt","round","square"],ce=["miter","round","bevel"],se={},ae={},he=class he{constructor(b,A,N,z,M,{optionalContentConfig:V,markedContentStack:Y=null},re,ge){me(this,ue);this.ctx=b,this.current=new k(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=A,this.objs=N,this.canvasFactory=z,this.filterFactory=M,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Y||[],this.optionalContentConfig=V,this.cachedCanvases=new F(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=re,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=ge,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(b,A=null){return typeof b=="string"?b.startsWith("g_")?this.commonObjs.get(b):this.objs.get(b):A}beginDrawing({transform:b,viewport:A,transparency:N=!1,background:z=null}){const M=this.ctx.canvas.width,V=this.ctx.canvas.height,Y=this.ctx.fillStyle;if(this.ctx.fillStyle=z||"#ffffff",this.ctx.fillRect(0,0,M,V),this.ctx.fillStyle=Y,N){const re=this.cachedCanvases.getCanvas("transparent",M,V);this.compositeCtx=this.ctx,this.transparentCanvas=re.canvas,this.ctx=re.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),E(this.ctx),b&&(this.ctx.transform(...b),this.outputScaleX=b[0],this.outputScaleY=b[0]),this.ctx.transform(...A.transform),this.viewportScale=A.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(b,A,N,z){const M=b.argsArray,V=b.fnArray;let Y=A||0;const re=M.length;if(re===Y)return Y;const ge=re-Y>g&&typeof N=="function",D=ge?Date.now()+a:0;let L=0;const q=this.commonObjs,ne=this.objs;let X;for(;;){if(z!==void 0&&Y===z.nextBreakPoint)return z.breakIt(Y,N),Y;if(X=V[Y],X!==n.OPS.dependency)this[X].apply(this,M[Y]);else for(const G of M[Y]){const R=G.startsWith("g_")?q:ne;if(!R.has(G))return R.get(G,N),Y}if(Y++,Y===re)return Y;if(ge&&++L>g){if(Date.now()>D)return N(),Y;L=0}}}endDrawing(){le(this,ue,Yt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const b of this._cachedBitmapsMap.values()){for(const A of b.values())typeof HTMLCanvasElement<"u"&&A instanceof HTMLCanvasElement&&(A.width=A.height=0);b.clear()}this._cachedBitmapsMap.clear(),le(this,ue,Jt).call(this)}_scaleImage(b,A){const N=b.width,z=b.height;let M=Math.max(Math.hypot(A[0],A[1]),1),V=Math.max(Math.hypot(A[2],A[3]),1),Y=N,re=z,ge="prescale1",D,L;for(;M>2&&Y>1||V>2&&re>1;){let q=Y,ne=re;M>2&&Y>1&&(q=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y/2),M/=Y/q),V>2&&re>1&&(ne=re>=16384?Math.floor(re/2)-1||1:Math.ceil(re)/2,V/=re/ne),D=this.cachedCanvases.getCanvas(ge,q,ne),L=D.context,L.clearRect(0,0,q,ne),L.drawImage(b,0,0,Y,re,0,0,q,ne),b=D.canvas,Y=q,re=ne,ge=ge==="prescale1"?"prescale2":"prescale1"}return{img:b,paintWidth:Y,paintHeight:re}}_createMaskCanvas(b){const A=this.ctx,{width:N,height:z}=b,M=this.current.fillColor,V=this.current.patternFill,Y=(0,i.getCurrentTransform)(A);let re,ge,D,L;if((b.bitmap||b.data)&&b.count>1){const te=b.bitmap||b.data.buffer;ge=JSON.stringify(V?Y:[Y.slice(0,4),M]),re=this._cachedBitmapsMap.get(te),re||(re=new Map,this._cachedBitmapsMap.set(te,re));const Te=re.get(ge);if(Te&&!V){const Ce=Math.round(Math.min(Y[0],Y[2])+Y[4]),Fe=Math.round(Math.min(Y[1],Y[3])+Y[5]);return{canvas:Te,offsetX:Ce,offsetY:Fe}}D=Te}D||(L=this.cachedCanvases.getCanvas("maskCanvas",N,z),I(L.context,b));let q=n.Util.transform(Y,[1/N,0,0,-1/z,0,0]);q=n.Util.transform(q,[1,0,0,1,0,-z]);const ne=n.Util.applyTransform([0,0],q),X=n.Util.applyTransform([N,z],q),G=n.Util.normalizeRect([ne[0],ne[1],X[0],X[1]]),R=Math.round(G[2]-G[0])||1,B=Math.round(G[3]-G[1])||1,J=this.cachedCanvases.getCanvas("fillCanvas",R,B),Q=J.context,de=Math.min(ne[0],X[0]),fe=Math.min(ne[1],X[1]);Q.translate(-de,-fe),Q.transform(...q),D||(D=this._scaleImage(L.canvas,(0,i.getCurrentTransformInverse)(Q)),D=D.img,re&&V&&re.set(ge,D)),Q.imageSmoothingEnabled=P((0,i.getCurrentTransform)(Q),b.interpolate),x(Q,D,0,0,D.width,D.height,0,0,N,z),Q.globalCompositeOperation="source-in";const _e=n.Util.transform((0,i.getCurrentTransformInverse)(Q),[1,0,0,1,-de,-fe]);return Q.fillStyle=V?M.getPattern(A,this,_e,o.PathType.FILL):M,Q.fillRect(0,0,N,z),re&&!V&&(this.cachedCanvases.delete("fillCanvas"),re.set(ge,J.canvas)),{canvas:J.canvas,offsetX:Math.round(de),offsetY:Math.round(fe)}}setLineWidth(b){b!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=b,this.ctx.lineWidth=b}setLineCap(b){this.ctx.lineCap=U[b]}setLineJoin(b){this.ctx.lineJoin=ce[b]}setMiterLimit(b){this.ctx.miterLimit=b}setDash(b,A){const N=this.ctx;N.setLineDash!==void 0&&(N.setLineDash(b),N.lineDashOffset=A)}setRenderingIntent(b){}setFlatness(b){}setGState(b){for(const[A,N]of b)switch(A){case"LW":this.setLineWidth(N);break;case"LC":this.setLineCap(N);break;case"LJ":this.setLineJoin(N);break;case"ML":this.setMiterLimit(N);break;case"D":this.setDash(N[0],N[1]);break;case"RI":this.setRenderingIntent(N);break;case"FL":this.setFlatness(N);break;case"Font":this.setFont(N[0],N[1]);break;case"CA":this.current.strokeAlpha=N;break;case"ca":this.current.fillAlpha=N,this.ctx.globalAlpha=N;break;case"BM":this.ctx.globalCompositeOperation=N;break;case"SMask":this.current.activeSMask=N?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(N);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const b=this.inSMaskMode;this.current.activeSMask&&!b?this.beginSMaskMode():!this.current.activeSMask&&b&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const b=this.ctx.canvas.width,A=this.ctx.canvas.height,N="smaskGroupAt"+this.groupLevel,z=this.cachedCanvases.getCanvas(N,b,A);this.suspendedCtx=this.ctx,this.ctx=z.context;const M=this.ctx;M.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),_(this.suspendedCtx,M),w(M,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(b){if(!this.current.activeSMask)return;b?(b[0]=Math.floor(b[0]),b[1]=Math.floor(b[1]),b[2]=Math.ceil(b[2]),b[3]=Math.ceil(b[3])):b=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const A=this.current.activeSMask,N=this.suspendedCtx;f(N,A,this.ctx,b),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(_(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const b=this.current;this.stateStack.push(b),this.current=b.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),_(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(b,A,N,z,M,V){this.ctx.transform(b,A,N,z,M,V),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(b,A,N){const z=this.ctx,M=this.current;let V=M.x,Y=M.y,re,ge;const D=(0,i.getCurrentTransform)(z),L=D[0]===0&&D[3]===0||D[1]===0&&D[2]===0,q=L?N.slice(0):null;for(let ne=0,X=0,G=b.length;ne<G;ne++)switch(b[ne]|0){case n.OPS.rectangle:V=A[X++],Y=A[X++];const R=A[X++],B=A[X++],J=V+R,Q=Y+B;z.moveTo(V,Y),R===0||B===0?z.lineTo(J,Q):(z.lineTo(J,Y),z.lineTo(J,Q),z.lineTo(V,Q)),L||M.updateRectMinMax(D,[V,Y,J,Q]),z.closePath();break;case n.OPS.moveTo:V=A[X++],Y=A[X++],z.moveTo(V,Y),L||M.updatePathMinMax(D,V,Y);break;case n.OPS.lineTo:V=A[X++],Y=A[X++],z.lineTo(V,Y),L||M.updatePathMinMax(D,V,Y);break;case n.OPS.curveTo:re=V,ge=Y,V=A[X+4],Y=A[X+5],z.bezierCurveTo(A[X],A[X+1],A[X+2],A[X+3],V,Y),M.updateCurvePathMinMax(D,re,ge,A[X],A[X+1],A[X+2],A[X+3],V,Y,q),X+=6;break;case n.OPS.curveTo2:re=V,ge=Y,z.bezierCurveTo(V,Y,A[X],A[X+1],A[X+2],A[X+3]),M.updateCurvePathMinMax(D,re,ge,V,Y,A[X],A[X+1],A[X+2],A[X+3],q),V=A[X+2],Y=A[X+3],X+=4;break;case n.OPS.curveTo3:re=V,ge=Y,V=A[X+2],Y=A[X+3],z.bezierCurveTo(A[X],A[X+1],V,Y,V,Y),M.updateCurvePathMinMax(D,re,ge,A[X],A[X+1],V,Y,V,Y,q),X+=4;break;case n.OPS.closePath:z.closePath();break}L&&M.updateScalingPathMinMax(D,q),M.setCurrentPoint(V,Y)}closePath(){this.ctx.closePath()}stroke(b=!0){const A=this.ctx,N=this.current.strokeColor;A.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof N=="object"&&(N!=null&&N.getPattern)?(A.save(),A.strokeStyle=N.getPattern(A,this,(0,i.getCurrentTransformInverse)(A),o.PathType.STROKE),this.rescaleAndStroke(!1),A.restore()):this.rescaleAndStroke(!0)),b&&this.consumePath(this.current.getClippedPathBoundingBox()),A.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(b=!0){const A=this.ctx,N=this.current.fillColor,z=this.current.patternFill;let M=!1;z&&(A.save(),A.fillStyle=N.getPattern(A,this,(0,i.getCurrentTransformInverse)(A),o.PathType.FILL),M=!0);const V=this.current.getClippedPathBoundingBox();this.contentVisible&&V!==null&&(this.pendingEOFill?(A.fill("evenodd"),this.pendingEOFill=!1):A.fill()),M&&A.restore(),b&&this.consumePath(V)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=se}eoClip(){this.pendingClip=ae}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const b=this.pendingTextPaths,A=this.ctx;if(b===void 0){A.beginPath();return}A.save(),A.beginPath();for(const N of b)A.setTransform(...N.transform),A.translate(N.x,N.y),N.addToPath(A,N.fontSize);A.restore(),A.clip(),A.beginPath(),delete this.pendingTextPaths}setCharSpacing(b){this.current.charSpacing=b}setWordSpacing(b){this.current.wordSpacing=b}setHScale(b){this.current.textHScale=b/100}setLeading(b){this.current.leading=-b}setFont(b,A){var D;const N=this.commonObjs.get(b),z=this.current;if(!N)throw new Error(`Can't find font for ${b}`);if(z.fontMatrix=N.fontMatrix||n.FONT_IDENTITY_MATRIX,(z.fontMatrix[0]===0||z.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+b),A<0?(A=-A,z.fontDirection=-1):z.fontDirection=1,this.current.font=N,this.current.fontSize=A,N.isType3Font)return;const M=N.loadedName||"sans-serif",V=((D=N.systemFontInfo)==null?void 0:D.css)||`"${M}", ${N.fallbackName}`;let Y="normal";N.black?Y="900":N.bold&&(Y="bold");const re=N.italic?"italic":"normal";let ge=A;A<u?ge=u:A>c&&(ge=c),this.current.fontSizeScale=A/ge,this.ctx.font=`${re} ${Y} ${ge}px ${V}`}setTextRenderingMode(b){this.current.textRenderingMode=b}setTextRise(b){this.current.textRise=b}moveText(b,A){this.current.x=this.current.lineX+=b,this.current.y=this.current.lineY+=A}setLeadingMoveText(b,A){this.setLeading(-A),this.moveText(b,A)}setTextMatrix(b,A,N,z,M,V){this.current.textMatrix=[b,A,N,z,M,V],this.current.textMatrixScale=Math.hypot(b,A),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(b,A,N,z){const M=this.ctx,V=this.current,Y=V.font,re=V.textRenderingMode,ge=V.fontSize/V.fontSizeScale,D=re&n.TextRenderingMode.FILL_STROKE_MASK,L=!!(re&n.TextRenderingMode.ADD_TO_PATH_FLAG),q=V.patternFill&&!Y.missingFile;let ne;(Y.disableFontFace||L||q)&&(ne=Y.getPathGenerator(this.commonObjs,b)),Y.disableFontFace||q?(M.save(),M.translate(A,N),M.beginPath(),ne(M,ge),z&&M.setTransform(...z),(D===n.TextRenderingMode.FILL||D===n.TextRenderingMode.FILL_STROKE)&&M.fill(),(D===n.TextRenderingMode.STROKE||D===n.TextRenderingMode.FILL_STROKE)&&M.stroke(),M.restore()):((D===n.TextRenderingMode.FILL||D===n.TextRenderingMode.FILL_STROKE)&&M.fillText(b,A,N),(D===n.TextRenderingMode.STROKE||D===n.TextRenderingMode.FILL_STROKE)&&M.strokeText(b,A,N)),L&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(M),x:A,y:N,fontSize:ge,addToPath:ne})}get isFontSubpixelAAEnabled(){const{context:b}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);b.scale(1.5,1),b.fillText("I",0,10);const A=b.getImageData(0,0,10,10).data;let N=!1;for(let z=3;z<A.length;z+=4)if(A[z]>0&&A[z]<255){N=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",N)}showText(b){const A=this.current,N=A.font;if(N.isType3Font)return this.showType3Text(b);const z=A.fontSize;if(z===0)return;const M=this.ctx,V=A.fontSizeScale,Y=A.charSpacing,re=A.wordSpacing,ge=A.fontDirection,D=A.textHScale*ge,L=b.length,q=N.vertical,ne=q?1:-1,X=N.defaultVMetrics,G=z*A.fontMatrix[0],R=A.textRenderingMode===n.TextRenderingMode.FILL&&!N.disableFontFace&&!A.patternFill;M.save(),M.transform(...A.textMatrix),M.translate(A.x,A.y+A.textRise),ge>0?M.scale(D,-1):M.scale(D,1);let B;if(A.patternFill){M.save();const _e=A.fillColor.getPattern(M,this,(0,i.getCurrentTransformInverse)(M),o.PathType.FILL);B=(0,i.getCurrentTransform)(M),M.restore(),M.fillStyle=_e}let J=A.lineWidth;const Q=A.textMatrixScale;if(Q===0||J===0){const _e=A.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(_e===n.TextRenderingMode.STROKE||_e===n.TextRenderingMode.FILL_STROKE)&&(J=this.getSinglePixelWidth())}else J/=Q;if(V!==1&&(M.scale(V,V),J/=V),M.lineWidth=J,N.isInvalidPDFjsFont){const _e=[];let te=0;for(const Te of b)_e.push(Te.unicode),te+=Te.width;M.fillText(_e.join(""),0,0),A.x+=te*G*D,M.restore(),this.compose();return}let de=0,fe;for(fe=0;fe<L;++fe){const _e=b[fe];if(typeof _e=="number"){de+=ne*_e*z/1e3;continue}let te=!1;const Te=(_e.isSpace?re:0)+Y,Ce=_e.fontChar,Fe=_e.accent;let Ne,je,ke=_e.width;if(q){const ze=_e.vmetric||X,Xe=-(_e.vmetric?ze[1]:ke*.5)*G,Ee=ze[2]*G;ke=ze?-ze[0]:ke,Ne=Xe/V,je=(de+Ee)/V}else Ne=de/V,je=0;if(N.remeasure&&ke>0){const ze=M.measureText(Ce).width*1e3/z*V;if(ke<ze&&this.isFontSubpixelAAEnabled){const Xe=ke/ze;te=!0,M.save(),M.scale(Xe,1),Ne/=Xe}else ke!==ze&&(Ne+=(ke-ze)/2e3*z/V)}if(this.contentVisible&&(_e.isInFont||N.missingFile)){if(R&&!Fe)M.fillText(Ce,Ne,je);else if(this.paintChar(Ce,Ne,je,B),Fe){const ze=Ne+z*Fe.offset.x/V,Xe=je-z*Fe.offset.y/V;this.paintChar(Fe.fontChar,ze,Xe,B)}}const De=q?ke*G-Te*ge:ke*G+Te*ge;de+=De,te&&M.restore()}q?A.y-=de:A.x+=de*D,M.restore(),this.compose()}showType3Text(b){const A=this.ctx,N=this.current,z=N.font,M=N.fontSize,V=N.fontDirection,Y=z.vertical?1:-1,re=N.charSpacing,ge=N.wordSpacing,D=N.textHScale*V,L=N.fontMatrix||n.FONT_IDENTITY_MATRIX,q=b.length,ne=N.textRenderingMode===n.TextRenderingMode.INVISIBLE;let X,G,R,B;if(!(ne||M===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,A.save(),A.transform(...N.textMatrix),A.translate(N.x,N.y),A.scale(D,V),X=0;X<q;++X){if(G=b[X],typeof G=="number"){B=Y*G*M/1e3,this.ctx.translate(B,0),N.x+=B*D;continue}const J=(G.isSpace?ge:0)+re,Q=z.charProcOperatorList[G.operatorListId];if(!Q){(0,n.warn)(`Type3 character "${G.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=G,this.save(),A.scale(M,M),A.transform(...L),this.executeOperatorList(Q),this.restore()),R=n.Util.applyTransform([G.width,0],L)[0]*M+J,A.translate(R,0),N.x+=R*D}A.restore(),this.processingType3=null}}setCharWidth(b,A){}setCharWidthAndBounds(b,A,N,z,M,V){this.ctx.rect(N,z,M-N,V-z),this.ctx.clip(),this.endPath()}getColorN_Pattern(b){let A;if(b[0]==="TilingPattern"){const N=b[1],z=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),M={createCanvasGraphics:V=>new he(V,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};A=new o.TilingPattern(b,N,this.ctx,M,z)}else A=this._getPattern(b[1],b[2]);return A}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(b,A,N){const z=n.Util.makeHexColor(b,A,N);this.ctx.strokeStyle=z,this.current.strokeColor=z}setFillRGBColor(b,A,N){const z=n.Util.makeHexColor(b,A,N);this.ctx.fillStyle=z,this.current.fillColor=z,this.current.patternFill=!1}_getPattern(b,A=null){let N;return this.cachedPatterns.has(b)?N=this.cachedPatterns.get(b):(N=(0,o.getShadingPattern)(this.getObject(b)),this.cachedPatterns.set(b,N)),A&&(N.matrix=A),N}shadingFill(b){if(!this.contentVisible)return;const A=this.ctx;this.save();const N=this._getPattern(b);A.fillStyle=N.getPattern(A,this,(0,i.getCurrentTransformInverse)(A),o.PathType.SHADING);const z=(0,i.getCurrentTransformInverse)(A);if(z){const{width:M,height:V}=A.canvas,[Y,re,ge,D]=n.Util.getAxialAlignedBoundingBox([0,0,M,V],z);this.ctx.fillRect(Y,re,ge-Y,D-re)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(b,A){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(b)&&b.length===6&&this.transform(...b),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),A)){const N=A[2]-A[0],z=A[3]-A[1];this.ctx.rect(A[0],A[1],N,z),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),A),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(b){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const A=this.ctx;b.isolated||(0,n.info)("TODO: Support non-isolated groups."),b.knockout&&(0,n.warn)("Knockout groups not supported.");const N=(0,i.getCurrentTransform)(A);if(b.matrix&&A.transform(...b.matrix),!b.bbox)throw new Error("Bounding box is required.");let z=n.Util.getAxialAlignedBoundingBox(b.bbox,(0,i.getCurrentTransform)(A));const M=[0,0,A.canvas.width,A.canvas.height];z=n.Util.intersect(z,M)||[0,0,0,0];const V=Math.floor(z[0]),Y=Math.floor(z[1]);let re=Math.max(Math.ceil(z[2])-V,1),ge=Math.max(Math.ceil(z[3])-Y,1),D=1,L=1;re>d&&(D=re/d,re=d),ge>d&&(L=ge/d,ge=d),this.current.startNewPathAndClipBox([0,0,re,ge]);let q="groupAt"+this.groupLevel;b.smask&&(q+="_smask_"+this.smaskCounter++%2);const ne=this.cachedCanvases.getCanvas(q,re,ge),X=ne.context;X.scale(1/D,1/L),X.translate(-V,-Y),X.transform(...N),b.smask?this.smaskStack.push({canvas:ne.canvas,context:X,offsetX:V,offsetY:Y,scaleX:D,scaleY:L,subtype:b.smask.subtype,backdrop:b.smask.backdrop,transferMap:b.smask.transferMap||null,startTransformInverse:null}):(A.setTransform(1,0,0,1,0,0),A.translate(V,Y),A.scale(D,L),A.save()),_(A,X),this.ctx=X,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(A),this.groupLevel++}endGroup(b){if(!this.contentVisible)return;this.groupLevel--;const A=this.ctx,N=this.groupStack.pop();if(this.ctx=N,this.ctx.imageSmoothingEnabled=!1,b.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const z=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...z);const M=n.Util.getAxialAlignedBoundingBox([0,0,A.canvas.width,A.canvas.height],z);this.ctx.drawImage(A.canvas,0,0),this.ctx.restore(),this.compose(M)}}beginAnnotation(b,A,N,z,M){if(le(this,ue,Yt).call(this),E(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(A)&&A.length===4){const V=A[2]-A[0],Y=A[3]-A[1];if(M&&this.annotationCanvasMap){N=N.slice(),N[4]-=A[0],N[5]-=A[1],A=A.slice(),A[0]=A[1]=0,A[2]=V,A[3]=Y;const[re,ge]=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:D}=this,L=Math.ceil(V*this.outputScaleX*D),q=Math.ceil(Y*this.outputScaleY*D);this.annotationCanvas=this.canvasFactory.create(L,q);const{canvas:ne,context:X}=this.annotationCanvas;this.annotationCanvasMap.set(b,ne),this.annotationCanvas.savedCtx=this.ctx,this.ctx=X,this.ctx.save(),this.ctx.setTransform(re,0,0,-ge,0,Y*ge),E(this.ctx)}else E(this.ctx),this.ctx.rect(A[0],A[1],V,Y),this.ctx.clip(),this.endPath()}this.current=new k(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...N),this.transform(...z)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),le(this,ue,Jt).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(b){if(!this.contentVisible)return;const A=b.count;b=this.getObject(b.data,b),b.count=A;const N=this.ctx,z=this.processingType3;if(z&&(z.compiled===void 0&&(z.compiled=T(b)),z.compiled)){z.compiled(N);return}const M=this._createMaskCanvas(b),V=M.canvas;N.save(),N.setTransform(1,0,0,1,0,0),N.drawImage(V,M.offsetX,M.offsetY),N.restore(),this.compose()}paintImageMaskXObjectRepeat(b,A,N=0,z=0,M,V){if(!this.contentVisible)return;b=this.getObject(b.data,b);const Y=this.ctx;Y.save();const re=(0,i.getCurrentTransform)(Y);Y.transform(A,N,z,M,0,0);const ge=this._createMaskCanvas(b);Y.setTransform(1,0,0,1,ge.offsetX-re[4],ge.offsetY-re[5]);for(let D=0,L=V.length;D<L;D+=2){const q=n.Util.transform(re,[A,N,z,M,V[D],V[D+1]]),[ne,X]=n.Util.applyTransform([0,0],q);Y.drawImage(ge.canvas,ne,X)}Y.restore(),this.compose()}paintImageMaskXObjectGroup(b){if(!this.contentVisible)return;const A=this.ctx,N=this.current.fillColor,z=this.current.patternFill;for(const M of b){const{data:V,width:Y,height:re,transform:ge}=M,D=this.cachedCanvases.getCanvas("maskCanvas",Y,re),L=D.context;L.save();const q=this.getObject(V,M);I(L,q),L.globalCompositeOperation="source-in",L.fillStyle=z?N.getPattern(L,this,(0,i.getCurrentTransformInverse)(A),o.PathType.FILL):N,L.fillRect(0,0,Y,re),L.restore(),A.save(),A.transform(...ge),A.scale(1,-1),x(A,D.canvas,0,0,Y,re,0,-1,1,1),A.restore()}this.compose()}paintImageXObject(b){if(!this.contentVisible)return;const A=this.getObject(b);if(!A){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(A)}paintImageXObjectRepeat(b,A,N,z){if(!this.contentVisible)return;const M=this.getObject(b);if(!M){(0,n.warn)("Dependent image isn't ready yet");return}const V=M.width,Y=M.height,re=[];for(let ge=0,D=z.length;ge<D;ge+=2)re.push({transform:[A,0,0,N,z[ge],z[ge+1]],x:0,y:0,w:V,h:Y});this.paintInlineImageXObjectGroup(M,re)}applyTransferMapsToCanvas(b){return this.current.transferMaps!=="none"&&(b.filter=this.current.transferMaps,b.drawImage(b.canvas,0,0),b.filter="none"),b.canvas}applyTransferMapsToBitmap(b){if(this.current.transferMaps==="none")return b.bitmap;const{bitmap:A,width:N,height:z}=b,M=this.cachedCanvases.getCanvas("inlineImage",N,z),V=M.context;return V.filter=this.current.transferMaps,V.drawImage(A,0,0),V.filter="none",M.canvas}paintInlineImageXObject(b){if(!this.contentVisible)return;const A=b.width,N=b.height,z=this.ctx;if(this.save(),!n.isNodeJS){const{filter:Y}=z;Y!=="none"&&Y!==""&&(z.filter="none")}z.scale(1/A,-1/N);let M;if(b.bitmap)M=this.applyTransferMapsToBitmap(b);else if(typeof HTMLElement=="function"&&b instanceof HTMLElement||!b.data)M=b;else{const re=this.cachedCanvases.getCanvas("inlineImage",A,N).context;H(re,b),M=this.applyTransferMapsToCanvas(re)}const V=this._scaleImage(M,(0,i.getCurrentTransformInverse)(z));z.imageSmoothingEnabled=P((0,i.getCurrentTransform)(z),b.interpolate),x(z,V.img,0,0,V.paintWidth,V.paintHeight,0,-N,A,N),this.compose(),this.restore()}paintInlineImageXObjectGroup(b,A){if(!this.contentVisible)return;const N=this.ctx;let z;if(b.bitmap)z=b.bitmap;else{const M=b.width,V=b.height,re=this.cachedCanvases.getCanvas("inlineImage",M,V).context;H(re,b),z=this.applyTransferMapsToCanvas(re)}for(const M of A)N.save(),N.transform(...M.transform),N.scale(1,-1),x(N,z,M.x,M.y,M.w,M.h,0,-1,1,1),N.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(b){}markPointProps(b,A){}beginMarkedContent(b){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(b,A){b==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(A)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(b){const A=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(b);const N=this.ctx;this.pendingClip&&(A||(this.pendingClip===ae?N.clip("evenodd"):N.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),N.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const b=(0,i.getCurrentTransform)(this.ctx);if(b[1]===0&&b[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(b[0]),Math.abs(b[3]));else{const A=Math.abs(b[0]*b[3]-b[2]*b[1]),N=Math.hypot(b[0],b[2]),z=Math.hypot(b[1],b[3]);this._cachedGetSinglePixelWidth=Math.max(N,z)/A}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:b}=this.current,{a:A,b:N,c:z,d:M}=this.ctx.getTransform();let V,Y;if(N===0&&z===0){const re=Math.abs(A),ge=Math.abs(M);if(re===ge)if(b===0)V=Y=1/re;else{const D=re*b;V=Y=D<1?1/D:1}else if(b===0)V=1/re,Y=1/ge;else{const D=re*b,L=ge*b;V=D<1?1/D:1,Y=L<1?1/L:1}}else{const re=Math.abs(A*M-N*z),ge=Math.hypot(A,N),D=Math.hypot(z,M);if(b===0)V=D/re,Y=ge/re;else{const L=b*re;V=D>L?D/L:1,Y=ge>L?ge/L:1}}this._cachedScaleForStroking[0]=V,this._cachedScaleForStroking[1]=Y}return this._cachedScaleForStroking}rescaleAndStroke(b){const{ctx:A}=this,{lineWidth:N}=this.current,[z,M]=this.getScaleForStroking();if(A.lineWidth=N||1,z===1&&M===1){A.stroke();return}const V=A.getLineDash();if(b&&A.save(),A.scale(z,M),V.length>0){const Y=Math.max(z,M);A.setLineDash(V.map(re=>re/Y)),A.lineDashOffset/=Y}A.stroke(),b&&A.restore()}isContentVisible(){for(let b=this.markedContentStack.length-1;b>=0;b--)if(!this.markedContentStack[b].visible)return!1;return!0}};ue=new WeakSet,Yt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Jt=function(){if(this.pageColors){const b=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(b!=="none"){const A=this.ctx.filter;this.ctx.filter=b,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=A}}};let ee=he;t.CanvasGraphics=ee;for(const j in n.OPS)ee.prototype[j]!==void 0&&(ee.prototype[n.OPS[j]]=ee.prototype[j])},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=y;var n=s(1),i=s(6);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=o;function r(T,k){if(!k)return;const H=k[2]-k[0],I=k[3]-k[1],_=new Path2D;_.rect(k[0],k[1],H,I),T.clip(_)}class u{constructor(){this.constructor===u&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class c extends u{constructor(k){super(),this._type=k[1],this._bbox=k[2],this._colorStops=k[3],this._p0=k[4],this._p1=k[5],this._r0=k[6],this._r1=k[7],this.matrix=null}_createGradient(k){let H;this._type==="axial"?H=k.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(H=k.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const I of this._colorStops)H.addColorStop(I[0],I[1]);return H}getPattern(k,H,I,_){let E;if(_===o.STROKE||_===o.FILL){const v=H.current.getClippedPathBoundingBox(_,(0,i.getCurrentTransform)(k))||[0,0,0,0],S=Math.ceil(v[2]-v[0])||1,m=Math.ceil(v[3]-v[1])||1,O=H.cachedCanvases.getCanvas("pattern",S,m,!0),f=O.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-v[0],-v[1]),I=n.Util.transform(I,[1,0,0,1,v[0],v[1]]),f.transform(...H.baseTransform),this.matrix&&f.transform(...this.matrix),r(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),E=k.createPattern(O.canvas,"no-repeat");const P=new DOMMatrix(I);E.setTransform(P)}else r(k,this._bbox),E=this._createGradient(k);return E}}function d(T,k,H,I,_,E,v,S){const m=k.coords,O=k.colors,f=T.data,P=T.width*4;let U;m[H+1]>m[I+1]&&(U=H,H=I,I=U,U=E,E=v,v=U),m[I+1]>m[_+1]&&(U=I,I=_,_=U,U=v,v=S,S=U),m[H+1]>m[I+1]&&(U=H,H=I,I=U,U=E,E=v,v=U);const ce=(m[H]+k.offsetX)*k.scaleX,se=(m[H+1]+k.offsetY)*k.scaleY,ae=(m[I]+k.offsetX)*k.scaleX,ee=(m[I+1]+k.offsetY)*k.scaleY,ue=(m[_]+k.offsetX)*k.scaleX,W=(m[_+1]+k.offsetY)*k.scaleY;if(se>=W)return;const ie=O[E],he=O[E+1],j=O[E+2],b=O[v],A=O[v+1],N=O[v+2],z=O[S],M=O[S+1],V=O[S+2],Y=Math.round(se),re=Math.round(W);let ge,D,L,q,ne,X,G,R;for(let B=Y;B<=re;B++){if(B<ee){const _e=B<se?0:(se-B)/(se-ee);ge=ce-(ce-ae)*_e,D=ie-(ie-b)*_e,L=he-(he-A)*_e,q=j-(j-N)*_e}else{let _e;B>W?_e=1:ee===W?_e=0:_e=(ee-B)/(ee-W),ge=ae-(ae-ue)*_e,D=b-(b-z)*_e,L=A-(A-M)*_e,q=N-(N-V)*_e}let J;B<se?J=0:B>W?J=1:J=(se-B)/(se-W),ne=ce-(ce-ue)*J,X=ie-(ie-z)*J,G=he-(he-M)*J,R=j-(j-V)*J;const Q=Math.round(Math.min(ge,ne)),de=Math.round(Math.max(ge,ne));let fe=P*B+Q*4;for(let _e=Q;_e<=de;_e++)J=(ge-_e)/(ge-ne),J<0?J=0:J>1&&(J=1),f[fe++]=D-(D-X)*J|0,f[fe++]=L-(L-G)*J|0,f[fe++]=q-(q-R)*J|0,f[fe++]=255}}function a(T,k,H){const I=k.coords,_=k.colors;let E,v;switch(k.type){case"lattice":const S=k.verticesPerRow,m=Math.floor(I.length/S)-1,O=S-1;for(E=0;E<m;E++){let f=E*S;for(let P=0;P<O;P++,f++)d(T,H,I[f],I[f+1],I[f+S],_[f],_[f+1],_[f+S]),d(T,H,I[f+S+1],I[f+1],I[f+S],_[f+S+1],_[f+1],_[f+S])}break;case"triangles":for(E=0,v=I.length;E<v;E+=3)d(T,H,I[E],I[E+1],I[E+2],_[E],_[E+1],_[E+2]);break;default:throw new Error("illegal figure")}}class g extends u{constructor(k){super(),this._coords=k[2],this._colors=k[3],this._figures=k[4],this._bounds=k[5],this._bbox=k[7],this._background=k[8],this.matrix=null}_createMeshCanvas(k,H,I){const S=Math.floor(this._bounds[0]),m=Math.floor(this._bounds[1]),O=Math.ceil(this._bounds[2])-S,f=Math.ceil(this._bounds[3])-m,P=Math.min(Math.ceil(Math.abs(O*k[0]*1.1)),3e3),U=Math.min(Math.ceil(Math.abs(f*k[1]*1.1)),3e3),ce=O/P,se=f/U,ae={coords:this._coords,colors:this._colors,offsetX:-S,offsetY:-m,scaleX:1/ce,scaleY:1/se},ee=P+2*2,ue=U+2*2,W=I.getCanvas("mesh",ee,ue,!1),ie=W.context,he=ie.createImageData(P,U);if(H){const b=he.data;for(let A=0,N=b.length;A<N;A+=4)b[A]=H[0],b[A+1]=H[1],b[A+2]=H[2],b[A+3]=255}for(const b of this._figures)a(he,b,ae);return ie.putImageData(he,2,2),{canvas:W.canvas,offsetX:S-2*ce,offsetY:m-2*se,scaleX:ce,scaleY:se}}getPattern(k,H,I,_){r(k,this._bbox);let E;if(_===o.SHADING)E=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(k));else if(E=n.Util.singularValueDecompose2dScale(H.baseTransform),this.matrix){const S=n.Util.singularValueDecompose2dScale(this.matrix);E=[E[0]*S[0],E[1]*S[1]]}const v=this._createMeshCanvas(E,_===o.SHADING?null:this._background,H.cachedCanvases);return _!==o.SHADING&&(k.setTransform(...H.baseTransform),this.matrix&&k.transform(...this.matrix)),k.translate(v.offsetX,v.offsetY),k.scale(v.scaleX,v.scaleY),k.createPattern(v.canvas,"no-repeat")}}class C extends u{getPattern(){return"hotpink"}}function y(T){switch(T[0]){case"RadialAxial":return new c(T);case"Mesh":return new g(T);case"Dummy":return new C}throw new Error(`Unknown IR type: ${T[0]}`)}const w={COLORED:1,UNCOLORED:2},x=class x{constructor(k,H,I,_,E){this.operatorList=k[2],this.matrix=k[3]||[1,0,0,1,0,0],this.bbox=k[4],this.xstep=k[5],this.ystep=k[6],this.paintType=k[7],this.tilingType=k[8],this.color=H,this.ctx=I,this.canvasGraphicsFactory=_,this.baseTransform=E}createPatternCanvas(k){const H=this.operatorList,I=this.bbox,_=this.xstep,E=this.ystep,v=this.paintType,S=this.tilingType,m=this.color,O=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+S);const f=I[0],P=I[1],U=I[2],ce=I[3],se=n.Util.singularValueDecompose2dScale(this.matrix),ae=n.Util.singularValueDecompose2dScale(this.baseTransform),ee=[se[0]*ae[0],se[1]*ae[1]],ue=this.getSizeAndScale(_,this.ctx.canvas.width,ee[0]),W=this.getSizeAndScale(E,this.ctx.canvas.height,ee[1]),ie=k.cachedCanvases.getCanvas("pattern",ue.size,W.size,!0),he=ie.context,j=O.createCanvasGraphics(he);j.groupLevel=k.groupLevel,this.setFillAndStrokeStyleToContext(j,v,m);let b=f,A=P,N=U,z=ce;return f<0&&(b=0,N+=Math.abs(f)),P<0&&(A=0,z+=Math.abs(P)),he.translate(-(ue.scale*b),-(W.scale*A)),j.transform(ue.scale,0,0,W.scale,0,0),he.save(),this.clipBbox(j,b,A,N,z),j.baseTransform=(0,i.getCurrentTransform)(j.ctx),j.executeOperatorList(H),j.endDrawing(),{canvas:ie.canvas,scaleX:ue.scale,scaleY:W.scale,offsetX:b,offsetY:A}}getSizeAndScale(k,H,I){k=Math.abs(k);const _=Math.max(x.MAX_PATTERN_SIZE,H);let E=Math.ceil(k*I);return E>=_?E=_:I=E/k,{scale:I,size:E}}clipBbox(k,H,I,_,E){const v=_-H,S=E-I;k.ctx.rect(H,I,v,S),k.current.updateRectMinMax((0,i.getCurrentTransform)(k.ctx),[H,I,_,E]),k.clip(),k.endPath()}setFillAndStrokeStyleToContext(k,H,I){const _=k.ctx,E=k.current;switch(H){case w.COLORED:const v=this.ctx;_.fillStyle=v.fillStyle,_.strokeStyle=v.strokeStyle,E.fillColor=v.fillStyle,E.strokeColor=v.strokeStyle;break;case w.UNCOLORED:const S=n.Util.makeHexColor(I[0],I[1],I[2]);_.fillStyle=S,_.strokeStyle=S,E.fillColor=S,E.strokeColor=S;break;default:throw new n.FormatError(`Unsupported paint type: ${H}`)}}getPattern(k,H,I,_){let E=I;_!==o.SHADING&&(E=n.Util.transform(E,H.baseTransform),this.matrix&&(E=n.Util.transform(E,this.matrix)));const v=this.createPatternCanvas(H);let S=new DOMMatrix(E);S=S.translate(v.offsetX,v.offsetY),S=S.scale(1/v.scaleX,1/v.scaleY);const m=k.createPattern(v.canvas,"repeat");return m.setTransform(S),m}};Qe(x,"MAX_PATTERN_SIZE",3e3);let F=x;t.TilingPattern=F},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=o,t.convertToRGBA=i,t.grayToRGBA=u;var n=s(1);function i(c){switch(c.kind){case n.ImageKind.GRAYSCALE_1BPP:return o(c);case n.ImageKind.RGB_24BPP:return r(c)}return null}function o({src:c,srcPos:d=0,dest:a,width:g,height:C,nonBlackColor:y=4294967295,inverseDecode:w=!1}){const F=n.FeatureTest.isLittleEndian?4278190080:255,[x,T]=w?[y,F]:[F,y],k=g>>3,H=g&7,I=c.length;a=new Uint32Array(a.buffer);let _=0;for(let E=0;E<C;E++){for(const S=d+k;d<S;d++){const m=d<I?c[d]:255;a[_++]=m&128?T:x,a[_++]=m&64?T:x,a[_++]=m&32?T:x,a[_++]=m&16?T:x,a[_++]=m&8?T:x,a[_++]=m&4?T:x,a[_++]=m&2?T:x,a[_++]=m&1?T:x}if(H===0)continue;const v=d<I?c[d++]:255;for(let S=0;S<H;S++)a[_++]=v&1<<7-S?T:x}return{srcPos:d,destPos:_}}function r({src:c,srcPos:d=0,dest:a,destPos:g=0,width:C,height:y}){let w=0;const F=c.length>>2,x=new Uint32Array(c.buffer,d,F);if(n.FeatureTest.isLittleEndian){for(;w<F-2;w+=3,g+=4){const T=x[w],k=x[w+1],H=x[w+2];a[g]=T|4278190080,a[g+1]=T>>>24|k<<8|4278190080,a[g+2]=k>>>16|H<<16|4278190080,a[g+3]=H>>>8|4278190080}for(let T=w*4,k=c.length;T<k;T+=3)a[g++]=c[T]|c[T+1]<<8|c[T+2]<<16|4278190080}else{for(;w<F-2;w+=3,g+=4){const T=x[w],k=x[w+1],H=x[w+2];a[g]=T|255,a[g+1]=T<<24|k>>>8|255,a[g+2]=k<<16|H>>>16|255,a[g+3]=H<<8|255}for(let T=w*4,k=c.length;T<k;T+=3)a[g++]=c[T]<<24|c[T+1]<<16|c[T+2]<<8|255}return{srcPos:d,destPos:g}}function u(c,d){if(n.FeatureTest.isLittleEndian)for(let a=0,g=c.length;a<g;a++)d[a]=c[a]*65793|4278190080;else for(let a=0,g=c.length;a<g;a++)d[a]=c[a]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const s=Object.create(null);t.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(e,t,s)=>{var c,Rn,xn,wt;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=s(1);const i={DATA:1,ERROR:2},o={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function r(C){switch(C instanceof Error||typeof C=="object"&&C!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),C.name){case"AbortException":return new n.AbortException(C.message);case"MissingPDFException":return new n.MissingPDFException(C.message);case"PasswordException":return new n.PasswordException(C.message,C.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(C.message,C.status);case"UnknownErrorException":return new n.UnknownErrorException(C.message,C.details);default:return new n.UnknownErrorException(C.message,C.toString())}}class u{constructor(y,w,F){me(this,c);this.sourceName=y,this.targetName=w,this.comObj=F,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=x=>{const T=x.data;if(T.targetName!==this.sourceName)return;if(T.stream){le(this,c,xn).call(this,T);return}if(T.callback){const H=T.callbackId,I=this.callbackCapabilities[H];if(!I)throw new Error(`Cannot resolve callback ${H}`);if(delete this.callbackCapabilities[H],T.callback===i.DATA)I.resolve(T.data);else if(T.callback===i.ERROR)I.reject(r(T.reason));else throw new Error("Unexpected callback case");return}const k=this.actionHandler[T.action];if(!k)throw new Error(`Unknown action from worker: ${T.action}`);if(T.callbackId){const H=this.sourceName,I=T.sourceName;new Promise(function(_){_(k(T.data))}).then(function(_){F.postMessage({sourceName:H,targetName:I,callback:i.DATA,callbackId:T.callbackId,data:_})},function(_){F.postMessage({sourceName:H,targetName:I,callback:i.ERROR,callbackId:T.callbackId,reason:r(_)})});return}if(T.streamId){le(this,c,Rn).call(this,T);return}k(T.data)},F.addEventListener("message",this._onComObjOnMessage)}on(y,w){const F=this.actionHandler;if(F[y])throw new Error(`There is already an actionName called "${y}"`);F[y]=w}send(y,w,F){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:w},F)}sendWithPromise(y,w,F){const x=this.callbackId++,T=new n.PromiseCapability;this.callbackCapabilities[x]=T;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:x,data:w},F)}catch(k){T.reject(k)}return T.promise}sendWithStream(y,w,F,x){const T=this.streamId++,k=this.sourceName,H=this.targetName,I=this.comObj;return new ReadableStream({start:_=>{const E=new n.PromiseCapability;return this.streamControllers[T]={controller:_,startCall:E,pullCall:null,cancelCall:null,isClosed:!1},I.postMessage({sourceName:k,targetName:H,action:y,streamId:T,data:w,desiredSize:_.desiredSize},x),E.promise},pull:_=>{const E=new n.PromiseCapability;return this.streamControllers[T].pullCall=E,I.postMessage({sourceName:k,targetName:H,stream:o.PULL,streamId:T,desiredSize:_.desiredSize}),E.promise},cancel:_=>{(0,n.assert)(_ instanceof Error,"cancel must have a valid reason");const E=new n.PromiseCapability;return this.streamControllers[T].cancelCall=E,this.streamControllers[T].isClosed=!0,I.postMessage({sourceName:k,targetName:H,stream:o.CANCEL,streamId:T,reason:r(_)}),E.promise}},F)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}c=new WeakSet,Rn=function(y){const w=y.streamId,F=this.sourceName,x=y.sourceName,T=this.comObj,k=this,H=this.actionHandler[y.action],I={enqueue(_,E=1,v){if(this.isCancelled)return;const S=this.desiredSize;this.desiredSize-=E,S>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),T.postMessage({sourceName:F,targetName:x,stream:o.ENQUEUE,streamId:w,chunk:_},v)},close(){this.isCancelled||(this.isCancelled=!0,T.postMessage({sourceName:F,targetName:x,stream:o.CLOSE,streamId:w}),delete k.streamSinks[w])},error(_){(0,n.assert)(_ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,T.postMessage({sourceName:F,targetName:x,stream:o.ERROR,streamId:w,reason:r(_)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};I.sinkCapability.resolve(),I.ready=I.sinkCapability.promise,this.streamSinks[w]=I,new Promise(function(_){_(H(y.data,I))}).then(function(){T.postMessage({sourceName:F,targetName:x,stream:o.START_COMPLETE,streamId:w,success:!0})},function(_){T.postMessage({sourceName:F,targetName:x,stream:o.START_COMPLETE,streamId:w,reason:r(_)})})},xn=function(y){const w=y.streamId,F=this.sourceName,x=y.sourceName,T=this.comObj,k=this.streamControllers[w],H=this.streamSinks[w];switch(y.stream){case o.START_COMPLETE:y.success?k.startCall.resolve():k.startCall.reject(r(y.reason));break;case o.PULL_COMPLETE:y.success?k.pullCall.resolve():k.pullCall.reject(r(y.reason));break;case o.PULL:if(!H){T.postMessage({sourceName:F,targetName:x,stream:o.PULL_COMPLETE,streamId:w,success:!0});break}H.desiredSize<=0&&y.desiredSize>0&&H.sinkCapability.resolve(),H.desiredSize=y.desiredSize,new Promise(function(I){var _;I((_=H.onPull)==null?void 0:_.call(H))}).then(function(){T.postMessage({sourceName:F,targetName:x,stream:o.PULL_COMPLETE,streamId:w,success:!0})},function(I){T.postMessage({sourceName:F,targetName:x,stream:o.PULL_COMPLETE,streamId:w,reason:r(I)})});break;case o.ENQUEUE:if((0,n.assert)(k,"enqueue should have stream controller"),k.isClosed)break;k.controller.enqueue(y.chunk);break;case o.CLOSE:if((0,n.assert)(k,"close should have stream controller"),k.isClosed)break;k.isClosed=!0,k.controller.close(),le(this,c,wt).call(this,k,w);break;case o.ERROR:(0,n.assert)(k,"error should have stream controller"),k.controller.error(r(y.reason)),le(this,c,wt).call(this,k,w);break;case o.CANCEL_COMPLETE:y.success?k.cancelCall.resolve():k.cancelCall.reject(r(y.reason)),le(this,c,wt).call(this,k,w);break;case o.CANCEL:if(!H)break;new Promise(function(I){var _;I((_=H.onCancel)==null?void 0:_.call(H,r(y.reason)))}).then(function(){T.postMessage({sourceName:F,targetName:x,stream:o.CANCEL_COMPLETE,streamId:w,success:!0})},function(I){T.postMessage({sourceName:F,targetName:x,stream:o.CANCEL_COMPLETE,streamId:w,reason:r(I)})}),H.sinkCapability.reject(r(y.reason)),H.isCancelled=!0,delete this.streamSinks[w];break;default:throw new Error("Unexpected stream case")}},wt=async function(y,w){var F,x,T;await Promise.allSettled([(F=y.startCall)==null?void 0:F.promise,(x=y.pullCall)==null?void 0:x.promise,(T=y.cancelCall)==null?void 0:T.promise]),delete this.streamControllers[w]},t.MessageHandler=u},(e,t,s)=>{var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=s(1);class i{constructor({parsedData:c,rawData:d}){me(this,o);me(this,r);ve(this,o,c),ve(this,r,d)}getRaw(){return l(this,r)}get(c){return l(this,o).get(c)??null}getAll(){return(0,n.objectFromMap)(l(this,o))}has(c){return l(this,o).has(c)}}o=new WeakMap,r=new WeakMap,t.Metadata=i},(e,t,s)=>{var c,d,a,g,C,y,Qt;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=s(1),i=s(8);const o=Symbol("INTERNAL");class r{constructor(x,T){me(this,c,!0);this.name=x,this.intent=T}get visible(){return l(this,c)}_setVisible(x,T){x!==o&&(0,n.unreachable)("Internal method `_setVisible` called."),ve(this,c,T)}}c=new WeakMap;class u{constructor(x){me(this,y);me(this,d,null);me(this,a,new Map);me(this,g,null);me(this,C,null);if(this.name=null,this.creator=null,x!==null){this.name=x.name,this.creator=x.creator,ve(this,C,x.order);for(const T of x.groups)l(this,a).set(T.id,new r(T.name,T.intent));if(x.baseState==="OFF")for(const T of l(this,a).values())T._setVisible(o,!1);for(const T of x.on)l(this,a).get(T)._setVisible(o,!0);for(const T of x.off)l(this,a).get(T)._setVisible(o,!1);ve(this,g,this.getHash())}}isVisible(x){if(l(this,a).size===0)return!0;if(!x)return(0,n.warn)("Optional content group not defined."),!0;if(x.type==="OCG")return l(this,a).has(x.id)?l(this,a).get(x.id).visible:((0,n.warn)(`Optional content group not found: ${x.id}`),!0);if(x.type==="OCMD"){if(x.expression)return le(this,y,Qt).call(this,x.expression);if(!x.policy||x.policy==="AnyOn"){for(const T of x.ids){if(!l(this,a).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(l(this,a).get(T).visible)return!0}return!1}else if(x.policy==="AllOn"){for(const T of x.ids){if(!l(this,a).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(!l(this,a).get(T).visible)return!1}return!0}else if(x.policy==="AnyOff"){for(const T of x.ids){if(!l(this,a).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(!l(this,a).get(T).visible)return!0}return!1}else if(x.policy==="AllOff"){for(const T of x.ids){if(!l(this,a).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(l(this,a).get(T).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${x.policy}.`),!0}return(0,n.warn)(`Unknown group type ${x.type}.`),!0}setVisibility(x,T=!0){if(!l(this,a).has(x)){(0,n.warn)(`Optional content group not found: ${x}`);return}l(this,a).get(x)._setVisible(o,!!T),ve(this,d,null)}get hasInitialVisibility(){return l(this,g)===null||this.getHash()===l(this,g)}getOrder(){return l(this,a).size?l(this,C)?l(this,C).slice():[...l(this,a).keys()]:null}getGroups(){return l(this,a).size>0?(0,n.objectFromMap)(l(this,a)):null}getGroup(x){return l(this,a).get(x)||null}getHash(){if(l(this,d)!==null)return l(this,d);const x=new i.MurmurHash3_64;for(const[T,k]of l(this,a))x.update(`${T}:${k.visible}`);return ve(this,d,x.hexdigest())}}d=new WeakMap,a=new WeakMap,g=new WeakMap,C=new WeakMap,y=new WeakSet,Qt=function(x){const T=x.length;if(T<2)return!0;const k=x[0];for(let H=1;H<T;H++){const I=x[H];let _;if(Array.isArray(I))_=le(this,y,Qt).call(this,I);else if(l(this,a).has(I))_=l(this,a).get(I).visible;else return(0,n.warn)(`Optional content group not found: ${I}`),!0;switch(k){case"And":if(!_)return!1;break;case"Or":if(_)return!0;break;case"Not":return!_;default:return!0}}return k==="And"},t.OptionalContentConfig=u},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=s(1),i=s(6);class o{constructor({length:d,initialData:a,progressiveDone:g=!1,contentDispositionFilename:C=null,disableRange:y=!1,disableStream:w=!1},F){if((0,n.assert)(F,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=g,this._contentDispositionFilename=C,(a==null?void 0:a.length)>0){const x=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(x)}this._pdfDataRangeTransport=F,this._isStreamingSupported=!w,this._isRangeSupported=!y,this._contentLength=d,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((x,T)=>{this._onReceiveData({begin:x,chunk:T})}),this._pdfDataRangeTransport.addProgressListener((x,T)=>{this._onProgress({loaded:x,total:T})}),this._pdfDataRangeTransport.addProgressiveReadListener(x=>{this._onReceiveData({chunk:x})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:d,chunk:a}){const g=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;if(d===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(g):this._queuedChunks.push(g);else{const C=this._rangeReaders.some(function(y){return y._begin!==d?!1:(y._enqueue(g),!0)});(0,n.assert)(C,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var d;return((d=this._fullRequestReader)==null?void 0:d._loaded)??0}_onProgress(d){var a,g,C,y;d.total===void 0?(g=(a=this._rangeReaders[0])==null?void 0:a.onProgress)==null||g.call(a,{loaded:d.loaded}):(y=(C=this._fullRequestReader)==null?void 0:C.onProgress)==null||y.call(C,{loaded:d.loaded,total:d.total})}_onProgressiveDone(){var d;(d=this._fullRequestReader)==null||d.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const a=this._rangeReaders.indexOf(d);a>=0&&this._rangeReaders.splice(a,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new r(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,a){if(a<=this._progressiveDataLength)return null;const g=new u(this,d,a);return this._pdfDataRangeTransport.requestDataRange(d,a),this._rangeReaders.push(g),g}cancelAllRequests(d){var a;(a=this._fullRequestReader)==null||a.cancel(d);for(const g of this._rangeReaders.slice(0))g.cancel(d);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=o;class r{constructor(d,a,g=!1,C=null){this._stream=d,this._done=g||!1,this._filename=(0,i.isPdfFile)(C)?C:null,this._queuedChunks=a||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=new n.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class u{constructor(d,a,g){this._stream=d,this._begin=a,this._end=g,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};const d=new n.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=s(1),i=s(20);function o(g,C,y){return{method:"GET",headers:g,signal:y.signal,mode:"cors",credentials:C?"include":"same-origin",redirect:"follow"}}function r(g){const C=new Headers;for(const y in g){const w=g[y];w!==void 0&&C.append(y,w)}return C}function u(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:((0,n.warn)(`getArrayBuffer - unexpected data format: ${g}`),new Uint8Array(g).buffer)}class c{constructor(C){this.source=C,this.isHttp=/^https?:/i.test(C.url),this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var C;return((C=this._fullRequestReader)==null?void 0:C._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d(this),this._fullRequestReader}getRangeReader(C,y){if(y<=this._progressiveDataLength)return null;const w=new a(this,C,y);return this._rangeRequestReaders.push(w),w}cancelAllRequests(C){var y;(y=this._fullRequestReader)==null||y.cancel(C);for(const w of this._rangeRequestReaders.slice(0))w.cancel(C)}}t.PDFFetchStream=c;class d{constructor(C){this._stream=C,this._reader=null,this._loaded=0,this._filename=null;const y=C.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=new n.PromiseCapability,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=r(this._stream.httpHeaders);const w=y.url;fetch(w,o(this._headers,this._withCredentials,this._abortController)).then(F=>{if(!(0,i.validateResponseStatus)(F.status))throw(0,i.createResponseStatusError)(F.status,w);this._reader=F.body.getReader(),this._headersCapability.resolve();const x=H=>F.headers.get(H),{allowRangeRequests:T,suggestedLength:k}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=k||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(x),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;await this._headersCapability.promise;const{value:C,done:y}=await this._reader.read();return y?{value:C,done:y}:(this._loaded+=C.byteLength,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded,total:this._contentLength}),{value:u(C),done:!1})}cancel(C){var y;(y=this._reader)==null||y.cancel(C),this._abortController.abort()}}class a{constructor(C,y,w){this._stream=C,this._reader=null,this._loaded=0;const F=C.source;this._withCredentials=F.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!F.disableStream,this._abortController=new AbortController,this._headers=r(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${w-1}`);const x=F.url;fetch(x,o(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,i.validateResponseStatus)(T.status))throw(0,i.createResponseStatusError)(T.status,x);this._readCapability.resolve(),this._reader=T.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;await this._readCapability.promise;const{value:C,done:y}=await this._reader.read();return y?{value:C,done:y}:(this._loaded+=C.byteLength,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded}),{value:u(C),done:!1})}cancel(C){var y;(y=this._reader)==null||y.cancel(C),this._abortController.abort()}}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=c,t.extractFilenameFromHeader=u,t.validateRangeRequestCapabilities=r,t.validateResponseStatus=d;var n=s(1),i=s(21),o=s(6);function r({getResponseHeader:a,isHttp:g,rangeChunkSize:C,disableRange:y}){const w={allowRangeRequests:!1,suggestedLength:void 0},F=parseInt(a("Content-Length"),10);return!Number.isInteger(F)||(w.suggestedLength=F,F<=2*C)||y||!g||a("Accept-Ranges")!=="bytes"||(a("Content-Encoding")||"identity")!=="identity"||(w.allowRangeRequests=!0),w}function u(a){const g=a("Content-Disposition");if(g){let C=(0,i.getFilenameFromContentDispositionHeader)(g);if(C.includes("%"))try{C=decodeURIComponent(C)}catch{}if((0,o.isPdfFile)(C))return C}return null}function c(a,g){return a===404||a===0&&g.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+g+'".'):new n.UnexpectedResponseException(`Unexpected server response (${a}) while retrieving PDF "${g}".`,a)}function d(a){return a===200||a===206}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=i;var n=s(1);function i(o){let r=!0,u=c("filename\\*","i").exec(o);if(u){u=u[1];let F=C(u);return F=unescape(F),F=y(F),F=w(F),a(F)}if(u=g(o),u){const F=w(u);return a(F)}if(u=c("filename","i").exec(o),u){u=u[1];let F=C(u);return F=w(F),a(F)}function c(F,x){return new RegExp("(?:^|;)\\s*"+F+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',x)}function d(F,x){if(F){if(!/^[\x00-\xFF]+$/.test(x))return x;try{const T=new TextDecoder(F,{fatal:!0}),k=(0,n.stringToBytes)(x);x=T.decode(k),r=!1}catch{}}return x}function a(F){return r&&/[\x80-\xff]/.test(F)&&(F=d("utf-8",F),r&&(F=d("iso-8859-1",F))),F}function g(F){const x=[];let T;const k=c("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=k.exec(F))!==null;){let[,I,_,E]=T;if(I=parseInt(I,10),I in x){if(I===0)break;continue}x[I]=[_,E]}const H=[];for(let I=0;I<x.length&&I in x;++I){let[_,E]=x[I];E=C(E),_&&(E=unescape(E),I===0&&(E=y(E))),H.push(E)}return H.join("")}function C(F){if(F.startsWith('"')){const x=F.slice(1).split('\\"');for(let T=0;T<x.length;++T){const k=x[T].indexOf('"');k!==-1&&(x[T]=x[T].slice(0,k),x.length=T+1),x[T]=x[T].replaceAll(/\\(.)/g,"$1")}F=x.join('"')}return F}function y(F){const x=F.indexOf("'");if(x===-1)return F;const T=F.slice(0,x),H=F.slice(x+1).replace(/^[^']*'/,"");return d(T,H)}function w(F){return!F.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(F)?F:F.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(x,T,k,H){if(k==="q"||k==="Q")return H=H.replaceAll("_"," "),H=H.replaceAll(/=([0-9a-fA-F]{2})/g,function(I,_){return String.fromCharCode(parseInt(_,16))}),d(T,H);try{H=atob(H)}catch{}return d(T,H)})}return""}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=s(1),i=s(20);const o=200,r=206;function u(C){const y=C.response;return typeof y!="string"?y:(0,n.stringToBytes)(y).buffer}class c{constructor(y,w={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&w.httpHeaders||Object.create(null),this.withCredentials=w.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,w,F){const x={begin:y,end:w};for(const T in F)x[T]=F[T];return this.request(x)}requestFull(y){return this.request(y)}request(y){const w=new XMLHttpRequest,F=this.currXhrId++,x=this.pendingRequests[F]={xhr:w};w.open("GET",this.url),w.withCredentials=this.withCredentials;for(const T in this.httpHeaders){const k=this.httpHeaders[T];k!==void 0&&w.setRequestHeader(T,k)}return this.isHttp&&"begin"in y&&"end"in y?(w.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),x.expectedStatus=r):x.expectedStatus=o,w.responseType="arraybuffer",y.onError&&(w.onerror=function(T){y.onError(w.status)}),w.onreadystatechange=this.onStateChange.bind(this,F),w.onprogress=this.onProgress.bind(this,F),x.onHeadersReceived=y.onHeadersReceived,x.onDone=y.onDone,x.onError=y.onError,x.onProgress=y.onProgress,w.send(null),F}onProgress(y,w){var x;const F=this.pendingRequests[y];F&&((x=F.onProgress)==null||x.call(F,w))}onStateChange(y,w){var I,_,E;const F=this.pendingRequests[y];if(!F)return;const x=F.xhr;if(x.readyState>=2&&F.onHeadersReceived&&(F.onHeadersReceived(),delete F.onHeadersReceived),x.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],x.status===0&&this.isHttp){(I=F.onError)==null||I.call(F,x.status);return}const T=x.status||o;if(!(T===o&&F.expectedStatus===r)&&T!==F.expectedStatus){(_=F.onError)==null||_.call(F,x.status);return}const H=u(x);if(T===r){const v=x.getResponseHeader("Content-Range"),S=/bytes (\d+)-(\d+)\/(\d+)/.exec(v);F.onDone({begin:parseInt(S[1],10),chunk:H})}else H?F.onDone({begin:0,chunk:H}):(E=F.onError)==null||E.call(F,x.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const w=this.pendingRequests[y].xhr;delete this.pendingRequests[y],w.abort()}}class d{constructor(y){this._source=y,this._manager=new c(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const w=this._rangeRequestReaders.indexOf(y);w>=0&&this._rangeRequestReaders.splice(w,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(y,w){const F=new g(this._manager,y,w);return F.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(F),F}cancelAllRequests(y){var w;(w=this._fullRequestReader)==null||w.cancel(y);for(const F of this._rangeRequestReaders.slice(0))F.cancel(y)}}t.PDFNetworkStream=d;class a{constructor(y,w){this._manager=y;const F={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._fullRequestId=y.requestFull(F),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=w.disableRange||!1,this._contentLength=w.length,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,w=this._manager.getRequestXhr(y),F=k=>w.getResponseHeader(k),{allowRangeRequests:x,suggestedLength:T}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:F,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});x&&(this._isRangeSupported=!0),this._contentLength=T||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(F),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,i.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){var w;(w=this.onProgress)==null||w.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=new n.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class g{constructor(y,w,F){this._manager=y;const x={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(w,F,x),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var y;(y=this.onClosed)==null||y.call(this,this)}_onDone(y){const w=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:w,done:!1}):this._queuedChunk=w,this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,i.createResponseStatusError)(y,this._url);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){var w;this.isStreamingSupported||(w=this.onProgress)==null||w.call(this,{loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const w=this._queuedChunk;return this._queuedChunk=null,{value:w,done:!1}}if(this._done)return{value:void 0,done:!0};const y=new n.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=s(1),i=s(20);const o=/^file:\/\/\/[a-zA-Z]:\//;function r(F){const x=require$$5,T=x.parse(F);return T.protocol==="file:"||T.host?T:/^[a-z]:[/\\]/i.test(F)?x.parse(`file:///${F}`):(T.host||(T.protocol="file:"),T)}class u{constructor(x){this.source=x,this.url=r(x.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x;return((x=this._fullRequestReader)==null?void 0:x._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new g(this),this._fullRequestReader}getRangeReader(x,T){if(T<=this._progressiveDataLength)return null;const k=this.isFsUrl?new w(this,x,T):new C(this,x,T);return this._rangeRequestReaders.push(k),k}cancelAllRequests(x){var T;(T=this._fullRequestReader)==null||T.cancel(x);for(const k of this._rangeRequestReaders.slice(0))k.cancel(x)}}t.PDFNodeStream=u;class c{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null;const T=x.source;this._contentLength=T.length,this._loaded=0,this._filename=null,this._disableRange=T.disableRange||!1,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var k;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();return x===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=x.length,(k=this.onProgress)==null||k.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",T=>{this._error(T)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class d{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const T=x.source;this._isStreamingSupported=!T.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var k;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();return x===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=x.length,(k=this.onProgress)==null||k.call(this,{loaded:this._loaded}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",T=>{this._error(T)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(F,x){return{protocol:F.protocol,auth:F.auth,host:F.hostname,port:F.port,path:F.path,method:"GET",headers:x}}class g extends c{constructor(x){super(x);const T=k=>{if(k.statusCode===404){const E=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=E,this._headersCapability.reject(E);return}this._headersCapability.resolve(),this._setReadableStream(k);const H=E=>this._readableStream.headers[E.toLowerCase()],{allowRangeRequests:I,suggestedLength:_}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:H,isHttp:x.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=I,this._contentLength=_||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(H)};if(this._request=null,this._url.protocol==="http:"){const k=require$$5;this._request=k.request(a(this._url,x.httpHeaders),T)}else{const k=require$$5;this._request=k.request(a(this._url,x.httpHeaders),T)}this._request.on("error",k=>{this._storedError=k,this._headersCapability.reject(k)}),this._request.end()}}class C extends d{constructor(x,T,k){super(x),this._httpHeaders={};for(const I in x.httpHeaders){const _=x.httpHeaders[I];_!==void 0&&(this._httpHeaders[I]=_)}this._httpHeaders.Range=`bytes=${T}-${k-1}`;const H=I=>{if(I.statusCode===404){const _=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=_;return}this._setReadableStream(I)};if(this._request=null,this._url.protocol==="http:"){const I=require$$5;this._request=I.request(a(this._url,this._httpHeaders),H)}else{const I=require$$5;this._request=I.request(a(this._url,this._httpHeaders),H)}this._request.on("error",I=>{this._storedError=I}),this._request.end()}}class y extends c{constructor(x){super(x);let T=decodeURIComponent(this._url.path);o.test(this._url.href)&&(T=T.replace(/^\//,""));const k=require$$5;k.lstat(T,(H,I)=>{if(H){H.code==="ENOENT"&&(H=new n.MissingPDFException(`Missing PDF "${T}".`)),this._storedError=H,this._headersCapability.reject(H);return}this._contentLength=I.size,this._setReadableStream(k.createReadStream(T)),this._headersCapability.resolve()})}}class w extends d{constructor(x,T,k){super(x);let H=decodeURIComponent(this._url.path);o.test(this._url.href)&&(H=H.replace(/^\//,""));const I=require$$5;this._setReadableStream(I.createReadStream(H,{start:T,end:k-1}))}}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=s(6),i=s(1);const o={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},r="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/1999/xlink",c=["butt","round","square"],d=["miter","round","bevel"],a=function(I,_="",E=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!E)return URL.createObjectURL(new Blob([I],{type:_}));const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let S=`data:${_};base64,`;for(let m=0,O=I.length;m<O;m+=3){const f=I[m]&255,P=I[m+1]&255,U=I[m+2]&255,ce=f>>2,se=(f&3)<<4|P>>4,ae=m+1<O?(P&15)<<2|U>>6:64,ee=m+2<O?U&63:64;S+=v[ce]+v[se]+v[ae]+v[ee]}return S},g=function(){const I=new Uint8Array([137,80,78,71,13,10,26,10]),_=12,E=new Int32Array(256);for(let U=0;U<256;U++){let ce=U;for(let se=0;se<8;se++)ce=ce&1?3988292384^ce>>1&2147483647:ce>>1&2147483647;E[U]=ce}function v(U,ce,se){let ae=-1;for(let ee=ce;ee<se;ee++){const ue=(ae^U[ee])&255,W=E[ue];ae=ae>>>8^W}return ae^-1}function S(U,ce,se,ae){let ee=ae;const ue=ce.length;se[ee]=ue>>24&255,se[ee+1]=ue>>16&255,se[ee+2]=ue>>8&255,se[ee+3]=ue&255,ee+=4,se[ee]=U.charCodeAt(0)&255,se[ee+1]=U.charCodeAt(1)&255,se[ee+2]=U.charCodeAt(2)&255,se[ee+3]=U.charCodeAt(3)&255,ee+=4,se.set(ce,ee),ee+=ce.length;const W=v(se,ae+4,ee);se[ee]=W>>24&255,se[ee+1]=W>>16&255,se[ee+2]=W>>8&255,se[ee+3]=W&255}function m(U,ce,se){let ae=1,ee=0;for(let ue=ce;ue<se;++ue)ae=(ae+(U[ue]&255))%65521,ee=(ee+ae)%65521;return ee<<16|ae}function O(U){if(!i.isNodeJS)return f(U);try{const ce=parseInt(process.versions.node)>=8?U:Buffer.from(U),se=require$$5.deflateSync(ce,{level:9});return se instanceof Uint8Array?se:new Uint8Array(se)}catch(ce){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ce)}return f(U)}function f(U){let ce=U.length;const se=65535,ae=Math.ceil(ce/se),ee=new Uint8Array(2+ce+ae*5+4);let ue=0;ee[ue++]=120,ee[ue++]=156;let W=0;for(;ce>se;)ee[ue++]=0,ee[ue++]=255,ee[ue++]=255,ee[ue++]=0,ee[ue++]=0,ee.set(U.subarray(W,W+se),ue),ue+=se,W+=se,ce-=se;ee[ue++]=1,ee[ue++]=ce&255,ee[ue++]=ce>>8&255,ee[ue++]=~ce&65535&255,ee[ue++]=(~ce&65535)>>8&255,ee.set(U.subarray(W),ue),ue+=U.length-W;const ie=m(U,0,U.length);return ee[ue++]=ie>>24&255,ee[ue++]=ie>>16&255,ee[ue++]=ie>>8&255,ee[ue++]=ie&255,ee}function P(U,ce,se,ae){const ee=U.width,ue=U.height;let W,ie,he;const j=U.data;switch(ce){case i.ImageKind.GRAYSCALE_1BPP:ie=0,W=1,he=ee+7>>3;break;case i.ImageKind.RGB_24BPP:ie=2,W=8,he=ee*3;break;case i.ImageKind.RGBA_32BPP:ie=6,W=8,he=ee*4;break;default:throw new Error("invalid format")}const b=new Uint8Array((1+he)*ue);let A=0,N=0;for(let ge=0;ge<ue;++ge)b[A++]=0,b.set(j.subarray(N,N+he),A),N+=he,A+=he;if(ce===i.ImageKind.GRAYSCALE_1BPP&&ae){A=0;for(let ge=0;ge<ue;ge++){A++;for(let D=0;D<he;D++)b[A++]^=255}}const z=new Uint8Array([ee>>24&255,ee>>16&255,ee>>8&255,ee&255,ue>>24&255,ue>>16&255,ue>>8&255,ue&255,W,ie,0,0,0]),M=O(b),V=I.length+_*3+z.length+M.length,Y=new Uint8Array(V);let re=0;return Y.set(I,re),re+=I.length,S("IHDR",z,Y,re),re+=_+z.length,S("IDATA",M,Y,re),re+=_+M.length,S("IEND",new Uint8Array(0),Y,re),a(Y,"image/png",se)}return function(ce,se,ae){const ee=ce.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:ce.kind;return P(ce,ee,se,ae)}}();class C{constructor(){this.fontSizeScale=1,this.fontWeight=o.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(_,E){this.x=_,this.y=E}}function y(I){let _=[];const E=[];for(const v of I){if(v.fn==="save"){_.push({fnId:92,fn:"group",items:[]}),E.push(_),_=_.at(-1).items;continue}v.fn==="restore"?_=E.pop():_.push(v)}return _}function w(I){if(Number.isInteger(I))return I.toString();const _=I.toFixed(10);let E=_.length-1;if(_[E]!=="0")return _;do E--;while(_[E]==="0");return _.substring(0,_[E]==="."?E:E+1)}function F(I){if(I[4]===0&&I[5]===0){if(I[1]===0&&I[2]===0)return I[0]===1&&I[3]===1?"":`scale(${w(I[0])} ${w(I[3])})`;if(I[0]===I[3]&&I[1]===-I[2]){const _=Math.acos(I[0])*180/Math.PI;return`rotate(${w(_)})`}}else if(I[0]===1&&I[1]===0&&I[2]===0&&I[3]===1)return`translate(${w(I[4])} ${w(I[5])})`;return`matrix(${w(I[0])} ${w(I[1])} ${w(I[2])} ${w(I[3])} ${w(I[4])} ${w(I[5])})`}let x=0,T=0,k=0;class H{constructor(_,E,v=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new C,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=_,this.objs=E,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!v,this._operatorIdMapping=[];for(const S in i.OPS)this._operatorIdMapping[i.OPS[S]]=S}getObject(_,E=null){return typeof _=="string"?_.startsWith("g_")?this.commonObjs.get(_):this.objs.get(_):E}save(){this.transformStack.push(this.transformMatrix);const _=this.current;this.extraStack.push(_),this.current=_.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(_){this.save(),this.executeOpTree(_),this.restore()}loadDependencies(_){const E=_.fnArray,v=_.argsArray;for(let S=0,m=E.length;S<m;S++)if(E[S]===i.OPS.dependency)for(const O of v[S]){const f=O.startsWith("g_")?this.commonObjs:this.objs,P=new Promise(U=>{f.get(O,U)});this.current.dependencies.push(P)}return Promise.all(this.current.dependencies)}transform(_,E,v,S,m,O){const f=[_,E,v,S,m,O];this.transformMatrix=i.Util.transform(this.transformMatrix,f),this.tgrp=null}getSVG(_,E){this.viewport=E;const v=this._initialize(E);return this.loadDependencies(_).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(_)),v))}convertOpList(_){const E=this._operatorIdMapping,v=_.argsArray,S=_.fnArray,m=[];for(let O=0,f=S.length;O<f;O++){const P=S[O];m.push({fnId:P,fn:E[P],args:v[O]})}return y(m)}executeOpTree(_){for(const E of _){const v=E.fn,S=E.fnId,m=E.args;switch(S|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(m);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(m[0],m[1]);break;case i.OPS.setFont:this.setFont(m);break;case i.OPS.showText:this.showText(m[0]);break;case i.OPS.showSpacedText:this.showText(m[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(m[0],m[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(m[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(m[0]);break;case i.OPS.setHScale:this.setHScale(m[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(m[0],m[1],m[2],m[3],m[4],m[5]);break;case i.OPS.setTextRise:this.setTextRise(m[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(m[0]);break;case i.OPS.setLineWidth:this.setLineWidth(m[0]);break;case i.OPS.setLineJoin:this.setLineJoin(m[0]);break;case i.OPS.setLineCap:this.setLineCap(m[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(m[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(m[0],m[1],m[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(m[0],m[1],m[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(m);break;case i.OPS.setFillColorN:this.setFillColorN(m);break;case i.OPS.shadingFill:this.shadingFill(m[0]);break;case i.OPS.setDash:this.setDash(m[0],m[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(m[0]);break;case i.OPS.setFlatness:this.setFlatness(m[0]);break;case i.OPS.setGState:this.setGState(m[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(m[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(m[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(m[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(m[0],m[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(m[0],m[1],m[2],m[3],m[4],m[5]);break;case i.OPS.constructPath:this.constructPath(m[0],m[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(E.items);break;default:(0,i.warn)(`Unimplemented operator ${v}`);break}}}setWordSpacing(_){this.current.wordSpacing=_}setCharSpacing(_){this.current.charSpacing=_}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(_,E,v,S,m,O){const f=this.current;f.textMatrix=f.lineMatrix=[_,E,v,S,m,O],f.textMatrixScale=Math.hypot(_,E),f.x=f.lineX=0,f.y=f.lineY=0,f.xcoords=[],f.ycoords=[],f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${w(f.fontSize)}px`),f.tspan.setAttributeNS(null,"y",w(-f.y)),f.txtElement=this.svgFactory.createElement("svg:text"),f.txtElement.append(f.tspan)}beginText(){const _=this.current;_.x=_.lineX=0,_.y=_.lineY=0,_.textMatrix=i.IDENTITY_MATRIX,_.lineMatrix=i.IDENTITY_MATRIX,_.textMatrixScale=1,_.tspan=this.svgFactory.createElement("svg:tspan"),_.txtElement=this.svgFactory.createElement("svg:text"),_.txtgrp=this.svgFactory.createElement("svg:g"),_.xcoords=[],_.ycoords=[]}moveText(_,E){const v=this.current;v.x=v.lineX+=_,v.y=v.lineY+=E,v.xcoords=[],v.ycoords=[],v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size",`${w(v.fontSize)}px`),v.tspan.setAttributeNS(null,"y",w(-v.y))}showText(_){const E=this.current,v=E.font,S=E.fontSize;if(S===0)return;const m=E.fontSizeScale,O=E.charSpacing,f=E.wordSpacing,P=E.fontDirection,U=E.textHScale*P,ce=v.vertical,se=ce?1:-1,ae=v.defaultVMetrics,ee=S*E.fontMatrix[0];let ue=0;for(const he of _){if(he===null){ue+=P*f;continue}else if(typeof he=="number"){ue+=se*he*S/1e3;continue}const j=(he.isSpace?f:0)+O,b=he.fontChar;let A,N,z=he.width;if(ce){let V;const Y=he.vmetric||ae;V=he.vmetric?Y[1]:z*.5,V=-V*ee;const re=Y[2]*ee;z=Y?-Y[0]:z,A=V/m,N=(ue+re)/m}else A=ue/m,N=0;(he.isInFont||v.missingFile)&&(E.xcoords.push(E.x+A),ce&&E.ycoords.push(-E.y+N),E.tspan.textContent+=b);const M=ce?z*ee-j*P:z*ee+j*P;ue+=M}E.tspan.setAttributeNS(null,"x",E.xcoords.map(w).join(" ")),ce?E.tspan.setAttributeNS(null,"y",E.ycoords.map(w).join(" ")):E.tspan.setAttributeNS(null,"y",w(-E.y)),ce?E.y-=ue:E.x+=ue*U,E.tspan.setAttributeNS(null,"font-family",E.fontFamily),E.tspan.setAttributeNS(null,"font-size",`${w(E.fontSize)}px`),E.fontStyle!==o.fontStyle&&E.tspan.setAttributeNS(null,"font-style",E.fontStyle),E.fontWeight!==o.fontWeight&&E.tspan.setAttributeNS(null,"font-weight",E.fontWeight);const W=E.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(W===i.TextRenderingMode.FILL||W===i.TextRenderingMode.FILL_STROKE?(E.fillColor!==o.fillColor&&E.tspan.setAttributeNS(null,"fill",E.fillColor),E.fillAlpha<1&&E.tspan.setAttributeNS(null,"fill-opacity",E.fillAlpha)):E.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?E.tspan.setAttributeNS(null,"fill","transparent"):E.tspan.setAttributeNS(null,"fill","none"),W===i.TextRenderingMode.STROKE||W===i.TextRenderingMode.FILL_STROKE){const he=1/(E.textMatrixScale||1);this._setStrokeAttributes(E.tspan,he)}let ie=E.textMatrix;E.textRise!==0&&(ie=ie.slice(),ie[5]+=E.textRise),E.txtElement.setAttributeNS(null,"transform",`${F(ie)} scale(${w(U)}, -1)`),E.txtElement.setAttributeNS(r,"xml:space","preserve"),E.txtElement.append(E.tspan),E.txtgrp.append(E.txtElement),this._ensureTransformGroup().append(E.txtElement)}setLeadingMoveText(_,E){this.setLeading(-E),this.moveText(_,E)}addFontStyle(_){if(!_.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const E=a(_.data,_.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${_.loadedName}"; src: url(${E}); }
`}setFont(_){const E=this.current,v=this.commonObjs.get(_[0]);let S=_[1];E.font=v,this.embedFonts&&!v.missingFile&&!this.embeddedFonts[v.loadedName]&&(this.addFontStyle(v),this.embeddedFonts[v.loadedName]=v),E.fontMatrix=v.fontMatrix||i.FONT_IDENTITY_MATRIX;let m="normal";v.black?m="900":v.bold&&(m="bold");const O=v.italic?"italic":"normal";S<0?(S=-S,E.fontDirection=-1):E.fontDirection=1,E.fontSize=S,E.fontFamily=v.loadedName,E.fontWeight=m,E.fontStyle=O,E.tspan=this.svgFactory.createElement("svg:tspan"),E.tspan.setAttributeNS(null,"y",w(-E.y)),E.xcoords=[],E.ycoords=[]}endText(){var E;const _=this.current;_.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((E=_.txtElement)!=null&&E.hasChildNodes())&&(_.element=_.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(_){_>0&&(this.current.lineWidth=_)}setLineCap(_){this.current.lineCap=c[_]}setLineJoin(_){this.current.lineJoin=d[_]}setMiterLimit(_){this.current.miterLimit=_}setStrokeAlpha(_){this.current.strokeAlpha=_}setStrokeRGBColor(_,E,v){this.current.strokeColor=i.Util.makeHexColor(_,E,v)}setFillAlpha(_){this.current.fillAlpha=_}setFillRGBColor(_,E,v){this.current.fillColor=i.Util.makeHexColor(_,E,v),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(_){this.current.strokeColor=this._makeColorN_Pattern(_)}setFillColorN(_){this.current.fillColor=this._makeColorN_Pattern(_)}shadingFill(_){const{width:E,height:v}=this.viewport,S=i.Util.inverseTransform(this.transformMatrix),[m,O,f,P]=i.Util.getAxialAlignedBoundingBox([0,0,E,v],S),U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x",m),U.setAttributeNS(null,"y",O),U.setAttributeNS(null,"width",f-m),U.setAttributeNS(null,"height",P-O),U.setAttributeNS(null,"fill",this._makeShadingPattern(_)),this.current.fillAlpha<1&&U.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(U)}_makeColorN_Pattern(_){return _[0]==="TilingPattern"?this._makeTilingPattern(_):this._makeShadingPattern(_)}_makeTilingPattern(_){const E=_[1],v=_[2],S=_[3]||i.IDENTITY_MATRIX,[m,O,f,P]=_[4],U=_[5],ce=_[6],se=_[7],ae=`shading${k++}`,[ee,ue,W,ie]=i.Util.normalizeRect([...i.Util.applyTransform([m,O],S),...i.Util.applyTransform([f,P],S)]),[he,j]=i.Util.singularValueDecompose2dScale(S),b=U*he,A=ce*j,N=this.svgFactory.createElement("svg:pattern");N.setAttributeNS(null,"id",ae),N.setAttributeNS(null,"patternUnits","userSpaceOnUse"),N.setAttributeNS(null,"width",b),N.setAttributeNS(null,"height",A),N.setAttributeNS(null,"x",`${ee}`),N.setAttributeNS(null,"y",`${ue}`);const z=this.svg,M=this.transformMatrix,V=this.current.fillColor,Y=this.current.strokeColor,re=this.svgFactory.create(W-ee,ie-ue);if(this.svg=re,this.transformMatrix=S,se===2){const ge=i.Util.makeHexColor(...E);this.current.fillColor=ge,this.current.strokeColor=ge}return this.executeOpTree(this.convertOpList(v)),this.svg=z,this.transformMatrix=M,this.current.fillColor=V,this.current.strokeColor=Y,N.append(re.childNodes[0]),this.defs.append(N),`url(#${ae})`}_makeShadingPattern(_){switch(typeof _=="string"&&(_=this.objs.get(_)),_[0]){case"RadialAxial":const E=`shading${k++}`,v=_[3];let S;switch(_[1]){case"axial":const m=_[4],O=_[5];S=this.svgFactory.createElement("svg:linearGradient"),S.setAttributeNS(null,"id",E),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"x1",m[0]),S.setAttributeNS(null,"y1",m[1]),S.setAttributeNS(null,"x2",O[0]),S.setAttributeNS(null,"y2",O[1]);break;case"radial":const f=_[4],P=_[5],U=_[6],ce=_[7];S=this.svgFactory.createElement("svg:radialGradient"),S.setAttributeNS(null,"id",E),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"cx",P[0]),S.setAttributeNS(null,"cy",P[1]),S.setAttributeNS(null,"r",ce),S.setAttributeNS(null,"fx",f[0]),S.setAttributeNS(null,"fy",f[1]),S.setAttributeNS(null,"fr",U);break;default:throw new Error(`Unknown RadialAxial type: ${_[1]}`)}for(const m of v){const O=this.svgFactory.createElement("svg:stop");O.setAttributeNS(null,"offset",m[0]),O.setAttributeNS(null,"stop-color",m[1]),S.append(O)}return this.defs.append(S),`url(#${E})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${_[0]}`)}}setDash(_,E){this.current.dashArray=_,this.current.dashPhase=E}constructPath(_,E){const v=this.current;let S=v.x,m=v.y,O=[],f=0;for(const P of _)switch(P|0){case i.OPS.rectangle:S=E[f++],m=E[f++];const U=E[f++],ce=E[f++],se=S+U,ae=m+ce;O.push("M",w(S),w(m),"L",w(se),w(m),"L",w(se),w(ae),"L",w(S),w(ae),"Z");break;case i.OPS.moveTo:S=E[f++],m=E[f++],O.push("M",w(S),w(m));break;case i.OPS.lineTo:S=E[f++],m=E[f++],O.push("L",w(S),w(m));break;case i.OPS.curveTo:S=E[f+4],m=E[f+5],O.push("C",w(E[f]),w(E[f+1]),w(E[f+2]),w(E[f+3]),w(S),w(m)),f+=6;break;case i.OPS.curveTo2:O.push("C",w(S),w(m),w(E[f]),w(E[f+1]),w(E[f+2]),w(E[f+3])),S=E[f+2],m=E[f+3],f+=4;break;case i.OPS.curveTo3:S=E[f+2],m=E[f+3],O.push("C",w(E[f]),w(E[f+1]),w(S),w(m),w(S),w(m)),f+=4;break;case i.OPS.closePath:O.push("Z");break}O=O.join(" "),v.path&&_.length>0&&_[0]!==i.OPS.rectangle&&_[0]!==i.OPS.moveTo?O=v.path.getAttributeNS(null,"d")+O:(v.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(v.path)),v.path.setAttributeNS(null,"d",O),v.path.setAttributeNS(null,"fill","none"),v.element=v.path,v.setCurrentPoint(S,m)}endPath(){const _=this.current;if(_.path=null,!this.pendingClip)return;if(!_.element){this.pendingClip=null;return}const E=`clippath${x++}`,v=this.svgFactory.createElement("svg:clipPath");v.setAttributeNS(null,"id",E),v.setAttributeNS(null,"transform",F(this.transformMatrix));const S=_.element.cloneNode(!0);if(this.pendingClip==="evenodd"?S.setAttributeNS(null,"clip-rule","evenodd"):S.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,v.append(S),this.defs.append(v),_.activeClipUrl){_.clipGroup=null;for(const m of this.extraStack)m.clipGroup=null;v.setAttributeNS(null,"clip-path",_.activeClipUrl)}_.activeClipUrl=`url(#${E})`,this.tgrp=null}clip(_){this.pendingClip=_}closePath(){const _=this.current;if(_.path){const E=`${_.path.getAttributeNS(null,"d")}Z`;_.path.setAttributeNS(null,"d",E)}}setLeading(_){this.current.leading=-_}setTextRise(_){this.current.textRise=_}setTextRenderingMode(_){this.current.textRenderingMode=_}setHScale(_){this.current.textHScale=_/100}setRenderingIntent(_){}setFlatness(_){}setGState(_){for(const[E,v]of _)switch(E){case"LW":this.setLineWidth(v);break;case"LC":this.setLineCap(v);break;case"LJ":this.setLineJoin(v);break;case"ML":this.setMiterLimit(v);break;case"D":this.setDash(v[0],v[1]);break;case"RI":this.setRenderingIntent(v);break;case"FL":this.setFlatness(v);break;case"Font":this.setFont(v);break;case"CA":this.setStrokeAlpha(v);break;case"ca":this.setFillAlpha(v);break;default:(0,i.warn)(`Unimplemented graphic state operator ${E}`);break}}fill(){const _=this.current;_.element&&(_.element.setAttributeNS(null,"fill",_.fillColor),_.element.setAttributeNS(null,"fill-opacity",_.fillAlpha),this.endPath())}stroke(){const _=this.current;_.element&&(this._setStrokeAttributes(_.element),_.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(_,E=1){const v=this.current;let S=v.dashArray;E!==1&&S.length>0&&(S=S.map(function(m){return E*m})),_.setAttributeNS(null,"stroke",v.strokeColor),_.setAttributeNS(null,"stroke-opacity",v.strokeAlpha),_.setAttributeNS(null,"stroke-miterlimit",w(v.miterLimit)),_.setAttributeNS(null,"stroke-linecap",v.lineCap),_.setAttributeNS(null,"stroke-linejoin",v.lineJoin),_.setAttributeNS(null,"stroke-width",w(E*v.lineWidth)+"px"),_.setAttributeNS(null,"stroke-dasharray",S.map(w).join(" ")),_.setAttributeNS(null,"stroke-dashoffset",w(E*v.dashPhase)+"px")}eoFill(){var _;(_=this.current.element)==null||_.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var _;(_=this.current.element)==null||_.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const _=this.svgFactory.createElement("svg:rect");_.setAttributeNS(null,"x","0"),_.setAttributeNS(null,"y","0"),_.setAttributeNS(null,"width","1px"),_.setAttributeNS(null,"height","1px"),_.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(_)}paintImageXObject(_){const E=this.getObject(_);if(!E){(0,i.warn)(`Dependent image with object ID ${_} is not ready yet`);return}this.paintInlineImageXObject(E)}paintInlineImageXObject(_,E){const v=_.width,S=_.height,m=g(_,this.forceDataSchema,!!E),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",w(v)),O.setAttributeNS(null,"height",w(S)),this.current.element=O,this.clip("nonzero");const f=this.svgFactory.createElement("svg:image");f.setAttributeNS(u,"xlink:href",m),f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y",w(-S)),f.setAttributeNS(null,"width",w(v)+"px"),f.setAttributeNS(null,"height",w(S)+"px"),f.setAttributeNS(null,"transform",`scale(${w(1/v)} ${w(-1/S)})`),E?E.append(f):this._ensureTransformGroup().append(f)}paintImageMaskXObject(_){const E=this.getObject(_.data,_);if(E.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const v=this.current,S=E.width,m=E.height,O=v.fillColor;v.maskId=`mask${T++}`;const f=this.svgFactory.createElement("svg:mask");f.setAttributeNS(null,"id",v.maskId);const P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width",w(S)),P.setAttributeNS(null,"height",w(m)),P.setAttributeNS(null,"fill",O),P.setAttributeNS(null,"mask",`url(#${v.maskId})`),this.defs.append(f),this._ensureTransformGroup().append(P),this.paintInlineImageXObject(E,f)}paintFormXObjectBegin(_,E){if(Array.isArray(_)&&_.length===6&&this.transform(_[0],_[1],_[2],_[3],_[4],_[5]),E){const v=E[2]-E[0],S=E[3]-E[1],m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x",E[0]),m.setAttributeNS(null,"y",E[1]),m.setAttributeNS(null,"width",w(v)),m.setAttributeNS(null,"height",w(S)),this.current.element=m,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(_){const E=this.svgFactory.create(_.width,_.height),v=this.svgFactory.createElement("svg:defs");E.append(v),this.defs=v;const S=this.svgFactory.createElement("svg:g");return S.setAttributeNS(null,"transform",F(_.transform)),E.append(S),this.svg=S,E}_ensureClipGroup(){if(!this.current.clipGroup){const _=this.svgFactory.createElement("svg:g");_.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(_),this.current.clipGroup=_}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",F(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=H},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class s{static textContent(i){const o=[],r={items:o,styles:Object.create(null)};function u(c){var g;if(!c)return;let d=null;const a=c.name;if(a==="#text")d=c.value;else if(s.shouldBuildText(a))(g=c==null?void 0:c.attributes)!=null&&g.textContent?d=c.attributes.textContent:c.value&&(d=c.value);else return;if(d!==null&&o.push({str:d}),!!c.children)for(const C of c.children)u(C)}return u(i),r}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}t.XfaText=s},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=F,t.updateTextLayer=x;var n=s(1),i=s(6);const o=1e5,r=30,u=.8,c=new Map;function d(T,k){let H;if(k&&n.FeatureTest.isOffscreenCanvasSupported)H=new OffscreenCanvas(T,T).getContext("2d",{alpha:!1});else{const I=document.createElement("canvas");I.width=I.height=T,H=I.getContext("2d",{alpha:!1})}return H}function a(T,k){const H=c.get(T);if(H)return H;const I=d(r,k);I.font=`${r}px ${T}`;const _=I.measureText("");let E=_.fontBoundingBoxAscent,v=Math.abs(_.fontBoundingBoxDescent);if(E){const m=E/(E+v);return c.set(T,m),I.canvas.width=I.canvas.height=0,m}I.strokeStyle="red",I.clearRect(0,0,r,r),I.strokeText("g",0,0);let S=I.getImageData(0,0,r,r).data;v=0;for(let m=S.length-1-3;m>=0;m-=4)if(S[m]>0){v=Math.ceil(m/4/r);break}I.clearRect(0,0,r,r),I.strokeText("A",0,r),S=I.getImageData(0,0,r,r).data,E=0;for(let m=0,O=S.length;m<O;m+=4)if(S[m]>0){E=r-Math.floor(m/4/r);break}if(I.canvas.width=I.canvas.height=0,E){const m=E/(E+v);return c.set(T,m),m}return c.set(T,u),u}function g(T,k,H){const I=document.createElement("span"),_={angle:0,canvasWidth:0,hasText:k.str!=="",hasEOL:k.hasEOL,fontSize:0};T._textDivs.push(I);const E=n.Util.transform(T._transform,k.transform);let v=Math.atan2(E[1],E[0]);const S=H[k.fontName];S.vertical&&(v+=Math.PI/2);const m=Math.hypot(E[2],E[3]),O=m*a(S.fontFamily,T._isOffscreenCanvasSupported);let f,P;v===0?(f=E[4],P=E[5]-O):(f=E[4]+O*Math.sin(v),P=E[5]-O*Math.cos(v));const U="calc(var(--scale-factor)*",ce=I.style;T._container===T._rootContainer?(ce.left=`${(100*f/T._pageWidth).toFixed(2)}%`,ce.top=`${(100*P/T._pageHeight).toFixed(2)}%`):(ce.left=`${U}${f.toFixed(2)}px)`,ce.top=`${U}${P.toFixed(2)}px)`),ce.fontSize=`${U}${m.toFixed(2)}px)`,ce.fontFamily=S.fontFamily,_.fontSize=m,I.setAttribute("role","presentation"),I.textContent=k.str,I.dir=k.dir,T._fontInspectorEnabled&&(I.dataset.fontName=k.fontName),v!==0&&(_.angle=v*(180/Math.PI));let se=!1;if(k.str.length>1)se=!0;else if(k.str!==" "&&k.transform[0]!==k.transform[3]){const ae=Math.abs(k.transform[0]),ee=Math.abs(k.transform[3]);ae!==ee&&Math.max(ae,ee)/Math.min(ae,ee)>1.5&&(se=!0)}se&&(_.canvasWidth=S.vertical?k.height:k.width),T._textDivProperties.set(I,_),T._isReadableStream&&T._layoutText(I)}function C(T){const{div:k,scale:H,properties:I,ctx:_,prevFontSize:E,prevFontFamily:v}=T,{style:S}=k;let m="";if(I.canvasWidth!==0&&I.hasText){const{fontFamily:O}=S,{canvasWidth:f,fontSize:P}=I;(E!==P||v!==O)&&(_.font=`${P*H}px ${O}`,T.prevFontSize=P,T.prevFontFamily=O);const{width:U}=_.measureText(k.textContent);U>0&&(m=`scaleX(${f*H/U})`)}I.angle!==0&&(m=`rotate(${I.angle}deg) ${m}`),m.length>0&&(S.transform=m)}function y(T){if(T._canceled)return;const k=T._textDivs,H=T._capability;if(k.length>o){H.resolve();return}if(!T._isReadableStream)for(const _ of k)T._layoutText(_);H.resolve()}class w{constructor({textContentSource:k,container:H,viewport:I,textDivs:_,textDivProperties:E,textContentItemsStr:v,isOffscreenCanvasSupported:S}){var U;this._textContentSource=k,this._isReadableStream=k instanceof ReadableStream,this._container=this._rootContainer=H,this._textDivs=_||[],this._textContentItemsStr=v||[],this._isOffscreenCanvasSupported=S,this._fontInspectorEnabled=!!((U=globalThis.FontInspector)!=null&&U.enabled),this._reader=null,this._textDivProperties=E||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:d(0,S)};const{pageWidth:m,pageHeight:O,pageX:f,pageY:P}=I.rawDims;this._transform=[1,0,0,-1,-f,P+O],this._pageWidth=m,this._pageHeight=O,(0,i.setLayerDimensions)(H,I),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(k,H){for(const I of k){if(I.str===void 0){if(I.type==="beginMarkedContentProps"||I.type==="beginMarkedContent"){const _=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),I.id!==null&&this._container.setAttribute("id",`${I.id}`),_.append(this._container)}else I.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(I.str),g(this,I,H)}}_layoutText(k){const H=this._layoutTextParams.properties=this._textDivProperties.get(k);if(this._layoutTextParams.div=k,C(this._layoutTextParams),H.hasText&&this._container.append(k),H.hasEOL){const I=document.createElement("br");I.setAttribute("role","presentation"),this._container.append(I)}}_render(){const k=new n.PromiseCapability;let H=Object.create(null);if(this._isReadableStream){const I=()=>{this._reader.read().then(({value:_,done:E})=>{if(E){k.resolve();return}Object.assign(H,_.styles),this._processItems(_.items,H),I()},k.reject)};this._reader=this._textContentSource.getReader(),I()}else if(this._textContentSource){const{items:I,styles:_}=this._textContentSource;this._processItems(I,_),k.resolve()}else throw new Error('No "textContentSource" parameter specified.');k.promise.then(()=>{H=null,y(this)},this._capability.reject)}}t.TextLayerRenderTask=w;function F(T){!T.textContentSource&&(T.textContent||T.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),T.textContentSource=T.textContent||T.textContentStream);const{container:k,viewport:H}=T,I=getComputedStyle(k),_=I.getPropertyValue("visibility"),E=parseFloat(I.getPropertyValue("--scale-factor"));_==="visible"&&(!E||Math.abs(E-H.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const v=new w(T);return v._render(),v}function x({container:T,viewport:k,textDivs:H,textDivProperties:I,isOffscreenCanvasSupported:_,mustRotate:E=!0,mustRescale:v=!0}){if(E&&(0,i.setLayerDimensions)(T,{rotation:k.rotation}),v){const S=d(0,_),O={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:S};for(const f of H)O.properties=I.get(f),O.div=f,C(O)}}},(e,t,s)=>{var a,g,C,y,w,F,x,T,k,H,I,Zt,Pt,en,tn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=s(1),i=s(4),o=s(28),r=s(33),u=s(6),c=s(34);const m=class m{constructor({uiManager:f,pageIndex:P,div:U,accessibilityManager:ce,annotationLayer:se,viewport:ae,l10n:ee}){me(this,I);me(this,a);me(this,g,!1);me(this,C,null);me(this,y,this.pointerup.bind(this));me(this,w,this.pointerdown.bind(this));me(this,F,new Map);me(this,x,!1);me(this,T,!1);me(this,k,!1);me(this,H);const ue=[o.FreeTextEditor,r.InkEditor,c.StampEditor];if(!m._initialized){m._initialized=!0;for(const W of ue)W.initialize(ee)}f.registerEditorTypes(ue),ve(this,H,f),this.pageIndex=P,this.div=U,ve(this,a,ce),ve(this,C,se),this.viewport=ae,l(this,H).addLayer(this)}get isEmpty(){return l(this,F).size===0}updateToolbar(f){l(this,H).updateToolbar(f)}updateMode(f=l(this,H).getMode()){le(this,I,tn).call(this),f===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),f!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",f===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",f===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",f===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(f){if(!f&&l(this,H).getMode()!==n.AnnotationEditorType.INK)return;if(!f){for(const U of l(this,F).values())if(U.isEmpty()){U.setInBackground();return}}le(this,I,Pt).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(f){l(this,H).setEditingState(f)}addCommands(f){l(this,H).addCommands(f)}enable(){this.div.style.pointerEvents="auto";const f=new Set;for(const U of l(this,F).values())U.enableEditing(),U.annotationElementId&&f.add(U.annotationElementId);if(!l(this,C))return;const P=l(this,C).getEditableAnnotations();for(const U of P){if(U.hide(),l(this,H).isDeletedAnnotationElement(U.data.id)||f.has(U.data.id))continue;const ce=this.deserialize(U);ce&&(this.addOrRebuild(ce),ce.enableEditing())}}disable(){var P;ve(this,k,!0),this.div.style.pointerEvents="none";const f=new Set;for(const U of l(this,F).values()){if(U.disableEditing(),!U.annotationElementId||U.serialize()!==null){f.add(U.annotationElementId);continue}(P=this.getEditableAnnotation(U.annotationElementId))==null||P.show(),U.remove()}if(l(this,C)){const U=l(this,C).getEditableAnnotations();for(const ce of U){const{id:se}=ce.data;f.has(se)||l(this,H).isDeletedAnnotationElement(se)||ce.show()}}le(this,I,tn).call(this),this.isEmpty&&(this.div.hidden=!0),ve(this,k,!1)}getEditableAnnotation(f){var P;return((P=l(this,C))==null?void 0:P.getEditableAnnotation(f))||null}setActiveEditor(f){l(this,H).getActive()!==f&&l(this,H).setActiveEditor(f)}enableClick(){this.div.addEventListener("pointerdown",l(this,w)),this.div.addEventListener("pointerup",l(this,y))}disableClick(){this.div.removeEventListener("pointerdown",l(this,w)),this.div.removeEventListener("pointerup",l(this,y))}attach(f){l(this,F).set(f.id,f);const{annotationElementId:P}=f;P&&l(this,H).isDeletedAnnotationElement(P)&&l(this,H).removeDeletedAnnotationElement(f)}detach(f){var P;l(this,F).delete(f.id),(P=l(this,a))==null||P.removePointerInTextLayer(f.contentDiv),!l(this,k)&&f.annotationElementId&&l(this,H).addDeletedAnnotationElement(f)}remove(f){this.detach(f),l(this,H).removeEditor(f),f.div.contains(document.activeElement)&&setTimeout(()=>{l(this,H).focusMainContainer()},0),f.div.remove(),f.isAttachedToDOM=!1,l(this,T)||this.addInkEditorIfNeeded(!1)}changeParent(f){var P;f.parent!==this&&(f.annotationElementId&&(l(this,H).addDeletedAnnotationElement(f.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(f),f.annotationElementId=null),this.attach(f),(P=f.parent)==null||P.detach(f),f.setParent(this),f.div&&f.isAttachedToDOM&&(f.div.remove(),this.div.append(f.div)))}add(f){if(this.changeParent(f),l(this,H).addEditor(f),this.attach(f),!f.isAttachedToDOM){const P=f.render();this.div.append(P),f.isAttachedToDOM=!0}f.fixAndSetPosition(),f.onceAdded(),l(this,H).addToAnnotationStorage(f)}moveEditorInDOM(f){var U;if(!f.isAttachedToDOM)return;const{activeElement:P}=document;f.div.contains(P)&&(f._focusEventsAllowed=!1,setTimeout(()=>{f.div.contains(document.activeElement)?f._focusEventsAllowed=!0:(f.div.addEventListener("focusin",()=>{f._focusEventsAllowed=!0},{once:!0}),P.focus())},0)),f._structTreeParentId=(U=l(this,a))==null?void 0:U.moveElementInDOM(this.div,f.div,f.contentDiv,!0)}addOrRebuild(f){f.needsToBeRebuilt()?f.rebuild():this.add(f)}addUndoableEditor(f){const P=()=>f._uiManager.rebuild(f),U=()=>{f.remove()};this.addCommands({cmd:P,undo:U,mustExec:!1})}getNextId(){return l(this,H).getId()}pasteEditor(f,P){l(this,H).updateToolbar(f),l(this,H).updateMode(f);const{offsetX:U,offsetY:ce}=le(this,I,en).call(this),se=this.getNextId(),ae=le(this,I,Zt).call(this,{parent:this,id:se,x:U,y:ce,uiManager:l(this,H),isCentered:!0,...P});ae&&this.add(ae)}deserialize(f){switch(f.annotationType??f.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(f,this,l(this,H));case n.AnnotationEditorType.INK:return r.InkEditor.deserialize(f,this,l(this,H));case n.AnnotationEditorType.STAMP:return c.StampEditor.deserialize(f,this,l(this,H))}return null}addNewEditor(){le(this,I,Pt).call(this,le(this,I,en).call(this),!0)}setSelected(f){l(this,H).setSelected(f)}toggleSelected(f){l(this,H).toggleSelected(f)}isSelected(f){return l(this,H).isSelected(f)}unselect(f){l(this,H).unselect(f)}pointerup(f){const{isMac:P}=n.FeatureTest.platform;if(!(f.button!==0||f.ctrlKey&&P)&&f.target===this.div&&l(this,x)){if(ve(this,x,!1),!l(this,g)){ve(this,g,!0);return}if(l(this,H).getMode()===n.AnnotationEditorType.STAMP){l(this,H).unselectAll();return}le(this,I,Pt).call(this,f,!1)}}pointerdown(f){if(l(this,x)){ve(this,x,!1);return}const{isMac:P}=n.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&P||f.target!==this.div)return;ve(this,x,!0);const U=l(this,H).getActive();ve(this,g,!U||U.isEmpty())}findNewParent(f,P,U){const ce=l(this,H).findParent(P,U);return ce===null||ce===this?!1:(ce.changeParent(f),!0)}destroy(){var f,P;((f=l(this,H).getActive())==null?void 0:f.parent)===this&&(l(this,H).commitOrRemove(),l(this,H).setActiveEditor(null));for(const U of l(this,F).values())(P=l(this,a))==null||P.removePointerInTextLayer(U.contentDiv),U.setParent(null),U.isAttachedToDOM=!1,U.div.remove();this.div=null,l(this,F).clear(),l(this,H).removeLayer(this)}render({viewport:f}){this.viewport=f,(0,u.setLayerDimensions)(this.div,f);for(const P of l(this,H).getEditors(this.pageIndex))this.add(P);this.updateMode()}update({viewport:f}){l(this,H).commitOrRemove(),this.viewport=f,(0,u.setLayerDimensions)(this.div,{rotation:f.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:f,pageHeight:P}=this.viewport.rawDims;return[f,P]}};a=new WeakMap,g=new WeakMap,C=new WeakMap,y=new WeakMap,w=new WeakMap,F=new WeakMap,x=new WeakMap,T=new WeakMap,k=new WeakMap,H=new WeakMap,I=new WeakSet,Zt=function(f){switch(l(this,H).getMode()){case n.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(f);case n.AnnotationEditorType.INK:return new r.InkEditor(f);case n.AnnotationEditorType.STAMP:return new c.StampEditor(f)}return null},Pt=function(f,P){const U=this.getNextId(),ce=le(this,I,Zt).call(this,{parent:this,id:U,x:f.offsetX,y:f.offsetY,uiManager:l(this,H),isCentered:P});return ce&&this.add(ce),ce},en=function(){const{x:f,y:P,width:U,height:ce}=this.div.getBoundingClientRect(),se=Math.max(0,f),ae=Math.max(0,P),ee=Math.min(window.innerWidth,f+U),ue=Math.min(window.innerHeight,P+ce),W=(se+ee)/2-f,ie=(ae+ue)/2-P,[he,j]=this.viewport.rotation%180===0?[W,ie]:[ie,W];return{offsetX:he,offsetY:j}},tn=function(){ve(this,T,!0);for(const f of l(this,F).values())f.isEmpty()&&f.remove();ve(this,T,!1)},Qe(m,"_initialized",!1);let d=m;t.AnnotationEditorLayer=d},(e,t,s)=>{var c,d,a,g,C,y,w,F,x,T,kn,Fn,Mn,bt,nn,In,sn;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=s(1),i=s(5),o=s(4),r=s(29);const m=class m extends o.AnnotationEditor{constructor(P){super({...P,name:"freeTextEditor"});me(this,T);me(this,c,this.editorDivBlur.bind(this));me(this,d,this.editorDivFocus.bind(this));me(this,a,this.editorDivInput.bind(this));me(this,g,this.editorDivKeydown.bind(this));me(this,C);me(this,y,"");me(this,w,`${this.id}-editor`);me(this,F);me(this,x,null);ve(this,C,P.color||m._defaultColor||o.AnnotationEditor._defaultLineColor),ve(this,F,P.fontSize||m._defaultFontSize)}static get _keyboardManager(){const P=m.prototype,U=ae=>ae.isEmpty(),ce=i.AnnotationEditorUIManager.TRANSLATE_SMALL,se=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],P.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],P.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],P._translateEmpty,{args:[-ce,0],checker:U}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],P._translateEmpty,{args:[-se,0],checker:U}],[["ArrowRight","mac+ArrowRight"],P._translateEmpty,{args:[ce,0],checker:U}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],P._translateEmpty,{args:[se,0],checker:U}],[["ArrowUp","mac+ArrowUp"],P._translateEmpty,{args:[0,-ce],checker:U}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],P._translateEmpty,{args:[0,-se],checker:U}],[["ArrowDown","mac+ArrowDown"],P._translateEmpty,{args:[0,ce],checker:U}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],P._translateEmpty,{args:[0,se],checker:U}]]))}static initialize(P){o.AnnotationEditor.initialize(P,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const U=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(U.getPropertyValue("--freetext-padding"))}static updateDefaultParams(P,U){switch(P){case n.AnnotationEditorParamsType.FREETEXT_SIZE:m._defaultFontSize=U;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:m._defaultColor=U;break}}updateParams(P,U){switch(P){case n.AnnotationEditorParamsType.FREETEXT_SIZE:le(this,T,kn).call(this,U);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:le(this,T,Fn).call(this,U);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,m._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,m._defaultColor||o.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,l(this,F)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,l(this,C)]]}_translateEmpty(P,U){this._uiManager.translateSelectedEditors(P,U,!0)}getInitialTranslation(){const P=this.parentScale;return[-m._internalPadding*P,-(m._internalPadding+l(this,F))*P]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",l(this,g)),this.editorDiv.addEventListener("focus",l(this,d)),this.editorDiv.addEventListener("blur",l(this,c)),this.editorDiv.addEventListener("input",l(this,a)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,w)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",l(this,g)),this.editorDiv.removeEventListener("focus",l(this,d)),this.editorDiv.removeEventListener("blur",l(this,c)),this.editorDiv.removeEventListener("input",l(this,a)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(P){this._focusEventsAllowed&&(super.focusin(P),P.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var P;if(this.width){le(this,T,sn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(P=this._initialOptions)!=null&&P.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const P=l(this,y),U=ve(this,y,le(this,T,Mn).call(this).trimEnd());if(P===U)return;const ce=se=>{if(ve(this,y,se),!se){this.remove();return}le(this,T,nn).call(this),this._uiManager.rebuild(this),le(this,T,bt).call(this)};this.addCommands({cmd:()=>{ce(U)},undo:()=>{ce(P)},mustExec:!1}),le(this,T,bt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(P){this.enterInEditMode()}keydown(P){P.target===this.div&&P.key==="Enter"&&(this.enterInEditMode(),P.preventDefault())}editorDivKeydown(P){m._keyboardManager.exec(this,P)}editorDivFocus(P){this.isEditing=!0}editorDivBlur(P){this.isEditing=!1}editorDivInput(P){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let P,U;this.width&&(P=this.x,U=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,w)),this.enableEditing(),o.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(se=>{var ae;return(ae=this.editorDiv)==null?void 0:ae.setAttribute("aria-label",se)}),o.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(se=>{var ae;return(ae=this.editorDiv)==null?void 0:ae.setAttribute("default-content",se)}),this.editorDiv.contentEditable=!0;const{style:ce}=this.editorDiv;if(ce.fontSize=`calc(${l(this,F)}px * var(--scale-factor))`,ce.color=l(this,C),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[se,ae]=this.parentDimensions;if(this.annotationElementId){const{position:ee}=l(this,x);let[ue,W]=this.getInitialTranslation();[ue,W]=this.pageTranslationToScreen(ue,W);const[ie,he]=this.pageDimensions,[j,b]=this.pageTranslation;let A,N;switch(this.rotation){case 0:A=P+(ee[0]-j)/ie,N=U+this.height-(ee[1]-b)/he;break;case 90:A=P+(ee[0]-j)/ie,N=U-(ee[1]-b)/he,[ue,W]=[W,-ue];break;case 180:A=P-this.width+(ee[0]-j)/ie,N=U-(ee[1]-b)/he,[ue,W]=[-ue,-W];break;case 270:A=P+(ee[0]-j-this.height*he)/ie,N=U+(ee[1]-b-this.width*ie)/he,[ue,W]=[-W,ue];break}this.setAt(A*se,N*ae,ue,W)}else this.setAt(P*se,U*ae,this.width*se,this.height*ae);le(this,T,nn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(P,U,ce){let se=null;if(P instanceof r.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:ee,fontColor:ue},rect:W,rotation:ie,id:he},textContent:j,textPosition:b,parent:{page:{pageNumber:A}}}=P;if(!j||j.length===0)return null;se=P={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(ue),fontSize:ee,value:j.join(`
`),position:b,pageIndex:A-1,rect:W,rotation:ie,id:he,deleted:!1}}const ae=super.deserialize(P,U,ce);return ve(ae,F,P.fontSize),ve(ae,C,n.Util.makeHexColor(...P.color)),ve(ae,y,P.value),ae.annotationElementId=P.id||null,ve(ae,x,se),ae}serialize(P=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const U=m._internalPadding*this.parentScale,ce=this.getRect(U,U),se=o.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,C)),ae={annotationType:n.AnnotationEditorType.FREETEXT,color:se,fontSize:l(this,F),value:l(this,y),pageIndex:this.pageIndex,rect:ce,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return P?ae:this.annotationElementId&&!le(this,T,In).call(this,ae)?null:(ae.id=this.annotationElementId,ae)}};c=new WeakMap,d=new WeakMap,a=new WeakMap,g=new WeakMap,C=new WeakMap,y=new WeakMap,w=new WeakMap,F=new WeakMap,x=new WeakMap,T=new WeakSet,kn=function(P){const U=se=>{this.editorDiv.style.fontSize=`calc(${se}px * var(--scale-factor))`,this.translate(0,-(se-l(this,F))*this.parentScale),ve(this,F,se),le(this,T,bt).call(this)},ce=l(this,F);this.addCommands({cmd:()=>{U(P)},undo:()=>{U(ce)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Fn=function(P){const U=l(this,C);this.addCommands({cmd:()=>{ve(this,C,this.editorDiv.style.color=P)},undo:()=>{ve(this,C,this.editorDiv.style.color=U)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Mn=function(){const P=this.editorDiv.getElementsByTagName("div");if(P.length===0)return this.editorDiv.innerText;const U=[];for(const ce of P)U.push(ce.innerText.replace(/\r\n?|\n/,""));return U.join(`
`)},bt=function(){const[P,U]=this.parentDimensions;let ce;if(this.isAttachedToDOM)ce=this.div.getBoundingClientRect();else{const{currentLayer:se,div:ae}=this,ee=ae.style.display;ae.style.display="hidden",se.div.append(this.div),ce=ae.getBoundingClientRect(),ae.remove(),ae.style.display=ee}this.rotation%180===this.parentRotation%180?(this.width=ce.width/P,this.height=ce.height/U):(this.width=ce.height/P,this.height=ce.width/U),this.fixAndSetPosition()},nn=function(){if(this.editorDiv.replaceChildren(),!!l(this,y))for(const P of l(this,y).split(`
`)){const U=document.createElement("div");U.append(P?document.createTextNode(P):document.createElement("br")),this.editorDiv.append(U)}},In=function(P){const{value:U,fontSize:ce,color:se,rect:ae,pageIndex:ee}=l(this,x);return P.value!==U||P.fontSize!==ce||P.rect.some((ue,W)=>Math.abs(ue-ae[W])>=1)||P.color.some((ue,W)=>ue!==se[W])||P.pageIndex!==ee},sn=function(P=!1){if(!this.annotationElementId)return;if(le(this,T,bt).call(this),!P&&(this.width===0||this.height===0)){setTimeout(()=>le(this,T,sn).call(this,!0),0);return}const U=m._internalPadding*this.parentScale;l(this,x).rect=this.getRect(U,U)},Qe(m,"_freeTextDefaultContent",""),Qe(m,"_internalPadding",0),Qe(m,"_defaultColor",null),Qe(m,"_defaultFontSize",10),Qe(m,"_type","freetext");let u=m;t.FreeTextEditor=u},(e,t,s)=>{var N,M,at,Dn,re,ge,D,L,q,ne,X,G,R,B,J,Q,de,fe,_e,te,Te,Ce,On,Rt,rn,on,De,ze,Xe,Ee,pe,be,Me,an,qe,Z,Se,Re,Nn,ln;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var n=s(1),i=s(6),o=s(3),r=s(30),u=s(31),c=s(32);const d=1e3,a=9,g=new WeakSet;function C(Ie){return{width:Ie[2]-Ie[0],height:Ie[3]-Ie[1]}}class y{static create(K){switch(K.data.annotationType){case n.AnnotationType.LINK:return new F(K);case n.AnnotationType.TEXT:return new x(K);case n.AnnotationType.WIDGET:switch(K.data.fieldType){case"Tx":return new k(K);case"Btn":return K.data.radioButton?new _(K):K.data.checkBox?new I(K):new E(K);case"Ch":return new v(K);case"Sig":return new H(K)}return new T(K);case n.AnnotationType.POPUP:return new S(K);case n.AnnotationType.FREETEXT:return new O(K);case n.AnnotationType.LINE:return new f(K);case n.AnnotationType.SQUARE:return new P(K);case n.AnnotationType.CIRCLE:return new U(K);case n.AnnotationType.POLYLINE:return new ce(K);case n.AnnotationType.CARET:return new ae(K);case n.AnnotationType.INK:return new ee(K);case n.AnnotationType.POLYGON:return new se(K);case n.AnnotationType.HIGHLIGHT:return new ue(K);case n.AnnotationType.UNDERLINE:return new W(K);case n.AnnotationType.SQUIGGLY:return new ie(K);case n.AnnotationType.STRIKEOUT:return new he(K);case n.AnnotationType.STAMP:return new j(K);case n.AnnotationType.FILEATTACHMENT:return new b(K);default:return new w(K)}}}const z=class z{constructor(K,{isRenderable:$=!1,ignoreBorder:oe=!1,createQuadrilaterals:ye=!1}={}){me(this,N,!1);this.isRenderable=$,this.data=K.data,this.layer=K.layer,this.linkService=K.linkService,this.downloadManager=K.downloadManager,this.imageResourcesPath=K.imageResourcesPath,this.renderForms=K.renderForms,this.svgFactory=K.svgFactory,this.annotationStorage=K.annotationStorage,this.enableScripting=K.enableScripting,this.hasJSActions=K.hasJSActions,this._fieldObjects=K.fieldObjects,this.parent=K.parent,$&&(this.container=this._createContainer(oe)),ye&&this._createQuadrilaterals()}static _hasPopupData({titleObj:K,contentsObj:$,richText:oe}){return!!(K!=null&&K.str||$!=null&&$.str||oe!=null&&oe.str)}get hasPopupData(){return z._hasPopupData(this.data)}_createContainer(K){const{data:$,parent:{page:oe,viewport:ye}}=this,Ae=document.createElement("section");Ae.setAttribute("data-annotation-id",$.id),this instanceof T||(Ae.tabIndex=d),Ae.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Ae.setAttribute("aria-haspopup","dialog"),$.noRotate&&Ae.classList.add("norotate");const{pageWidth:we,pageHeight:Pe,pageX:Ve,pageY:Oe}=ye.rawDims;if(!$.rect||this instanceof S){const{rotation:$e}=$;return!$.hasOwnCanvas&&$e!==0&&this.setRotation($e,Ae),Ae}const{width:xe,height:We}=C($.rect),Le=n.Util.normalizeRect([$.rect[0],oe.view[3]-$.rect[1]+oe.view[1],$.rect[2],oe.view[3]-$.rect[3]+oe.view[1]]);if(!K&&$.borderStyle.width>0){Ae.style.borderWidth=`${$.borderStyle.width}px`;const $e=$.borderStyle.horizontalCornerRadius,Ge=$.borderStyle.verticalCornerRadius;if($e>0||Ge>0){const Je=`calc(${$e}px * var(--scale-factor)) / calc(${Ge}px * var(--scale-factor))`;Ae.style.borderRadius=Je}else if(this instanceof _){const Je=`calc(${xe}px * var(--scale-factor)) / calc(${We}px * var(--scale-factor))`;Ae.style.borderRadius=Je}switch($.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:Ae.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:Ae.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:Ae.style.borderBottomStyle="solid";break}const Ye=$.borderColor||null;Ye?(ve(this,N,!0),Ae.style.borderColor=n.Util.makeHexColor(Ye[0]|0,Ye[1]|0,Ye[2]|0)):Ae.style.borderWidth=0}Ae.style.left=`${100*(Le[0]-Ve)/we}%`,Ae.style.top=`${100*(Le[1]-Oe)/Pe}%`;const{rotation:He}=$;return $.hasOwnCanvas||He===0?(Ae.style.width=`${100*xe/we}%`,Ae.style.height=`${100*We/Pe}%`):this.setRotation(He,Ae),Ae}setRotation(K,$=this.container){if(!this.data.rect)return;const{pageWidth:oe,pageHeight:ye}=this.parent.viewport.rawDims,{width:Ae,height:we}=C(this.data.rect);let Pe,Ve;K%180===0?(Pe=100*Ae/oe,Ve=100*we/ye):(Pe=100*we/oe,Ve=100*Ae/ye),$.style.width=`${Pe}%`,$.style.height=`${Ve}%`,$.setAttribute("data-main-rotation",(360-K)%360)}get _commonActions(){const K=($,oe,ye)=>{const Ae=ye.detail[$],we=Ae[0],Pe=Ae.slice(1);ye.target.style[oe]=r.ColorConverters[`${we}_HTML`](Pe),this.annotationStorage.setValue(this.data.id,{[oe]:r.ColorConverters[`${we}_rgb`](Pe)})};return(0,n.shadow)(this,"_commonActions",{display:$=>{const{display:oe}=$.detail,ye=oe%2===1;this.container.style.visibility=ye?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ye,noPrint:oe===1||oe===2})},print:$=>{this.annotationStorage.setValue(this.data.id,{noPrint:!$.detail.print})},hidden:$=>{const{hidden:oe}=$.detail;this.container.style.visibility=oe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:oe,noView:oe})},focus:$=>{setTimeout(()=>$.target.focus({preventScroll:!1}),0)},userName:$=>{$.target.title=$.detail.userName},readonly:$=>{$.target.disabled=$.detail.readonly},required:$=>{this._setRequired($.target,$.detail.required)},bgColor:$=>{K("bgColor","backgroundColor",$)},fillColor:$=>{K("fillColor","backgroundColor",$)},fgColor:$=>{K("fgColor","color",$)},textColor:$=>{K("textColor","color",$)},borderColor:$=>{K("borderColor","borderColor",$)},strokeColor:$=>{K("strokeColor","borderColor",$)},rotation:$=>{const oe=$.detail.rotation;this.setRotation(oe),this.annotationStorage.setValue(this.data.id,{rotation:oe})}})}_dispatchEventFromSandbox(K,$){const oe=this._commonActions;for(const ye of Object.keys($.detail)){const Ae=K[ye]||oe[ye];Ae==null||Ae($)}}_setDefaultPropertiesFromJS(K){if(!this.enableScripting)return;const $=this.annotationStorage.getRawValue(this.data.id);if(!$)return;const oe=this._commonActions;for(const[ye,Ae]of Object.entries($)){const we=oe[ye];if(we){const Pe={detail:{[ye]:Ae},target:K};we(Pe),delete $[ye]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:K}=this.data;if(!K)return;const[$,oe,ye,Ae]=this.data.rect;if(K.length===1){const[,{x:Ge,y:Ye},{x:Je,y:et}]=K[0];if(ye===Ge&&Ae===Ye&&$===Je&&oe===et)return}const{style:we}=this.container;let Pe;if(l(this,N)){const{borderColor:Ge,borderWidth:Ye}=we;we.borderWidth=0,Pe=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ge}" stroke-width="${Ye}">`],this.container.classList.add("hasBorder")}const Ve=ye-$,Oe=Ae-oe,{svgFactory:xe}=this,We=xe.createElement("svg");We.classList.add("quadrilateralsContainer"),We.setAttribute("width",0),We.setAttribute("height",0);const Le=xe.createElement("defs");We.append(Le);const He=xe.createElement("clipPath"),$e=`clippath_${this.data.id}`;He.setAttribute("id",$e),He.setAttribute("clipPathUnits","objectBoundingBox"),Le.append(He);for(const[,{x:Ge,y:Ye},{x:Je,y:et}]of K){const Ze=xe.createElement("rect"),st=(Je-$)/Ve,rt=(Ae-Ye)/Oe,ot=(Ge-Je)/Ve,_n=(Ye-et)/Oe;Ze.setAttribute("x",st),Ze.setAttribute("y",rt),Ze.setAttribute("width",ot),Ze.setAttribute("height",_n),He.append(Ze),Pe==null||Pe.push(`<rect vector-effect="non-scaling-stroke" x="${st}" y="${rt}" width="${ot}" height="${_n}"/>`)}l(this,N)&&(Pe.push("</g></svg>')"),we.backgroundImage=Pe.join("")),this.container.append(We),this.container.style.clipPath=`url(#${$e})`}_createPopup(){const{container:K,data:$}=this;K.setAttribute("aria-haspopup","dialog");const oe=new S({data:{color:$.color,titleObj:$.titleObj,modificationDate:$.modificationDate,contentsObj:$.contentsObj,richText:$.richText,parentRect:$.rect,borderStyle:0,id:`popup_${$.id}`,rotation:$.rotation},parent:this.parent,elements:[this]});this.parent.div.append(oe.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(K,$=null){const oe=[];if(this._fieldObjects){const ye=this._fieldObjects[K];if(ye)for(const{page:Ae,id:we,exportValues:Pe}of ye){if(Ae===-1||we===$)continue;const Ve=typeof Pe=="string"?Pe:null,Oe=document.querySelector(`[data-element-id="${we}"]`);if(Oe&&!g.has(Oe)){(0,n.warn)(`_getElementsByName - element not allowed: ${we}`);continue}oe.push({id:we,exportValue:Ve,domElement:Oe})}return oe}for(const ye of document.getElementsByName(K)){const{exportValue:Ae}=ye,we=ye.getAttribute("data-element-id");we!==$&&g.has(ye)&&oe.push({id:we,exportValue:Ae,domElement:ye})}return oe}show(){var K;this.container&&(this.container.hidden=!1),(K=this.popup)==null||K.maybeShow()}hide(){var K;this.container&&(this.container.hidden=!0),(K=this.popup)==null||K.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const K=this.getElementsToTriggerPopup();if(Array.isArray(K))for(const $ of K)$.classList.add("highlightArea");else K.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:K,data:{id:$}}=this;this.container.addEventListener("dblclick",()=>{var oe;(oe=this.linkService.eventBus)==null||oe.dispatch("switchannotationeditormode",{source:this,mode:K,editId:$})})}};N=new WeakMap;let w=z;class F extends w{constructor($,oe=null){super($,{isRenderable:!0,ignoreBorder:!!(oe!=null&&oe.ignoreBorder),createQuadrilaterals:!0});me(this,M);this.isTooltipOnly=$.data.isTooltipOnly}render(){const{data:$,linkService:oe}=this,ye=document.createElement("a");ye.setAttribute("data-element-id",$.id);let Ae=!1;return $.url?(oe.addLinkAttributes(ye,$.url,$.newWindow),Ae=!0):$.action?(this._bindNamedAction(ye,$.action),Ae=!0):$.attachment?(this._bindAttachment(ye,$.attachment),Ae=!0):$.setOCGState?(le(this,M,Dn).call(this,ye,$.setOCGState),Ae=!0):$.dest?(this._bindLink(ye,$.dest),Ae=!0):($.actions&&($.actions.Action||$.actions["Mouse Up"]||$.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ye,$),Ae=!0),$.resetForm?(this._bindResetFormAction(ye,$.resetForm),Ae=!0):this.isTooltipOnly&&!Ae&&(this._bindLink(ye,""),Ae=!0)),this.container.classList.add("linkAnnotation"),Ae&&this.container.append(ye),this.container}_bindLink($,oe){$.href=this.linkService.getDestinationHash(oe),$.onclick=()=>(oe&&this.linkService.goToDestination(oe),!1),(oe||oe==="")&&le(this,M,at).call(this)}_bindNamedAction($,oe){$.href=this.linkService.getAnchorUrl(""),$.onclick=()=>(this.linkService.executeNamedAction(oe),!1),le(this,M,at).call(this)}_bindAttachment($,oe){$.href=this.linkService.getAnchorUrl(""),$.onclick=()=>{var ye;return(ye=this.downloadManager)==null||ye.openOrDownloadData(this.container,oe.content,oe.filename),!1},le(this,M,at).call(this)}_bindJSAction($,oe){$.href=this.linkService.getAnchorUrl("");const ye=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Ae of Object.keys(oe.actions)){const we=ye.get(Ae);we&&($[we]=()=>{var Pe;return(Pe=this.linkService.eventBus)==null||Pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:oe.id,name:Ae}}),!1})}$.onclick||($.onclick=()=>!1),le(this,M,at).call(this)}_bindResetFormAction($,oe){const ye=$.onclick;if(ye||($.href=this.linkService.getAnchorUrl("")),le(this,M,at).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ye||($.onclick=()=>!1);return}$.onclick=()=>{var We;ye==null||ye();const{fields:Ae,refs:we,include:Pe}=oe,Ve=[];if(Ae.length!==0||we.length!==0){const Le=new Set(we);for(const He of Ae){const $e=this._fieldObjects[He]||[];for(const{id:Ge}of $e)Le.add(Ge)}for(const He of Object.values(this._fieldObjects))for(const $e of He)Le.has($e.id)===Pe&&Ve.push($e)}else for(const Le of Object.values(this._fieldObjects))Ve.push(...Le);const Oe=this.annotationStorage,xe=[];for(const Le of Ve){const{id:He}=Le;switch(xe.push(He),Le.type){case"text":{const Ge=Le.defaultValue||"";Oe.setValue(He,{value:Ge});break}case"checkbox":case"radiobutton":{const Ge=Le.defaultValue===Le.exportValues;Oe.setValue(He,{value:Ge});break}case"combobox":case"listbox":{const Ge=Le.defaultValue||"";Oe.setValue(He,{value:Ge});break}default:continue}const $e=document.querySelector(`[data-element-id="${He}"]`);if($e){if(!g.has($e)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${He}`);continue}}else continue;$e.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((We=this.linkService.eventBus)==null||We.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:xe,name:"ResetForm"}})),!1}}}M=new WeakSet,at=function(){this.container.setAttribute("data-internal-link","")},Dn=function($,oe){$.href=this.linkService.getAnchorUrl(""),$.onclick=()=>(this.linkService.executeSetOCGState(oe),!1),le(this,M,at).call(this)};class x extends w{constructor(K){super(K,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const K=document.createElement("img");return K.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",K.alt="[{{type}} Annotation]",K.dataset.l10nId="text_annotation_type",K.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(K),this.container}}class T extends w{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(K){var $;this.data.hasOwnCanvas&&((($=K.previousSibling)==null?void 0:$.nodeName)==="CANVAS"&&(K.previousSibling.hidden=!0),K.hidden=!1)}_getKeyModifier(K){const{isWin:$,isMac:oe}=n.FeatureTest.platform;return $&&K.ctrlKey||oe&&K.metaKey}_setEventListener(K,$,oe,ye,Ae){oe.includes("mouse")?K.addEventListener(oe,we=>{var Pe;(Pe=this.linkService.eventBus)==null||Pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ye,value:Ae(we),shift:we.shiftKey,modifier:this._getKeyModifier(we)}})}):K.addEventListener(oe,we=>{var Pe;if(oe==="blur"){if(!$.focused||!we.relatedTarget)return;$.focused=!1}else if(oe==="focus"){if($.focused)return;$.focused=!0}Ae&&((Pe=this.linkService.eventBus)==null||Pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ye,value:Ae(we)}}))})}_setEventListeners(K,$,oe,ye){var Ae,we,Pe;for(const[Ve,Oe]of oe)(Oe==="Action"||(Ae=this.data.actions)!=null&&Ae[Oe])&&((Oe==="Focus"||Oe==="Blur")&&($||($={focused:!1})),this._setEventListener(K,$,Ve,Oe,ye),Oe==="Focus"&&!((we=this.data.actions)!=null&&we.Blur)?this._setEventListener(K,$,"blur","Blur",null):Oe==="Blur"&&!((Pe=this.data.actions)!=null&&Pe.Focus)&&this._setEventListener(K,$,"focus","Focus",null))}_setBackgroundColor(K){const $=this.data.backgroundColor||null;K.style.backgroundColor=$===null?"transparent":n.Util.makeHexColor($[0],$[1],$[2])}_setTextStyle(K){const $=["left","center","right"],{fontColor:oe}=this.data.defaultAppearanceData,ye=this.data.defaultAppearanceData.fontSize||a,Ae=K.style;let we;const Pe=2,Ve=Oe=>Math.round(10*Oe)/10;if(this.data.multiLine){const Oe=Math.abs(this.data.rect[3]-this.data.rect[1]-Pe),xe=Math.round(Oe/(n.LINE_FACTOR*ye))||1,We=Oe/xe;we=Math.min(ye,Ve(We/n.LINE_FACTOR))}else{const Oe=Math.abs(this.data.rect[3]-this.data.rect[1]-Pe);we=Math.min(ye,Ve(Oe/n.LINE_FACTOR))}Ae.fontSize=`calc(${we}px * var(--scale-factor))`,Ae.color=n.Util.makeHexColor(oe[0],oe[1],oe[2]),this.data.textAlignment!==null&&(Ae.textAlign=$[this.data.textAlignment])}_setRequired(K,$){$?K.setAttribute("required",!0):K.removeAttribute("required"),K.setAttribute("aria-required",$)}}class k extends T{constructor(K){const $=K.renderForms||!K.data.hasAppearance&&!!K.data.fieldValue;super(K,{isRenderable:$})}setPropertyOnSiblings(K,$,oe,ye){const Ae=this.annotationStorage;for(const we of this._getElementsByName(K.name,K.id))we.domElement&&(we.domElement[$]=oe),Ae.setValue(we.id,{[ye]:oe})}render(){var ye,Ae;const K=this.annotationStorage,$=this.data.id;this.container.classList.add("textWidgetAnnotation");let oe=null;if(this.renderForms){const we=K.getValue($,{value:this.data.fieldValue});let Pe=we.value||"";const Ve=K.getValue($,{charLimit:this.data.maxLen}).charLimit;Ve&&Pe.length>Ve&&(Pe=Pe.slice(0,Ve));let Oe=we.formattedValue||((ye=this.data.textContent)==null?void 0:ye.join(`
`))||null;Oe&&this.data.comb&&(Oe=Oe.replaceAll(/\s+/g,""));const xe={userValue:Pe,formattedValue:Oe,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(oe=document.createElement("textarea"),oe.textContent=Oe??Pe,this.data.doNotScroll&&(oe.style.overflowY="hidden")):(oe=document.createElement("input"),oe.type="text",oe.setAttribute("value",Oe??Pe),this.data.doNotScroll&&(oe.style.overflowX="hidden")),this.data.hasOwnCanvas&&(oe.hidden=!0),g.add(oe),oe.setAttribute("data-element-id",$),oe.disabled=this.data.readOnly,oe.name=this.data.fieldName,oe.tabIndex=d,this._setRequired(oe,this.data.required),Ve&&(oe.maxLength=Ve),oe.addEventListener("input",Le=>{K.setValue($,{value:Le.target.value}),this.setPropertyOnSiblings(oe,"value",Le.target.value,"value"),xe.formattedValue=null}),oe.addEventListener("resetform",Le=>{const He=this.data.defaultFieldValue??"";oe.value=xe.userValue=He,xe.formattedValue=null});let We=Le=>{const{formattedValue:He}=xe;He!=null&&(Le.target.value=He),Le.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){oe.addEventListener("focus",He=>{if(xe.focused)return;const{target:$e}=He;xe.userValue&&($e.value=xe.userValue),xe.lastCommittedValue=$e.value,xe.commitKey=1,xe.focused=!0}),oe.addEventListener("updatefromsandbox",He=>{this.showElementAndHideCanvas(He.target);const $e={value(Ge){xe.userValue=Ge.detail.value??"",K.setValue($,{value:xe.userValue.toString()}),Ge.target.value=xe.userValue},formattedValue(Ge){const{formattedValue:Ye}=Ge.detail;xe.formattedValue=Ye,Ye!=null&&Ge.target!==document.activeElement&&(Ge.target.value=Ye),K.setValue($,{formattedValue:Ye})},selRange(Ge){Ge.target.setSelectionRange(...Ge.detail.selRange)},charLimit:Ge=>{var Ze;const{charLimit:Ye}=Ge.detail,{target:Je}=Ge;if(Ye===0){Je.removeAttribute("maxLength");return}Je.setAttribute("maxLength",Ye);let et=xe.userValue;!et||et.length<=Ye||(et=et.slice(0,Ye),Je.value=xe.userValue=et,K.setValue($,{value:et}),(Ze=this.linkService.eventBus)==null||Ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$,name:"Keystroke",value:et,willCommit:!0,commitKey:1,selStart:Je.selectionStart,selEnd:Je.selectionEnd}}))}};this._dispatchEventFromSandbox($e,He)}),oe.addEventListener("keydown",He=>{var Ye;xe.commitKey=1;let $e=-1;if(He.key==="Escape"?$e=0:He.key==="Enter"&&!this.data.multiLine?$e=2:He.key==="Tab"&&(xe.commitKey=3),$e===-1)return;const{value:Ge}=He.target;xe.lastCommittedValue!==Ge&&(xe.lastCommittedValue=Ge,xe.userValue=Ge,(Ye=this.linkService.eventBus)==null||Ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$,name:"Keystroke",value:Ge,willCommit:!0,commitKey:$e,selStart:He.target.selectionStart,selEnd:He.target.selectionEnd}}))});const Le=We;We=null,oe.addEventListener("blur",He=>{var Ge;if(!xe.focused||!He.relatedTarget)return;xe.focused=!1;const{value:$e}=He.target;xe.userValue=$e,xe.lastCommittedValue!==$e&&((Ge=this.linkService.eventBus)==null||Ge.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$,name:"Keystroke",value:$e,willCommit:!0,commitKey:xe.commitKey,selStart:He.target.selectionStart,selEnd:He.target.selectionEnd}})),Le(He)}),(Ae=this.data.actions)!=null&&Ae.Keystroke&&oe.addEventListener("beforeinput",He=>{var rt;xe.lastCommittedValue=null;const{data:$e,target:Ge}=He,{value:Ye,selectionStart:Je,selectionEnd:et}=Ge;let Ze=Je,st=et;switch(He.inputType){case"deleteWordBackward":{const ot=Ye.substring(0,Je).match(/\w*[^\w]*$/);ot&&(Ze-=ot[0].length);break}case"deleteWordForward":{const ot=Ye.substring(Je).match(/^[^\w]*\w*/);ot&&(st+=ot[0].length);break}case"deleteContentBackward":Je===et&&(Ze-=1);break;case"deleteContentForward":Je===et&&(st+=1);break}He.preventDefault(),(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$,name:"Keystroke",value:Ye,change:$e||"",willCommit:!1,selStart:Ze,selEnd:st}})}),this._setEventListeners(oe,xe,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],He=>He.target.value)}if(We&&oe.addEventListener("blur",We),this.data.comb){const He=(this.data.rect[2]-this.data.rect[0])/Ve;oe.classList.add("comb"),oe.style.letterSpacing=`calc(${He}px * var(--scale-factor) - 1ch)`}}else oe=document.createElement("div"),oe.textContent=this.data.fieldValue,oe.style.verticalAlign="middle",oe.style.display="table-cell";return this._setTextStyle(oe),this._setBackgroundColor(oe),this._setDefaultPropertiesFromJS(oe),this.container.append(oe),this.container}}class H extends T{constructor(K){super(K,{isRenderable:!!K.data.hasOwnCanvas})}}class I extends T{constructor(K){super(K,{isRenderable:K.renderForms})}render(){const K=this.annotationStorage,$=this.data,oe=$.id;let ye=K.getValue(oe,{value:$.exportValue===$.fieldValue}).value;typeof ye=="string"&&(ye=ye!=="Off",K.setValue(oe,{value:ye})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Ae=document.createElement("input");return g.add(Ae),Ae.setAttribute("data-element-id",oe),Ae.disabled=$.readOnly,this._setRequired(Ae,this.data.required),Ae.type="checkbox",Ae.name=$.fieldName,ye&&Ae.setAttribute("checked",!0),Ae.setAttribute("exportValue",$.exportValue),Ae.tabIndex=d,Ae.addEventListener("change",we=>{const{name:Pe,checked:Ve}=we.target;for(const Oe of this._getElementsByName(Pe,oe)){const xe=Ve&&Oe.exportValue===$.exportValue;Oe.domElement&&(Oe.domElement.checked=xe),K.setValue(Oe.id,{value:xe})}K.setValue(oe,{value:Ve})}),Ae.addEventListener("resetform",we=>{const Pe=$.defaultFieldValue||"Off";we.target.checked=Pe===$.exportValue}),this.enableScripting&&this.hasJSActions&&(Ae.addEventListener("updatefromsandbox",we=>{const Pe={value(Ve){Ve.target.checked=Ve.detail.value!=="Off",K.setValue(oe,{value:Ve.target.checked})}};this._dispatchEventFromSandbox(Pe,we)}),this._setEventListeners(Ae,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],we=>we.target.checked)),this._setBackgroundColor(Ae),this._setDefaultPropertiesFromJS(Ae),this.container.append(Ae),this.container}}class _ extends T{constructor(K){super(K,{isRenderable:K.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const K=this.annotationStorage,$=this.data,oe=$.id;let ye=K.getValue(oe,{value:$.fieldValue===$.buttonValue}).value;typeof ye=="string"&&(ye=ye!==$.buttonValue,K.setValue(oe,{value:ye}));const Ae=document.createElement("input");if(g.add(Ae),Ae.setAttribute("data-element-id",oe),Ae.disabled=$.readOnly,this._setRequired(Ae,this.data.required),Ae.type="radio",Ae.name=$.fieldName,ye&&Ae.setAttribute("checked",!0),Ae.tabIndex=d,Ae.addEventListener("change",we=>{const{name:Pe,checked:Ve}=we.target;for(const Oe of this._getElementsByName(Pe,oe))K.setValue(Oe.id,{value:!1});K.setValue(oe,{value:Ve})}),Ae.addEventListener("resetform",we=>{const Pe=$.defaultFieldValue;we.target.checked=Pe!=null&&Pe===$.buttonValue}),this.enableScripting&&this.hasJSActions){const we=$.buttonValue;Ae.addEventListener("updatefromsandbox",Pe=>{const Ve={value:Oe=>{const xe=we===Oe.detail.value;for(const We of this._getElementsByName(Oe.target.name)){const Le=xe&&We.id===oe;We.domElement&&(We.domElement.checked=Le),K.setValue(We.id,{value:Le})}}};this._dispatchEventFromSandbox(Ve,Pe)}),this._setEventListeners(Ae,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Pe=>Pe.target.checked)}return this._setBackgroundColor(Ae),this._setDefaultPropertiesFromJS(Ae),this.container.append(Ae),this.container}}class E extends F{constructor(K){super(K,{ignoreBorder:K.data.hasAppearance})}render(){const K=super.render();K.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(K.title=this.data.alternativeText);const $=K.lastChild;return this.enableScripting&&this.hasJSActions&&$&&(this._setDefaultPropertiesFromJS($),$.addEventListener("updatefromsandbox",oe=>{this._dispatchEventFromSandbox({},oe)})),K}}class v extends T{constructor(K){super(K,{isRenderable:K.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const K=this.annotationStorage,$=this.data.id,oe=K.getValue($,{value:this.data.fieldValue}),ye=document.createElement("select");g.add(ye),ye.setAttribute("data-element-id",$),ye.disabled=this.data.readOnly,this._setRequired(ye,this.data.required),ye.name=this.data.fieldName,ye.tabIndex=d;let Ae=this.data.combo&&this.data.options.length>0;this.data.combo||(ye.size=this.data.options.length,this.data.multiSelect&&(ye.multiple=!0)),ye.addEventListener("resetform",xe=>{const We=this.data.defaultFieldValue;for(const Le of ye.options)Le.selected=Le.value===We});for(const xe of this.data.options){const We=document.createElement("option");We.textContent=xe.displayValue,We.value=xe.exportValue,oe.value.includes(xe.exportValue)&&(We.setAttribute("selected",!0),Ae=!1),ye.append(We)}let we=null;if(Ae){const xe=document.createElement("option");xe.value=" ",xe.setAttribute("hidden",!0),xe.setAttribute("selected",!0),ye.prepend(xe),we=()=>{xe.remove(),ye.removeEventListener("input",we),we=null},ye.addEventListener("input",we)}const Pe=xe=>{const We=xe?"value":"textContent",{options:Le,multiple:He}=ye;return He?Array.prototype.filter.call(Le,$e=>$e.selected).map($e=>$e[We]):Le.selectedIndex===-1?null:Le[Le.selectedIndex][We]};let Ve=Pe(!1);const Oe=xe=>{const We=xe.target.options;return Array.prototype.map.call(We,Le=>({displayValue:Le.textContent,exportValue:Le.value}))};return this.enableScripting&&this.hasJSActions?(ye.addEventListener("updatefromsandbox",xe=>{const We={value(Le){we==null||we();const He=Le.detail.value,$e=new Set(Array.isArray(He)?He:[He]);for(const Ge of ye.options)Ge.selected=$e.has(Ge.value);K.setValue($,{value:Pe(!0)}),Ve=Pe(!1)},multipleSelection(Le){ye.multiple=!0},remove(Le){const He=ye.options,$e=Le.detail.remove;He[$e].selected=!1,ye.remove($e),He.length>0&&Array.prototype.findIndex.call(He,Ye=>Ye.selected)===-1&&(He[0].selected=!0),K.setValue($,{value:Pe(!0),items:Oe(Le)}),Ve=Pe(!1)},clear(Le){for(;ye.length!==0;)ye.remove(0);K.setValue($,{value:null,items:[]}),Ve=Pe(!1)},insert(Le){const{index:He,displayValue:$e,exportValue:Ge}=Le.detail.insert,Ye=ye.children[He],Je=document.createElement("option");Je.textContent=$e,Je.value=Ge,Ye?Ye.before(Je):ye.append(Je),K.setValue($,{value:Pe(!0),items:Oe(Le)}),Ve=Pe(!1)},items(Le){const{items:He}=Le.detail;for(;ye.length!==0;)ye.remove(0);for(const $e of He){const{displayValue:Ge,exportValue:Ye}=$e,Je=document.createElement("option");Je.textContent=Ge,Je.value=Ye,ye.append(Je)}ye.options.length>0&&(ye.options[0].selected=!0),K.setValue($,{value:Pe(!0),items:Oe(Le)}),Ve=Pe(!1)},indices(Le){const He=new Set(Le.detail.indices);for(const $e of Le.target.options)$e.selected=He.has($e.index);K.setValue($,{value:Pe(!0)}),Ve=Pe(!1)},editable(Le){Le.target.disabled=!Le.detail.editable}};this._dispatchEventFromSandbox(We,xe)}),ye.addEventListener("input",xe=>{var Le;const We=Pe(!0);K.setValue($,{value:We}),xe.preventDefault(),(Le=this.linkService.eventBus)==null||Le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$,name:"Keystroke",value:Ve,changeEx:We,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ye,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],xe=>xe.target.value)):ye.addEventListener("input",function(xe){K.setValue($,{value:Pe(!0)})}),this.data.combo&&this._setTextStyle(ye),this._setBackgroundColor(ye),this._setDefaultPropertiesFromJS(ye),this.container.append(ye),this.container}}class S extends w{constructor(K){const{data:$,elements:oe}=K;super(K,{isRenderable:w._hasPopupData($)}),this.elements=oe}render(){this.container.classList.add("popupAnnotation");const K=new m({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),$=[];for(const oe of this.elements)oe.popup=K,$.push(oe.data.id),oe.addHighlightArea();return this.container.setAttribute("aria-controls",$.map(oe=>`${n.AnnotationPrefix}${oe}`).join(",")),this.container}}class m{constructor({container:K,color:$,elements:oe,titleObj:ye,modificationDate:Ae,contentsObj:we,richText:Pe,parent:Ve,rect:Oe,parentRect:xe,open:We}){me(this,Ce);me(this,re,null);me(this,ge,le(this,Ce,On).bind(this));me(this,D,le(this,Ce,on).bind(this));me(this,L,le(this,Ce,rn).bind(this));me(this,q,le(this,Ce,Rt).bind(this));me(this,ne,null);me(this,X,null);me(this,G,null);me(this,R,null);me(this,B,null);me(this,J,null);me(this,Q,!1);me(this,de,null);me(this,fe,null);me(this,_e,null);me(this,te,null);me(this,Te,!1);var He;ve(this,X,K),ve(this,te,ye),ve(this,G,we),ve(this,_e,Pe),ve(this,B,Ve),ve(this,ne,$),ve(this,fe,Oe),ve(this,J,xe),ve(this,R,oe);const Le=i.PDFDateString.toDateObject(Ae);Le&&ve(this,re,Ve.l10n.get("annotation_date_string",{date:Le.toLocaleDateString(),time:Le.toLocaleTimeString()})),this.trigger=oe.flatMap($e=>$e.getElementsToTriggerPopup());for(const $e of this.trigger)$e.addEventListener("click",l(this,q)),$e.addEventListener("mouseenter",l(this,L)),$e.addEventListener("mouseleave",l(this,D)),$e.classList.add("popupTriggerArea");for(const $e of oe)(He=$e.container)==null||He.addEventListener("keydown",l(this,ge));l(this,X).hidden=!0,We&&le(this,Ce,Rt).call(this)}render(){if(l(this,de))return;const{page:{view:K},viewport:{rawDims:{pageWidth:$,pageHeight:oe,pageX:ye,pageY:Ae}}}=l(this,B),we=ve(this,de,document.createElement("div"));if(we.className="popup",l(this,ne)){const Ze=we.style.outlineColor=n.Util.makeHexColor(...l(this,ne));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?we.style.backgroundColor=`color-mix(in srgb, ${Ze} 30%, white)`:we.style.backgroundColor=n.Util.makeHexColor(...l(this,ne).map(rt=>Math.floor(.7*(255-rt)+rt)))}const Pe=document.createElement("span");Pe.className="header";const Ve=document.createElement("h1");if(Pe.append(Ve),{dir:Ve.dir,str:Ve.textContent}=l(this,te),we.append(Pe),l(this,re)){const Ze=document.createElement("span");Ze.classList.add("popupDate"),l(this,re).then(st=>{Ze.textContent=st}),Pe.append(Ze)}const Oe=l(this,G),xe=l(this,_e);if(xe!=null&&xe.str&&(!(Oe!=null&&Oe.str)||Oe.str===xe.str))c.XfaLayer.render({xfaHtml:xe.html,intent:"richText",div:we}),we.lastChild.classList.add("richText","popupContent");else{const Ze=this._formatContents(Oe);we.append(Ze)}let We=!!l(this,J),Le=We?l(this,J):l(this,fe);for(const Ze of l(this,R))if(!Le||n.Util.intersect(Ze.data.rect,Le)!==null){Le=Ze.data.rect,We=!0;break}const He=n.Util.normalizeRect([Le[0],K[3]-Le[1]+K[1],Le[2],K[3]-Le[3]+K[1]]),Ge=We?Le[2]-Le[0]+5:0,Ye=He[0]+Ge,Je=He[1],{style:et}=l(this,X);et.left=`${100*(Ye-ye)/$}%`,et.top=`${100*(Je-Ae)/oe}%`,l(this,X).append(we)}_formatContents({str:K,dir:$}){const oe=document.createElement("p");oe.classList.add("popupContent"),oe.dir=$;const ye=K.split(/(?:\r\n?|\n)/);for(let Ae=0,we=ye.length;Ae<we;++Ae){const Pe=ye[Ae];oe.append(document.createTextNode(Pe)),Ae<we-1&&oe.append(document.createElement("br"))}return oe}forceHide(){ve(this,Te,this.isVisible),l(this,Te)&&(l(this,X).hidden=!0)}maybeShow(){l(this,Te)&&(ve(this,Te,!1),l(this,X).hidden=!1)}get isVisible(){return l(this,X).hidden===!1}}re=new WeakMap,ge=new WeakMap,D=new WeakMap,L=new WeakMap,q=new WeakMap,ne=new WeakMap,X=new WeakMap,G=new WeakMap,R=new WeakMap,B=new WeakMap,J=new WeakMap,Q=new WeakMap,de=new WeakMap,fe=new WeakMap,_e=new WeakMap,te=new WeakMap,Te=new WeakMap,Ce=new WeakSet,On=function(K){K.altKey||K.shiftKey||K.ctrlKey||K.metaKey||(K.key==="Enter"||K.key==="Escape"&&l(this,Q))&&le(this,Ce,Rt).call(this)},Rt=function(){ve(this,Q,!l(this,Q)),l(this,Q)?(le(this,Ce,rn).call(this),l(this,X).addEventListener("click",l(this,q)),l(this,X).addEventListener("keydown",l(this,ge))):(le(this,Ce,on).call(this),l(this,X).removeEventListener("click",l(this,q)),l(this,X).removeEventListener("keydown",l(this,ge)))},rn=function(){l(this,de)||this.render(),this.isVisible?l(this,Q)&&l(this,X).classList.add("focused"):(l(this,X).hidden=!1,l(this,X).style.zIndex=parseInt(l(this,X).style.zIndex)+1e3)},on=function(){l(this,X).classList.remove("focused"),!(l(this,Q)||!this.isVisible)&&(l(this,X).hidden=!0,l(this,X).style.zIndex=parseInt(l(this,X).style.zIndex)-1e3)};class O extends w{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0}),this.textContent=K.data.textContent,this.textPosition=K.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const K=document.createElement("div");K.classList.add("annotationTextContent"),K.setAttribute("role","comment");for(const $ of this.textContent){const oe=document.createElement("span");oe.textContent=$,K.append(oe)}this.container.append(K)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=O;class f extends w{constructor($){super($,{isRenderable:!0,ignoreBorder:!0});me(this,De,null)}render(){this.container.classList.add("lineAnnotation");const $=this.data,{width:oe,height:ye}=C($.rect),Ae=this.svgFactory.create(oe,ye,!0),we=ve(this,De,this.svgFactory.createElement("svg:line"));return we.setAttribute("x1",$.rect[2]-$.lineCoordinates[0]),we.setAttribute("y1",$.rect[3]-$.lineCoordinates[1]),we.setAttribute("x2",$.rect[2]-$.lineCoordinates[2]),we.setAttribute("y2",$.rect[3]-$.lineCoordinates[3]),we.setAttribute("stroke-width",$.borderStyle.width||1),we.setAttribute("stroke","transparent"),we.setAttribute("fill","transparent"),Ae.append(we),this.container.append(Ae),!$.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,De)}addHighlightArea(){this.container.classList.add("highlightArea")}}De=new WeakMap;class P extends w{constructor($){super($,{isRenderable:!0,ignoreBorder:!0});me(this,ze,null)}render(){this.container.classList.add("squareAnnotation");const $=this.data,{width:oe,height:ye}=C($.rect),Ae=this.svgFactory.create(oe,ye,!0),we=$.borderStyle.width,Pe=ve(this,ze,this.svgFactory.createElement("svg:rect"));return Pe.setAttribute("x",we/2),Pe.setAttribute("y",we/2),Pe.setAttribute("width",oe-we),Pe.setAttribute("height",ye-we),Pe.setAttribute("stroke-width",we||1),Pe.setAttribute("stroke","transparent"),Pe.setAttribute("fill","transparent"),Ae.append(Pe),this.container.append(Ae),!$.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ze)}addHighlightArea(){this.container.classList.add("highlightArea")}}ze=new WeakMap;class U extends w{constructor($){super($,{isRenderable:!0,ignoreBorder:!0});me(this,Xe,null)}render(){this.container.classList.add("circleAnnotation");const $=this.data,{width:oe,height:ye}=C($.rect),Ae=this.svgFactory.create(oe,ye,!0),we=$.borderStyle.width,Pe=ve(this,Xe,this.svgFactory.createElement("svg:ellipse"));return Pe.setAttribute("cx",oe/2),Pe.setAttribute("cy",ye/2),Pe.setAttribute("rx",oe/2-we/2),Pe.setAttribute("ry",ye/2-we/2),Pe.setAttribute("stroke-width",we||1),Pe.setAttribute("stroke","transparent"),Pe.setAttribute("fill","transparent"),Ae.append(Pe),this.container.append(Ae),!$.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Xe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xe=new WeakMap;class ce extends w{constructor($){super($,{isRenderable:!0,ignoreBorder:!0});me(this,Ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const $=this.data,{width:oe,height:ye}=C($.rect),Ae=this.svgFactory.create(oe,ye,!0);let we=[];for(const Ve of $.vertices){const Oe=Ve.x-$.rect[0],xe=$.rect[3]-Ve.y;we.push(Oe+","+xe)}we=we.join(" ");const Pe=ve(this,Ee,this.svgFactory.createElement(this.svgElementName));return Pe.setAttribute("points",we),Pe.setAttribute("stroke-width",$.borderStyle.width||1),Pe.setAttribute("stroke","transparent"),Pe.setAttribute("fill","transparent"),Ae.append(Pe),this.container.append(Ae),!$.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ee=new WeakMap;class se extends ce{constructor(K){super(K),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ae extends w{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ee extends w{constructor($){super($,{isRenderable:!0,ignoreBorder:!0});me(this,pe,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const $=this.data,{width:oe,height:ye}=C($.rect),Ae=this.svgFactory.create(oe,ye,!0);for(const we of $.inkLists){let Pe=[];for(const Oe of we){const xe=Oe.x-$.rect[0],We=$.rect[3]-Oe.y;Pe.push(`${xe},${We}`)}Pe=Pe.join(" ");const Ve=this.svgFactory.createElement(this.svgElementName);l(this,pe).push(Ve),Ve.setAttribute("points",Pe),Ve.setAttribute("stroke-width",$.borderStyle.width||1),Ve.setAttribute("stroke","transparent"),Ve.setAttribute("fill","transparent"),!$.popupRef&&this.hasPopupData&&this._createPopup(),Ae.append(Ve)}return this.container.append(Ae),this.container}getElementsToTriggerPopup(){return l(this,pe)}addHighlightArea(){this.container.classList.add("highlightArea")}}pe=new WeakMap,t.InkAnnotationElement=ee;class ue extends w{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class W extends w{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ie extends w{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class he extends w{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class j extends w{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=j;class b extends w{constructor($){var Ae;super($,{isRenderable:!0});me(this,Me);me(this,be,null);const{filename:oe,content:ye}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(oe,!0),this.content=ye,(Ae=this.linkService.eventBus)==null||Ae.dispatch("fileattachmentannotation",{source:this,filename:oe,content:ye})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:$,data:oe}=this;let ye;oe.hasAppearance||oe.fillAlpha===0?ye=document.createElement("div"):(ye=document.createElement("img"),ye.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(oe.name)?"paperclip":"pushpin"}.svg`,oe.fillAlpha&&oe.fillAlpha<1&&(ye.style=`filter: opacity(${Math.round(oe.fillAlpha*100)}%);`)),ye.addEventListener("dblclick",le(this,Me,an).bind(this)),ve(this,be,ye);const{isMac:Ae}=n.FeatureTest.platform;return $.addEventListener("keydown",we=>{we.key==="Enter"&&(Ae?we.metaKey:we.ctrlKey)&&le(this,Me,an).call(this)}),!oe.popupRef&&this.hasPopupData?this._createPopup():ye.classList.add("popupTriggerArea"),$.append(ye),$}getElementsToTriggerPopup(){return l(this,be)}addHighlightArea(){this.container.classList.add("highlightArea")}}be=new WeakMap,Me=new WeakSet,an=function(){var $;($=this.downloadManager)==null||$.openOrDownloadData(this.container,this.content,this.filename)};class A{constructor({div:K,accessibilityManager:$,annotationCanvasMap:oe,l10n:ye,page:Ae,viewport:we}){me(this,Re);me(this,qe,null);me(this,Z,null);me(this,Se,new Map);this.div=K,ve(this,qe,$),ve(this,Z,oe),this.l10n=ye,this.page=Ae,this.viewport=we,this.zIndex=0,this.l10n||(this.l10n=u.NullL10n)}async render(K){const{annotations:$}=K,oe=this.div;(0,i.setLayerDimensions)(oe,this.viewport);const ye=new Map,Ae={data:null,layer:oe,linkService:K.linkService,downloadManager:K.downloadManager,imageResourcesPath:K.imageResourcesPath||"",renderForms:K.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:K.annotationStorage||new o.AnnotationStorage,enableScripting:K.enableScripting===!0,hasJSActions:K.hasJSActions,fieldObjects:K.fieldObjects,parent:this,elements:null};for(const we of $){if(we.noHTML)continue;const Pe=we.annotationType===n.AnnotationType.POPUP;if(Pe){const xe=ye.get(we.id);if(!xe)continue;Ae.elements=xe}else{const{width:xe,height:We}=C(we.rect);if(xe<=0||We<=0)continue}Ae.data=we;const Ve=y.create(Ae);if(!Ve.isRenderable)continue;if(!Pe&&we.popupRef){const xe=ye.get(we.popupRef);xe?xe.push(Ve):ye.set(we.popupRef,[Ve])}Ve.annotationEditorType>0&&l(this,Se).set(Ve.data.id,Ve);const Oe=Ve.render();we.hidden&&(Oe.style.visibility="hidden"),le(this,Re,Nn).call(this,Oe,we.id)}le(this,Re,ln).call(this),await this.l10n.translate(oe)}update({viewport:K}){const $=this.div;this.viewport=K,(0,i.setLayerDimensions)($,{rotation:K.rotation}),le(this,Re,ln).call(this),$.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Se).values())}getEditableAnnotation(K){return l(this,Se).get(K)}}qe=new WeakMap,Z=new WeakMap,Se=new WeakMap,Re=new WeakSet,Nn=function(K,$){var ye;const oe=K.firstChild||K;oe.id=`${n.AnnotationPrefix}${$}`,this.div.append(K),(ye=l(this,qe))==null||ye.moveElementInDOM(this.div,K,oe,!1)},ln=function(){if(!l(this,Z))return;const K=this.div;for(const[$,oe]of l(this,Z)){const ye=K.querySelector(`[data-annotation-id="${$}"]`);if(!ye)continue;const{firstChild:Ae}=ye;Ae?Ae.nodeName==="CANVAS"?Ae.replaceWith(oe):Ae.before(oe):ye.append(oe)}l(this,Z).clear()},t.AnnotationLayer=A},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function s(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function n(o){return Math.max(0,Math.min(255,255*o))}class i{static CMYK_G([r,u,c,d]){return["G",1-Math.min(1,.3*r+.59*c+.11*u+d)]}static G_CMYK([r]){return["CMYK",0,0,0,1-r]}static G_RGB([r]){return["RGB",r,r,r]}static G_rgb([r]){return r=n(r),[r,r,r]}static G_HTML([r]){const u=s(r);return`#${u}${u}${u}`}static RGB_G([r,u,c]){return["G",.3*r+.59*u+.11*c]}static RGB_rgb(r){return r.map(n)}static RGB_HTML(r){return`#${r.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([r,u,c,d]){return["RGB",1-Math.min(1,r+d),1-Math.min(1,c+d),1-Math.min(1,u+d)]}static CMYK_rgb([r,u,c,d]){return[n(1-Math.min(1,r+d)),n(1-Math.min(1,c+d)),n(1-Math.min(1,u+d))]}static CMYK_HTML(r){const u=this.CMYK_RGB(r).slice(1);return this.RGB_HTML(u)}static RGB_CMYK([r,u,c]){const d=1-r,a=1-u,g=1-c,C=Math.min(d,a,g);return["CMYK",d,a,g,C]}}t.ColorConverters=i},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=n;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function n(r,u){switch(r){case"find_match_count":r=`find_match_count[${u.total===1?"one":"other"}]`;break;case"find_match_count_limit":r=`find_match_count_limit[${u.limit===1?"one":"other"}]`;break}return s[r]||""}function i(r,u){return u?r.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(c,d)=>d in u?u[d]:"{{"+d+"}}"):r}const o={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(r,u=null,c=n(r,u)){return i(c,u)},async translate(r){}};t.NullL10n=o},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=s(25);class i{static setupStorage(r,u,c,d,a){const g=d.getValue(u,{value:null});switch(c.name){case"textarea":if(g.value!==null&&(r.textContent=g.value),a==="print")break;r.addEventListener("input",C=>{d.setValue(u,{value:C.target.value})});break;case"input":if(c.attributes.type==="radio"||c.attributes.type==="checkbox"){if(g.value===c.attributes.xfaOn?r.setAttribute("checked",!0):g.value===c.attributes.xfaOff&&r.removeAttribute("checked"),a==="print")break;r.addEventListener("change",C=>{d.setValue(u,{value:C.target.checked?C.target.getAttribute("xfaOn"):C.target.getAttribute("xfaOff")})})}else{if(g.value!==null&&r.setAttribute("value",g.value),a==="print")break;r.addEventListener("input",C=>{d.setValue(u,{value:C.target.value})})}break;case"select":if(g.value!==null){r.setAttribute("value",g.value);for(const C of c.children)C.attributes.value===g.value?C.attributes.selected=!0:C.attributes.hasOwnProperty("selected")&&delete C.attributes.selected}r.addEventListener("input",C=>{const y=C.target.options,w=y.selectedIndex===-1?"":y[y.selectedIndex].value;d.setValue(u,{value:w})});break}}static setAttributes({html:r,element:u,storage:c=null,intent:d,linkService:a}){const{attributes:g}=u,C=r instanceof HTMLAnchorElement;g.type==="radio"&&(g.name=`${g.name}-${d}`);for(const[y,w]of Object.entries(g))if(w!=null)switch(y){case"class":w.length&&r.setAttribute(y,w.join(" "));break;case"dataId":break;case"id":r.setAttribute("data-element-id",w);break;case"style":Object.assign(r.style,w);break;case"textContent":r.textContent=w;break;default:(!C||y!=="href"&&y!=="newWindow")&&r.setAttribute(y,w)}C&&a.addLinkAttributes(r,g.href,g.newWindow),c&&g.dataId&&this.setupStorage(r,g.dataId,u,c)}static render(r){var F;const u=r.annotationStorage,c=r.linkService,d=r.xfaHtml,a=r.intent||"display",g=document.createElement(d.name);d.attributes&&this.setAttributes({html:g,element:d,intent:a,linkService:c});const C=[[d,-1,g]],y=r.div;if(y.append(g),r.viewport){const x=`matrix(${r.viewport.transform.join(",")})`;y.style.transform=x}a!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const w=[];for(;C.length>0;){const[x,T,k]=C.at(-1);if(T+1===x.children.length){C.pop();continue}const H=x.children[++C.at(-1)[1]];if(H===null)continue;const{name:I}=H;if(I==="#text"){const E=document.createTextNode(H.value);w.push(E),k.append(E);continue}const _=(F=H==null?void 0:H.attributes)!=null&&F.xmlns?document.createElementNS(H.attributes.xmlns,I):document.createElement(I);if(k.append(_),H.attributes&&this.setAttributes({html:_,element:H,storage:u,intent:a,linkService:c}),H.children&&H.children.length>0)C.push([H,-1,_]);else if(H.value){const E=document.createTextNode(H.value);n.XfaText.shouldBuildText(I)&&w.push(E),_.append(E)}}for(const x of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))x.setAttribute("readOnly",!0);return{textDivs:w}}static update(r){const u=`matrix(${r.viewport.transform.join(",")})`;r.div.style.transform=u,r.div.hidden=!1}}t.XfaLayer=i},(e,t,s)=>{var d,a,g,C,y,w,F,x,T,k,H,I,_,E,v,Ln,Bn,Vn,Hn,cn,Un,dn,jn,$n,Wn,zn,Gn,it,un,xt,kt,ut,hn,Ft,M,qn,fn,Kn,Xn,pn,Mt,ht;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var n=s(1),i=s(4),o=s(29),r=s(6),u=s(5);const ne=class ne extends i.AnnotationEditor{constructor(R){super({...R,name:"inkEditor"});me(this,v);me(this,d,0);me(this,a,0);me(this,g,this.canvasPointermove.bind(this));me(this,C,this.canvasPointerleave.bind(this));me(this,y,this.canvasPointerup.bind(this));me(this,w,this.canvasPointerdown.bind(this));me(this,F,new Path2D);me(this,x,!1);me(this,T,!1);me(this,k,!1);me(this,H,null);me(this,I,0);me(this,_,0);me(this,E,null);this.color=R.color||null,this.thickness=R.thickness||null,this.opacity=R.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(R){i.AnnotationEditor.initialize(R,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(R,B){switch(R){case n.AnnotationEditorParamsType.INK_THICKNESS:ne._defaultThickness=B;break;case n.AnnotationEditorParamsType.INK_COLOR:ne._defaultColor=B;break;case n.AnnotationEditorParamsType.INK_OPACITY:ne._defaultOpacity=B/100;break}}updateParams(R,B){switch(R){case n.AnnotationEditorParamsType.INK_THICKNESS:le(this,v,Ln).call(this,B);break;case n.AnnotationEditorParamsType.INK_COLOR:le(this,v,Bn).call(this,B);break;case n.AnnotationEditorParamsType.INK_OPACITY:le(this,v,Vn).call(this,B);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,ne._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,ne._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(ne._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ne._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||ne._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ne._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(le(this,v,xt).call(this),le(this,v,kt).call(this)),this.isAttachedToDOM||(this.parent.add(this),le(this,v,ut).call(this)),le(this,v,ht).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,H).disconnect(),ve(this,H,null),super.remove())}setParent(R){!this.parent&&R?this._uiManager.removeShouldRescale(this):this.parent&&R===null&&this._uiManager.addShouldRescale(this),super.setParent(R)}onScaleChanging(){const[R,B]=this.parentDimensions,J=this.width*R,Q=this.height*B;this.setDimensions(J,Q)}enableEditMode(){l(this,x)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",l(this,w)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",l(this,w)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,x)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ve(this,x,!0),this.div.classList.add("disabled"),le(this,v,ht).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(R){this._focusEventsAllowed&&(super.focusin(R),this.enableEditMode())}canvasPointerdown(R){R.button!==0||!this.isInEditMode()||l(this,x)||(this.setInForeground(),R.preventDefault(),R.type!=="mouse"&&this.div.focus(),le(this,v,Un).call(this,R.offsetX,R.offsetY))}canvasPointermove(R){R.preventDefault(),le(this,v,dn).call(this,R.offsetX,R.offsetY)}canvasPointerup(R){R.preventDefault(),le(this,v,un).call(this,R)}canvasPointerleave(R){le(this,v,un).call(this,R)}get isResizable(){return!this.isEmpty()&&l(this,x)}render(){if(this.div)return this.div;let R,B;this.width&&(R=this.x,B=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(_e=>{var te;return(te=this.div)==null?void 0:te.setAttribute("aria-label",_e)});const[J,Q,de,fe]=le(this,v,Hn).call(this);if(this.setAt(J,Q,0,0),this.setDims(de,fe),le(this,v,xt).call(this),this.width){const[_e,te]=this.parentDimensions;this.setAspectRatio(this.width*_e,this.height*te),this.setAt(R*_e,B*te,this.width*_e,this.height*te),ve(this,k,!0),le(this,v,ut).call(this),this.setDims(this.width*_e,this.height*te),le(this,v,it).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return le(this,v,kt).call(this),this.div}setDimensions(R,B){const J=Math.round(R),Q=Math.round(B);if(l(this,I)===J&&l(this,_)===Q)return;ve(this,I,J),ve(this,_,Q),this.canvas.style.visibility="hidden";const[de,fe]=this.parentDimensions;this.width=R/de,this.height=B/fe,this.fixAndSetPosition(),l(this,x)&&le(this,v,hn).call(this,R,B),le(this,v,ut).call(this),le(this,v,it).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(R,B,J){var De,ze,Xe;if(R instanceof o.InkAnnotationElement)return null;const Q=super.deserialize(R,B,J);Q.thickness=R.thickness,Q.color=n.Util.makeHexColor(...R.color),Q.opacity=R.opacity;const[de,fe]=Q.pageDimensions,_e=Q.width*de,te=Q.height*fe,Te=Q.parentScale,Ce=R.thickness/2;ve(Q,x,!0),ve(Q,I,Math.round(_e)),ve(Q,_,Math.round(te));const{paths:Fe,rect:Ne,rotation:je}=R;for(let{bezier:Ee}of Fe){Ee=le(De=ne,M,Kn).call(De,Ee,Ne,je);const pe=[];Q.paths.push(pe);let be=Te*(Ee[0]-Ce),Me=Te*(Ee[1]-Ce);for(let qe=2,Z=Ee.length;qe<Z;qe+=6){const Se=Te*(Ee[qe]-Ce),Re=Te*(Ee[qe+1]-Ce),Be=Te*(Ee[qe+2]-Ce),Ue=Te*(Ee[qe+3]-Ce),Ie=Te*(Ee[qe+4]-Ce),K=Te*(Ee[qe+5]-Ce);pe.push([[be,Me],[Se,Re],[Be,Ue],[Ie,K]]),be=Ie,Me=K}const Ke=le(this,M,qn).call(this,pe);Q.bezierPath2D.push(Ke)}const ke=le(ze=Q,v,pn).call(ze);return ve(Q,a,Math.max(i.AnnotationEditor.MIN_SIZE,ke[2]-ke[0])),ve(Q,d,Math.max(i.AnnotationEditor.MIN_SIZE,ke[3]-ke[1])),le(Xe=Q,v,hn).call(Xe,_e,te),Q}serialize(){if(this.isEmpty())return null;const R=this.getRect(0,0),B=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:B,thickness:this.thickness,opacity:this.opacity,paths:le(this,v,Xn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,R),pageIndex:this.pageIndex,rect:R,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};d=new WeakMap,a=new WeakMap,g=new WeakMap,C=new WeakMap,y=new WeakMap,w=new WeakMap,F=new WeakMap,x=new WeakMap,T=new WeakMap,k=new WeakMap,H=new WeakMap,I=new WeakMap,_=new WeakMap,E=new WeakMap,v=new WeakSet,Ln=function(R){const B=this.thickness;this.addCommands({cmd:()=>{this.thickness=R,le(this,v,ht).call(this)},undo:()=>{this.thickness=B,le(this,v,ht).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Bn=function(R){const B=this.color;this.addCommands({cmd:()=>{this.color=R,le(this,v,it).call(this)},undo:()=>{this.color=B,le(this,v,it).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Vn=function(R){R/=100;const B=this.opacity;this.addCommands({cmd:()=>{this.opacity=R,le(this,v,it).call(this)},undo:()=>{this.opacity=B,le(this,v,it).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Hn=function(){const{parentRotation:R,parentDimensions:[B,J]}=this;switch(R){case 90:return[0,J,J,B];case 180:return[B,J,B,J];case 270:return[B,0,J,B];default:return[0,0,B,J]}},cn=function(){const{ctx:R,color:B,opacity:J,thickness:Q,parentScale:de,scaleFactor:fe}=this;R.lineWidth=Q*de/fe,R.lineCap="round",R.lineJoin="round",R.miterLimit=10,R.strokeStyle=`${B}${(0,u.opacityToHex)(J)}`},Un=function(R,B){this.canvas.addEventListener("contextmenu",r.noContextMenu),this.canvas.addEventListener("pointerleave",l(this,C)),this.canvas.addEventListener("pointermove",l(this,g)),this.canvas.addEventListener("pointerup",l(this,y)),this.canvas.removeEventListener("pointerdown",l(this,w)),this.isEditing=!0,l(this,k)||(ve(this,k,!0),le(this,v,ut).call(this),this.thickness||(this.thickness=ne._defaultThickness),this.color||(this.color=ne._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ne._defaultOpacity)),this.currentPath.push([R,B]),ve(this,T,!1),le(this,v,cn).call(this),ve(this,E,()=>{le(this,v,Wn).call(this),l(this,E)&&window.requestAnimationFrame(l(this,E))}),window.requestAnimationFrame(l(this,E))},dn=function(R,B){const[J,Q]=this.currentPath.at(-1);if(this.currentPath.length>1&&R===J&&B===Q)return;const de=this.currentPath;let fe=l(this,F);if(de.push([R,B]),ve(this,T,!0),de.length<=2){fe.moveTo(...de[0]),fe.lineTo(R,B);return}de.length===3&&(ve(this,F,fe=new Path2D),fe.moveTo(...de[0])),le(this,v,zn).call(this,fe,...de.at(-3),...de.at(-2),R,B)},jn=function(){if(this.currentPath.length===0)return;const R=this.currentPath.at(-1);l(this,F).lineTo(...R)},$n=function(R,B){ve(this,E,null),R=Math.min(Math.max(R,0),this.canvas.width),B=Math.min(Math.max(B,0),this.canvas.height),le(this,v,dn).call(this,R,B),le(this,v,jn).call(this);let J;if(this.currentPath.length!==1)J=le(this,v,Gn).call(this);else{const te=[R,B];J=[[te,te.slice(),te.slice(),te]]}const Q=l(this,F),de=this.currentPath;this.currentPath=[],ve(this,F,new Path2D);const fe=()=>{this.allRawPaths.push(de),this.paths.push(J),this.bezierPath2D.push(Q),this.rebuild()},_e=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(le(this,v,xt).call(this),le(this,v,kt).call(this)),le(this,v,ht).call(this))};this.addCommands({cmd:fe,undo:_e,mustExec:!0})},Wn=function(){if(!l(this,T))return;ve(this,T,!1);const R=Math.ceil(this.thickness*this.parentScale),B=this.currentPath.slice(-3),J=B.map(fe=>fe[0]),Q=B.map(fe=>fe[1]);Math.min(...J)-R,Math.max(...J)+R,Math.min(...Q)-R,Math.max(...Q)+R;const{ctx:de}=this;de.save(),de.clearRect(0,0,this.canvas.width,this.canvas.height);for(const fe of this.bezierPath2D)de.stroke(fe);de.stroke(l(this,F)),de.restore()},zn=function(R,B,J,Q,de,fe,_e){const te=(B+Q)/2,Te=(J+de)/2,Ce=(Q+fe)/2,Fe=(de+_e)/2;R.bezierCurveTo(te+2*(Q-te)/3,Te+2*(de-Te)/3,Ce+2*(Q-Ce)/3,Fe+2*(de-Fe)/3,Ce,Fe)},Gn=function(){const R=this.currentPath;if(R.length<=2)return[[R[0],R[0],R.at(-1),R.at(-1)]];const B=[];let J,[Q,de]=R[0];for(J=1;J<R.length-2;J++){const[Ne,je]=R[J],[ke,De]=R[J+1],ze=(Ne+ke)/2,Xe=(je+De)/2,Ee=[Q+2*(Ne-Q)/3,de+2*(je-de)/3],pe=[ze+2*(Ne-ze)/3,Xe+2*(je-Xe)/3];B.push([[Q,de],Ee,pe,[ze,Xe]]),[Q,de]=[ze,Xe]}const[fe,_e]=R[J],[te,Te]=R[J+1],Ce=[Q+2*(fe-Q)/3,de+2*(_e-de)/3],Fe=[te+2*(fe-te)/3,Te+2*(_e-Te)/3];return B.push([[Q,de],Ce,Fe,[te,Te]]),B},it=function(){if(this.isEmpty()){le(this,v,Ft).call(this);return}le(this,v,cn).call(this);const{canvas:R,ctx:B}=this;B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,R.width,R.height),le(this,v,Ft).call(this);for(const J of this.bezierPath2D)B.stroke(J)},un=function(R){this.canvas.removeEventListener("pointerleave",l(this,C)),this.canvas.removeEventListener("pointermove",l(this,g)),this.canvas.removeEventListener("pointerup",l(this,y)),this.canvas.addEventListener("pointerdown",l(this,w)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",r.noContextMenu)},10),le(this,v,$n).call(this,R.offsetX,R.offsetY),this.addToAnnotationStorage(),this.setInBackground()},xt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(R=>{var B;return(B=this.canvas)==null?void 0:B.setAttribute("aria-label",R)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},kt=function(){ve(this,H,new ResizeObserver(R=>{const B=R[0].contentRect;B.width&&B.height&&this.setDimensions(B.width,B.height)})),l(this,H).observe(this.div)},ut=function(){if(!l(this,k))return;const[R,B]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*R),this.canvas.height=Math.ceil(this.height*B),le(this,v,Ft).call(this)},hn=function(R,B){const J=le(this,v,Mt).call(this),Q=(R-J)/l(this,a),de=(B-J)/l(this,d);this.scaleFactor=Math.min(Q,de)},Ft=function(){const R=le(this,v,Mt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+R,this.translationY*this.scaleFactor+R)},M=new WeakSet,qn=function(R){const B=new Path2D;for(let J=0,Q=R.length;J<Q;J++){const[de,fe,_e,te]=R[J];J===0&&B.moveTo(...de),B.bezierCurveTo(fe[0],fe[1],_e[0],_e[1],te[0],te[1])}return B},fn=function(R,B,J){const[Q,de,fe,_e]=B;switch(J){case 0:for(let te=0,Te=R.length;te<Te;te+=2)R[te]+=Q,R[te+1]=_e-R[te+1];break;case 90:for(let te=0,Te=R.length;te<Te;te+=2){const Ce=R[te];R[te]=R[te+1]+Q,R[te+1]=Ce+de}break;case 180:for(let te=0,Te=R.length;te<Te;te+=2)R[te]=fe-R[te],R[te+1]+=de;break;case 270:for(let te=0,Te=R.length;te<Te;te+=2){const Ce=R[te];R[te]=fe-R[te+1],R[te+1]=_e-Ce}break;default:throw new Error("Invalid rotation")}return R},Kn=function(R,B,J){const[Q,de,fe,_e]=B;switch(J){case 0:for(let te=0,Te=R.length;te<Te;te+=2)R[te]-=Q,R[te+1]=_e-R[te+1];break;case 90:for(let te=0,Te=R.length;te<Te;te+=2){const Ce=R[te];R[te]=R[te+1]-de,R[te+1]=Ce-Q}break;case 180:for(let te=0,Te=R.length;te<Te;te+=2)R[te]=fe-R[te],R[te+1]-=de;break;case 270:for(let te=0,Te=R.length;te<Te;te+=2){const Ce=R[te];R[te]=_e-R[te+1],R[te+1]=fe-Ce}break;default:throw new Error("Invalid rotation")}return R},Xn=function(R,B,J,Q){var Te,Ce;const de=[],fe=this.thickness/2,_e=R*B+fe,te=R*J+fe;for(const Fe of this.paths){const Ne=[],je=[];for(let ke=0,De=Fe.length;ke<De;ke++){const[ze,Xe,Ee,pe]=Fe[ke],be=R*ze[0]+_e,Me=R*ze[1]+te,Ke=R*Xe[0]+_e,qe=R*Xe[1]+te,Z=R*Ee[0]+_e,Se=R*Ee[1]+te,Re=R*pe[0]+_e,Be=R*pe[1]+te;ke===0&&(Ne.push(be,Me),je.push(be,Me)),Ne.push(Ke,qe,Z,Se,Re,Be),je.push(Ke,qe),ke===De-1&&je.push(Re,Be)}de.push({bezier:le(Te=ne,M,fn).call(Te,Ne,Q,this.rotation),points:le(Ce=ne,M,fn).call(Ce,je,Q,this.rotation)})}return de},pn=function(){let R=1/0,B=-1/0,J=1/0,Q=-1/0;for(const de of this.paths)for(const[fe,_e,te,Te]of de){const Ce=n.Util.bezierBoundingBox(...fe,..._e,...te,...Te);R=Math.min(R,Ce[0]),J=Math.min(J,Ce[1]),B=Math.max(B,Ce[2]),Q=Math.max(Q,Ce[3])}return[R,J,B,Q]},Mt=function(){return l(this,x)?Math.ceil(this.thickness*this.parentScale):0},ht=function(R=!1){if(this.isEmpty())return;if(!l(this,x)){le(this,v,it).call(this);return}const B=le(this,v,pn).call(this),J=le(this,v,Mt).call(this);ve(this,a,Math.max(i.AnnotationEditor.MIN_SIZE,B[2]-B[0])),ve(this,d,Math.max(i.AnnotationEditor.MIN_SIZE,B[3]-B[1]));const Q=Math.ceil(J+l(this,a)*this.scaleFactor),de=Math.ceil(J+l(this,d)*this.scaleFactor),[fe,_e]=this.parentDimensions;this.width=Q/fe,this.height=de/_e,this.setAspectRatio(Q,de);const te=this.translationX,Te=this.translationY;this.translationX=-B[0],this.translationY=-B[1],le(this,v,ut).call(this),le(this,v,it).call(this),ve(this,I,Q),ve(this,_,de),this.setDims(Q,de);const Ce=R?J/this.scaleFactor/2:0;this.translate(te-this.translationX-Ce,Te-this.translationY-Ce)},me(ne,M),Qe(ne,"_defaultColor",null),Qe(ne,"_defaultOpacity",1),Qe(ne,"_defaultThickness",1),Qe(ne,"_type","ink");let c=ne;t.InkEditor=c},(e,t,s)=>{var c,d,a,g,C,y,w,F,x,T,k,vt,yt,It,gn,Yn,Jn,mn,Dt,Qn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var n=s(1),i=s(4),o=s(6),r=s(29);const P=class P extends i.AnnotationEditor{constructor(se){super({...se,name:"stampEditor"});me(this,k);me(this,c,null);me(this,d,null);me(this,a,null);me(this,g,null);me(this,C,null);me(this,y,null);me(this,w,null);me(this,F,null);me(this,x,!1);me(this,T,!1);ve(this,g,se.bitmapUrl),ve(this,C,se.bitmapFile)}static initialize(se){i.AnnotationEditor.initialize(se)}static get supportedTypes(){const se=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",se.map(ae=>`image/${ae}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(se){return this.supportedTypes.includes(se)}static paste(se,ae){ae.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:se.getAsFile()})}remove(){var se,ae;l(this,d)&&(ve(this,c,null),this._uiManager.imageManager.deleteId(l(this,d)),(se=l(this,y))==null||se.remove(),ve(this,y,null),(ae=l(this,w))==null||ae.disconnect(),ve(this,w,null)),super.remove()}rebuild(){if(!this.parent){l(this,d)&&le(this,k,It).call(this);return}super.rebuild(),this.div!==null&&(l(this,d)&&le(this,k,It).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,a)||l(this,c)||l(this,g)||l(this,C))}get isResizable(){return!0}render(){if(this.div)return this.div;let se,ae;if(this.width&&(se=this.x,ae=this.y),super.render(),this.div.hidden=!0,l(this,c)?le(this,k,gn).call(this):le(this,k,It).call(this),this.width){const[ee,ue]=this.parentDimensions;this.setAt(se*ee,ae*ue,this.width*ee,this.height*ue)}return this.div}static deserialize(se,ae,ee){if(se instanceof r.StampAnnotationElement)return null;const ue=super.deserialize(se,ae,ee),{rect:W,bitmapUrl:ie,bitmapId:he,isSvg:j,accessibilityData:b}=se;he&&ee.imageManager.isValidId(he)?ve(ue,d,he):ve(ue,g,ie),ve(ue,x,j);const[A,N]=ue.pageDimensions;return ue.width=(W[2]-W[0])/A,ue.height=(W[3]-W[1])/N,b&&(ue.altTextData=b),ue}serialize(se=!1,ae=null){if(this.isEmpty())return null;const ee={annotationType:n.AnnotationEditorType.STAMP,bitmapId:l(this,d),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,x),structTreeParentId:this._structTreeParentId};if(se)return ee.bitmapUrl=le(this,k,Dt).call(this,!0),ee.accessibilityData=this.altTextData,ee;const{decorative:ue,altText:W}=this.altTextData;if(!ue&&W&&(ee.accessibilityData={type:"Figure",alt:W}),ae===null)return ee;ae.stamps||(ae.stamps=new Map);const ie=l(this,x)?(ee.rect[2]-ee.rect[0])*(ee.rect[3]-ee.rect[1]):null;if(!ae.stamps.has(l(this,d)))ae.stamps.set(l(this,d),{area:ie,serialized:ee}),ee.bitmap=le(this,k,Dt).call(this,!1);else if(l(this,x)){const he=ae.stamps.get(l(this,d));ie>he.area&&(he.area=ie,he.serialized.bitmap.close(),he.serialized.bitmap=le(this,k,Dt).call(this,!1))}return ee}};c=new WeakMap,d=new WeakMap,a=new WeakMap,g=new WeakMap,C=new WeakMap,y=new WeakMap,w=new WeakMap,F=new WeakMap,x=new WeakMap,T=new WeakMap,k=new WeakSet,vt=function(se,ae=!1){if(!se){this.remove();return}ve(this,c,se.bitmap),ae||(ve(this,d,se.id),ve(this,x,se.isSvg)),le(this,k,gn).call(this)},yt=function(){ve(this,a,null),this._uiManager.enableWaiting(!1),l(this,y)&&this.div.focus()},It=function(){if(l(this,d)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,d)).then(ae=>le(this,k,vt).call(this,ae,!0)).finally(()=>le(this,k,yt).call(this));return}if(l(this,g)){const ae=l(this,g);ve(this,g,null),this._uiManager.enableWaiting(!0),ve(this,a,this._uiManager.imageManager.getFromUrl(ae).then(ee=>le(this,k,vt).call(this,ee)).finally(()=>le(this,k,yt).call(this)));return}if(l(this,C)){const ae=l(this,C);ve(this,C,null),this._uiManager.enableWaiting(!0),ve(this,a,this._uiManager.imageManager.getFromFile(ae).then(ee=>le(this,k,vt).call(this,ee)).finally(()=>le(this,k,yt).call(this)));return}const se=document.createElement("input");se.type="file",se.accept=P.supportedTypesStr,ve(this,a,new Promise(ae=>{se.addEventListener("change",async()=>{if(!se.files||se.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ee=await this._uiManager.imageManager.getFromFile(se.files[0]);le(this,k,vt).call(this,ee)}ae()}),se.addEventListener("cancel",()=>{this.remove(),ae()})}).finally(()=>le(this,k,yt).call(this))),se.click()},gn=function(){const{div:se}=this;let{width:ae,height:ee}=l(this,c);const[ue,W]=this.pageDimensions,ie=.75;if(this.width)ae=this.width*ue,ee=this.height*W;else if(ae>ie*ue||ee>ie*W){const A=Math.min(ie*ue/ae,ie*W/ee);ae*=A,ee*=A}const[he,j]=this.parentDimensions;this.setDims(ae*he/ue,ee*j/W),this._uiManager.enableWaiting(!1);const b=ve(this,y,document.createElement("canvas"));se.append(b),se.hidden=!1,le(this,k,mn).call(this,ae,ee),le(this,k,Qn).call(this),l(this,T)||(this.parent.addUndoableEditor(this),ve(this,T,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Yn=function(se,ae){var ie;const[ee,ue]=this.parentDimensions;this.width=se/ee,this.height=ae/ue,this.setDims(se,ae),(ie=this._initialOptions)!=null&&ie.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,F)!==null&&clearTimeout(l(this,F)),ve(this,F,setTimeout(()=>{ve(this,F,null),le(this,k,mn).call(this,se,ae)},200))},Jn=function(se,ae){const{width:ee,height:ue}=l(this,c);let W=ee,ie=ue,he=l(this,c);for(;W>2*se||ie>2*ae;){const j=W,b=ie;W>2*se&&(W=W>=16384?Math.floor(W/2)-1:Math.ceil(W/2)),ie>2*ae&&(ie=ie>=16384?Math.floor(ie/2)-1:Math.ceil(ie/2));const A=new OffscreenCanvas(W,ie);A.getContext("2d").drawImage(he,0,0,j,b,0,0,W,ie),he=A.transferToImageBitmap()}return he},mn=function(se,ae){se=Math.ceil(se),ae=Math.ceil(ae);const ee=l(this,y);if(!ee||ee.width===se&&ee.height===ae)return;ee.width=se,ee.height=ae;const ue=l(this,x)?l(this,c):le(this,k,Jn).call(this,se,ae),W=ee.getContext("2d");W.filter=this._uiManager.hcmFilter,W.drawImage(ue,0,0,ue.width,ue.height,0,0,se,ae)},Dt=function(se){if(se){if(l(this,x)){const ue=this._uiManager.imageManager.getSvgUrl(l(this,d));if(ue)return ue}const ae=document.createElement("canvas");return{width:ae.width,height:ae.height}=l(this,c),ae.getContext("2d").drawImage(l(this,c),0,0),ae.toDataURL()}if(l(this,x)){const[ae,ee]=this.pageDimensions,ue=Math.round(this.width*ae*o.PixelsPerInch.PDF_TO_CSS_UNITS),W=Math.round(this.height*ee*o.PixelsPerInch.PDF_TO_CSS_UNITS),ie=new OffscreenCanvas(ue,W);return ie.getContext("2d").drawImage(l(this,c),0,0,l(this,c).width,l(this,c).height,0,0,ue,W),ie.transferToImageBitmap()}return structuredClone(l(this,c))},Qn=function(){ve(this,w,new ResizeObserver(se=>{const ae=se[0].contentRect;ae.width&&ae.height&&le(this,k,Yn).call(this,ae.width,ae.height)})),l(this,w).observe(this.div)},Qe(P,"_type","stamp");let u=P;t.StampEditor=u}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return r.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return u.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return c.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return s.version}});var t=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),o=__w_pdfjs_require__(27),r=__w_pdfjs_require__(5),u=__w_pdfjs_require__(29),c=__w_pdfjs_require__(14),d=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;pdfExports.GlobalWorkerOptions.workerSrc="/pdf.worker.min.js";console.log("PDF.js 版本:",pdfExports.version);console.log("Worker 路径:",pdfExports.GlobalWorkerOptions.workerSrc);const _sfc_main$1={name:"PDFReader",props:{pdfUrl:{type:String,required:!0},fileName:{type:String,default:""},originalPathname:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){console.log("PDFReader组件setup开始"),console.log("接收到的props:",e),console.log("- pdfUrl:",e.pdfUrl),console.log("- fileName:",e.fileName),console.log("- originalPathname:",e.originalPathname);const s=ref(null),n=ref(1),i=ref(1),o=ref(0),r=ref(1),u=ref(!1),c=ref(!1),d=ref(""),a=ref(""),g=ref(!1),C=ref(null),y=ref(null),w=async()=>{if(console.log("开始加载PDF，URL:",e.pdfUrl),!e.pdfUrl){console.error("PDF URL为空"),d.value="PDF URL为空";return}u.value=!0,d.value="",a.value="正在下载 PDF...";try{console.log("创建PDF加载任务...");const O=pdfExports.getDocument(e.pdfUrl);O.onProgress=f=>{console.log("PDF加载进度:",f);const P=Math.round(f.loaded/f.total*100);a.value=`正在加载 PDF... ${P}%`},console.log("等待PDF文档加载完成..."),s.value=await O.promise,console.log("PDF文档加载成功，页数:",s.value.numPages),o.value=s.value.numPages,a.value=`PDF 加载完成 (${o.value} 页)`,console.log("开始渲染第一页..."),await F(n.value),console.log("第一页渲染完成"),o.value>1&&(console.log("开始生成缩略图..."),await nextTick(),x())}catch(O){console.error("PDF 加载失败:",O),console.error("错误详情:",O.stack),d.value=`PDF 加载失败: ${O.message}`}finally{u.value=!1,console.log("PDF加载流程结束，loading状态:",u.value)}},F=async O=>{if(console.log(`开始渲染第${O}页...`),console.log("PDF文档是否存在:",!!s.value),!s.value){console.error("PDF文档不存在");return}try{console.log(`获取第${O}页...`);const f=await s.value.getPage(O),P=f.getViewport({scale:r.value});console.log(`第${O}页视口尺寸:`,P.width,"x",P.height);const U=document.querySelector(".pdf-canvas");if(console.log("获取到的Canvas元素:",U),!U){console.error("Canvas元素不存在");return}const ce=U.getContext("2d");console.log("设置Canvas尺寸..."),U.height=P.height,U.width=P.width;const se={canvasContext:ce,viewport:P};console.log("开始渲染页面到Canvas..."),await f.render(se).promise,console.log("页面渲染完成"),a.value=`第 ${O} 页 / 共 ${o.value} 页`}catch(f){console.error("页面渲染失败:",f),console.error("渲染错误详情:",f.stack),d.value=`页面 ${O} 渲染失败: ${f.message}`}},x=async()=>{if(s.value){await nextTick();for(let O=1;O<=Math.min(o.value,10);O++)try{const f=await s.value.getPage(O),P=f.getViewport({scale:.2}),U=`thumbnail-${O}`,ce=document.querySelector(`canvas[data-v-${U}]`)||document.querySelector(".thumbnail-canvas");if(ce){const se=ce.getContext("2d");ce.height=P.height,ce.width=P.width;const ae={canvasContext:se,viewport:P};await f.render(ae).promise}}catch(f){console.error(`缩略图 ${O} 生成失败:`,f)}}},T=()=>{n.value>1&&(n.value--,i.value=n.value,F(n.value))},k=()=>{n.value<o.value&&(n.value++,i.value=n.value,F(n.value))},H=O=>{O>=1&&O<=o.value&&(n.value=O,i.value=O,F(O))},I=()=>{r.value<3&&(r.value=Math.min(r.value+.25,3),F(n.value))},_=()=>{r.value>.5&&(r.value=Math.max(r.value-.25,.5),F(n.value))},E=()=>{const O=document.querySelector(".pdf-container"),f=document.querySelector(".pdf-canvas");if(!O||!f)return;const P=O.clientWidth-40,U=f.width;U>0&&(r.value=P/U,F(n.value))},v=O=>{O.ctrlKey&&(O.preventDefault(),O.deltaY<0?I():_())},S=async()=>{if(s.value){c.value=!0;try{window.$toast.success("保存成功","PDF 文件已成功保存！")}catch(O){console.error("PDF 保存失败:",O),window.$toast.error("保存失败",`PDF 保存失败: ${O.message}`)}finally{c.value=!1}}},m=()=>{g.value=!g.value};return watch(n,O=>{i.value=O}),watch(()=>e.pdfUrl,(O,f)=>{console.log("PDF URL发生变化:",{oldUrl:f,newUrl:O}),O&&O!==f?(console.log("PDF URL不为空且与之前不同，开始加载PDF"),n.value=1,i.value=1,o.value=0,r.value=1,u.value=!1,d.value="",a.value="",s.value=null,w()):O||console.log("PDF URL为空，跳过加载")},{immediate:!0}),onMounted(()=>{console.log("PDFReader组件mounted");const O=f=>{if(f.target.tagName!=="INPUT")switch(f.key){case"ArrowLeft":T();break;case"ArrowRight":k();break;case"Escape":t("close");break}};document.addEventListener("keydown",O),onUnmounted(()=>{document.removeEventListener("keydown",O)})}),{currentPage:n,currentPageInput:i,totalPages:o,currentScale:r,loading:u,saving:c,error:d,loadingStatus:a,showThumbnails:g,pdfContainer:C,pdfCanvas:y,loadPDF:w,previousPage:T,nextPage:k,goToPage:H,zoomIn:I,zoomOut:_,fitToWidth:E,handleWheel:v,savePDF:S,toggleThumbnails:m}}},_hoisted_1$1={class:"pdf-reader"},_hoisted_2$1={class:"pdf-header"},_hoisted_3$1={class:"pdf-info"},_hoisted_4$1={class:"pdf-title"},_hoisted_5$1={class:"pdf-status"},_hoisted_6$1={class:"pdf-controls"},_hoisted_7={class:"page-controls"},_hoisted_8=["disabled"],_hoisted_9={class:"page-info"},_hoisted_10=["max"],_hoisted_11={class:"total-pages"},_hoisted_12=["disabled"],_hoisted_13={class:"zoom-controls"},_hoisted_14=["disabled"],_hoisted_15={class:"zoom-level"},_hoisted_16=["disabled"],_hoisted_17=["disabled"],_hoisted_18={key:0,class:"saving-icon"},_hoisted_19={key:1,class:"save-icon"},_hoisted_20={class:"pdf-container",ref:"pdfContainer"},_hoisted_21={key:0,class:"pdf-loading"},_hoisted_22={key:1,class:"pdf-error"},_hoisted_23={key:2,class:"pdf-content"},_hoisted_24={key:0,class:"pdf-thumbnails"},_hoisted_25={class:"thumbnails-header"},_hoisted_26={class:"thumbnails-list"},_hoisted_27=["onClick"],_hoisted_28={class:"thumbnail-page"};function _sfc_render$1(e,t,s,n,i,o){return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3$1,[createBaseVNode("h2",_hoisted_4$1,toDisplayString(s.fileName||"PDF 文档"),1),createBaseVNode("span",_hoisted_5$1,toDisplayString(n.loadingStatus),1)]),createBaseVNode("div",_hoisted_6$1,[createBaseVNode("div",_hoisted_7,[createBaseVNode("button",{onClick:t[0]||(t[0]=(...r)=>n.previousPage&&n.previousPage(...r)),disabled:n.currentPage<=1||n.loading,class:"control-btn"}," ⬅️ 上一页 ",8,_hoisted_8),createBaseVNode("div",_hoisted_9,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>n.currentPageInput=r),onKeyup:t[2]||(t[2]=withKeys(r=>n.goToPage(n.currentPageInput),["enter"])),type:"number",min:1,max:n.totalPages,class:"page-input"},null,40,_hoisted_10),[[vModelText,n.currentPageInput,void 0,{number:!0}]]),t[11]||(t[11]=createBaseVNode("span",{class:"page-separator"},"/",-1)),createBaseVNode("span",_hoisted_11,toDisplayString(n.totalPages),1)]),createBaseVNode("button",{onClick:t[3]||(t[3]=(...r)=>n.nextPage&&n.nextPage(...r)),disabled:n.currentPage>=n.totalPages||n.loading,class:"control-btn"}," 下一页 ➡️ ",8,_hoisted_12)]),createBaseVNode("div",_hoisted_13,[createBaseVNode("button",{onClick:t[4]||(t[4]=(...r)=>n.zoomOut&&n.zoomOut(...r)),disabled:n.currentScale<=.5,class:"control-btn"}," 🔍- ",8,_hoisted_14),createBaseVNode("span",_hoisted_15,toDisplayString(Math.round(n.currentScale*100))+"%",1),createBaseVNode("button",{onClick:t[5]||(t[5]=(...r)=>n.zoomIn&&n.zoomIn(...r)),disabled:n.currentScale>=3,class:"control-btn"}," 🔍+ ",8,_hoisted_16),createBaseVNode("button",{onClick:t[6]||(t[6]=(...r)=>n.fitToWidth&&n.fitToWidth(...r)),class:"control-btn"}," 📐 适应宽度 ")]),createBaseVNode("button",{onClick:t[7]||(t[7]=(...r)=>n.savePDF&&n.savePDF(...r)),disabled:n.saving,class:"save-btn"},[n.saving?(openBlock(),createElementBlock("span",_hoisted_18,"⏳")):(openBlock(),createElementBlock("span",_hoisted_19,"💾")),createTextVNode(" "+toDisplayString(n.saving?"保存中...":"保存覆盖"),1)],8,_hoisted_17)])]),createBaseVNode("div",_hoisted_20,[n.loading?(openBlock(),createElementBlock("div",_hoisted_21,[...t[12]||(t[12]=[createBaseVNode("div",{class:"loading-spinner"},"⏳",-1),createBaseVNode("p",null,"正在加载 PDF...",-1)])])):n.error?(openBlock(),createElementBlock("div",_hoisted_22,[t[13]||(t[13]=createBaseVNode("div",{class:"error-icon"},"❌",-1)),t[14]||(t[14]=createBaseVNode("h3",null,"加载失败",-1)),createBaseVNode("p",null,toDisplayString(n.error),1),createBaseVNode("button",{onClick:t[8]||(t[8]=(...r)=>n.loadPDF&&n.loadPDF(...r)),class:"retry-btn"},"🔄 重试")])):(openBlock(),createElementBlock("div",_hoisted_23,[createBaseVNode("canvas",{ref:"pdfCanvas",class:"pdf-canvas",onWheel:t[9]||(t[9]=(...r)=>n.handleWheel&&n.handleWheel(...r))},null,544)]))],512),n.totalPages>1&&!n.loading&&!n.error?(openBlock(),createElementBlock("div",_hoisted_24,[createBaseVNode("div",_hoisted_25,[t[15]||(t[15]=createBaseVNode("h4",null,"页面导航",-1)),createBaseVNode("button",{onClick:t[10]||(t[10]=(...r)=>n.toggleThumbnails&&n.toggleThumbnails(...r)),class:"toggle-btn"},toDisplayString(n.showThumbnails?"隐藏":"显示"),1)]),withDirectives(createBaseVNode("div",_hoisted_26,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Math.min(n.totalPages,10),r=>(openBlock(),createElementBlock("div",{key:r,class:normalizeClass(["thumbnail-item",{active:n.currentPage===r}]),onClick:u=>n.goToPage(r)},[createBaseVNode("canvas",{ref_for:!0,ref:`thumbnail-${r}`,class:"thumbnail-canvas"},null,512),createBaseVNode("span",_hoisted_28,toDisplayString(r),1)],10,_hoisted_27))),128))],512),[[vShow,n.showThumbnails]])])):createCommentVNode("",!0)])}const PDFReader=_export_sfc(_sfc_main$1,[["render",_sfc_render$1],["__scopeId","data-v-b5ff7acd"]]),_sfc_main={name:"PDFEditor",components:{PDFReader},setup(){return{router:useRouter()}},data(){return{pdfUrl:"",fileName:"",originalPathname:"",saving:!1}},methods:{initPage(){console.log("初始化编辑页面参数...");const t=new URLSearchParams(window.location.search).get("file");if(console.log("URL参数file:",t),t)try{console.log("解析文件参数...");const s=JSON.parse(decodeURIComponent(t));console.log("解析的文件数据:",s),this.pdfUrl=s.url,this.fileName=s.name,this.originalPathname=s.pathname,console.log("设置参数完成:"),console.log("- pdfUrl:",this.pdfUrl),console.log("- fileName:",this.fileName),console.log("- originalPathname:",this.originalPathname),document.title=`编辑 ${this.fileName} - 文件阅读管理`}catch(s){console.error("解析文件参数失败:",s),window.$toast.error("参数错误","无法解析文件信息"),this.router.push("/")}else console.error("URL中未找到file参数"),window.$toast.error("参数缺失","未找到文件信息"),this.router.push("/")},goBack(){this.router.push("/")},downloadPDF(){if(!this.pdfUrl)return;const e=document.createElement("a");e.href=this.pdfUrl,e.download=this.fileName,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e),window.$toast.success("下载成功","PDF 副本已开始下载")},async saveToServer(){if(!this.originalPathname){window.$toast.error("保存失败","文件路径信息缺失");return}this.saving=!0;try{if(!await window.$confirm({title:"确认覆盖保存",message:`确定要覆盖保存文件 "${this.fileName}" 吗？`,details:"此操作将用当前版本覆盖原文件，无法撤销。建议先下载备份。",confirmText:"确认覆盖",cancelText:"取消",type:"danger"})){this.saving=!1;return}const t=await fetch(this.pdfUrl);if(!t.ok)throw new Error("无法获取当前 PDF 数据");const s=await t.blob(),n=await this.blobToBase64(s),i=await fetch("/api/update-pdf",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pathname:this.originalPathname,newPdfData:n,mimeType:"application/pdf"})});if(!i.ok){const r=await i.json();throw new Error(r.details||`保存失败: ${i.statusText}`)}const o=await i.json();console.log("PDF 保存成功:",o),window.$toast.success("保存成功","文件已成功保存到服务器")}catch(e){console.error("保存失败:",e),window.$toast.error("保存失败",`保存过程中出错: ${e.message}`)}finally{this.saving=!1}},blobToBase64(e){return new Promise((t,s)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=s,n.readAsDataURL(e)})}},mounted(){console.log("PDFEditor组件mounted"),this.initPage(),console.log("PDFEditor mounted完成，传递给PDFReader的参数:"),console.log("- pdfUrl:",this.pdfUrl),console.log("- fileName:",this.fileName),console.log("- originalPathname:",this.originalPathname)},beforeRouteUpdate(e,t,s){this.initPage(),s()}},_hoisted_1={class:"pdf-editor"},_hoisted_2={class:"editor-header"},_hoisted_3={class:"header-actions"},_hoisted_4=["disabled"],_hoisted_5={key:0,class:"saving-icon"},_hoisted_6={key:1,class:"save-icon"};function _sfc_render(e,t,s,n,i,o){const r=resolveComponent("PDFReader");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("button",{onClick:t[0]||(t[0]=(...u)=>o.goBack&&o.goBack(...u)),class:"back-btn"}," ⬅️ 返回列表 "),t[3]||(t[3]=createBaseVNode("h1",{class:"editor-title"},"PDF 编辑器",-1)),createBaseVNode("div",_hoisted_3,[createBaseVNode("button",{onClick:t[1]||(t[1]=(...u)=>o.downloadPDF&&o.downloadPDF(...u)),class:"download-btn"}," 📥 下载副本 "),createBaseVNode("button",{onClick:t[2]||(t[2]=(...u)=>o.saveToServer&&o.saveToServer(...u)),disabled:i.saving,class:"save-btn"},[i.saving?(openBlock(),createElementBlock("span",_hoisted_5,"⏳")):(openBlock(),createElementBlock("span",_hoisted_6,"💾")),createTextVNode(" "+toDisplayString(i.saving?"保存中...":"覆盖保存"),1)],8,_hoisted_4)])]),createVNode(r,{"pdf-url":i.pdfUrl,"file-name":i.fileName,"original-pathname":i.originalPathname,ref:"pdfReader"},null,8,["pdf-url","file-name","original-pathname"])])}const PDFEditor=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-dda48a18"]]),routes=[{path:"/",name:"Home",component:HomeView},{path:"/editor",name:"PDFEditor",component:PDFEditor}],router=createRouter({history:createWebHistory(),routes});createApp(App).use(router).mount("#app");export{getDefaultExportFromCjs as g};
