<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Management System - Secure Upload & PDF Reader</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vue-router@4/dist/vue-router.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: -1;
        }

        .background-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .shape-1 {
            width: 300px;
            height: 300px;
            top: -150px;
            right: -100px;
            animation-delay: 0s;
        }

        .shape-2 {
            width: 200px;
            height: 200px;
            bottom: -100px;
            left: -50px;
            animation-delay: 2s;
        }

        .shape-3 {
            width: 150px;
            height: 150px;
            top: 50%;
            left: -75px;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }

        .app-header {
            text-align: center;
            padding: 3rem 2rem 2rem;
            position: relative;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .app-title {
            font-size: 3rem;
            font-weight: 700;
            color: white;
            margin: 0;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .app-title .icon {
            font-size: 2.5rem;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .app-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin: 1rem 0 0;
            font-weight: 300;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem 2rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            min-height: 600px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .header-icon {
            font-size: 2.5rem;
            animation: bounce 2s ease-in-out infinite;
        }

        .header-text h2 {
            margin: 0;
            color: #1e293b;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .header-text p {
            margin: 0.25rem 0 0;
            color: #64748b;
            font-size: 0.875rem;
        }

        .upload-zone {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px dashed #cbd5e1;
            border-radius: 16px;
            padding: 3rem 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .upload-zone::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .upload-zone:hover::before,
        .upload-zone.dragover::before {
            opacity: 1;
        }

        .upload-zone:hover,
        .upload-zone.dragover {
            border-color: #6366f1;
            background: linear-gradient(135deg, #e0e7ff 0%, #ddd6fe 100%);
            transform: translateY(-2px);
        }

        .upload-zone.has-file {
            border-color: #10b981;
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
        }

        .upload-zone.uploading {
            border-color: #f59e0b;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        }

        .upload-zone-content {
            position: relative;
            z-index: 1;
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }

        .upload-icon.icon-animate {
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .upload-text h3 {
            margin: 0 0 0.5rem;
            color: #1e293b;
            font-size: 1.25rem;
            font-weight: 600;
        }

        .upload-hint {
            margin: 0;
            color: #64748b;
            font-size: 0.875rem;
        }

        .link-text {
            color: #6366f1;
            font-weight: 600;
            text-decoration: underline;
            cursor: pointer;
        }

        .upload-input {
            display: none;
        }

        .file-card {
            background: linear-gradient(135deg, #fafafa 0%, #f3f4f6 100%);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 1px solid #e5e7eb;
        }

        .file-header {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .file-icon {
            font-size: 2rem;
        }

        .file-details h4 {
            margin: 0 0 0.5rem;
            color: #1e293b;
            font-size: 1rem;
            font-weight: 600;
            word-break: break-all;
        }

        .file-meta {
            display: flex;
            gap: 1rem;
        }

        .meta-item {
            font-size: 0.75rem;
            color: #64748b;
            background: white;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
        }

        .btn {
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-icon {
            font-size: 1.25rem;
        }

        .progress-section {
            margin-top: 1.5rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .progress-percentage {
            font-weight: 600;
            color: #6366f1;
        }

        .progress-bar {
            height: 8px;
            background: #e5e7eb;
            border-radius: 999px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            border-radius: 999px;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .message {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1.5rem;
            animation: slideInUp 0.3s ease;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .error-message {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 1px solid #fecaca;
            color: #991b1b;
        }

        .success-message {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 1px solid #bbf7d0;
            color: #166534;
        }

        .message-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .message-text strong {
            display: block;
            margin-bottom: 0.25rem;
            font-size: 1rem;
        }

        .message-text p {
            margin: 0 0 0.75rem;
            font-size: 0.875rem;
        }

        .file-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: inherit;
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .file-link:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-1px);
        }

        .file-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .file-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            animation: slideInUp 0.5s ease forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        .file-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
            background: rgba(255, 255, 255, 1);
        }

        .file-content {
            margin-bottom: 1rem;
        }

        .file-name {
            margin: 0 0 0.5rem;
            color: #1e293b;
            font-size: 1.125rem;
            font-weight: 600;
            line-height: 1.4;
            word-break: break-all;
            flex: 1;
        }

        .file-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .type-pdf {
            background: #fee2e2;
            color: #991b1b;
        }

        .type-image {
            background: #dbeafe;
            color: #1e40af;
        }

        .type-default {
            background: #f1f5f9;
            color: #475569;
        }

        .file-meta-info {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .meta-info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: #64748b;
        }

        .meta-icon {
            font-size: 1rem;
        }

        .file-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 0.375rem 0.75rem;
            border: none;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.375rem;
            min-width: 70px;
            justify-content: center;
        }

        .view-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .view-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.3);
        }

        .edit-btn {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
        }

        .edit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(139, 92, 246, 0.3);
        }

        .copy-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);
        }

        .delete-btn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .delete-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(239, 68, 68, 0.3);
        }

        .delete-btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .action-icon {
            font-size: 0.875rem;
        }

        .action-text {
            font-size: 0.75rem;
        }

        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: #64748b;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state h3 {
            margin: 0 0 0.5rem;
            color: #1e293b;
            font-size: 1.25rem;
        }

        .stats-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-item {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 1rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-icon {
            font-size: 2rem;
        }

        .stat-content {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .stat-number {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e293b;
        }

        .stat-label {
            font-size: 0.75rem;
            color: #64748b;
            font-weight: 500;
        }

        .app-footer {
            text-align: center;
            padding: 2rem;
            margin-top: 2rem;
        }

        .footer-content {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .toast {
            position: fixed;
            top: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            animation: slideInRight 0.3s ease;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .toast.error {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .modal-icon {
            font-size: 2rem;
        }

        .modal-title {
            margin: 0;
            color: #1e293b;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .modal-content {
            margin-bottom: 2rem;
            color: #64748b;
            line-height: 1.6;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn-cancel {
            background: #e5e7eb;
            color: #64748b;
        }

        .modal-btn-cancel:hover {
            background: #d1d5db;
        }

        .modal-btn-confirm {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .modal-btn-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(239, 68, 68, 0.3);
        }

        /* Settings Button */
        .settings-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 3rem;
            height: 3rem;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .settings-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(99, 102, 241, 0.4);
        }

        /* Settings Modal */
        .settings-modal {
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .config-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .config-section h4 {
            margin: 0 0 1rem 0;
            color: #1e293b;
            font-size: 1.125rem;
            font-weight: 600;
        }

        .config-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .status-label {
            font-weight: 500;
            color: #64748b;
        }

        .status-value {
            font-weight: 600;
        }

        .status-configured {
            color: #10b981;
        }

        .status-not-configured {
            color: #ef4444;
        }

        .config-form {
            margin-bottom: 1.5rem;
        }

        .config-form label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
        }

        .config-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.875rem;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .config-input:focus {
            outline: none;
            border-color: #6366f1;
        }

        .config-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .config-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .save-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .clear-btn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .config-help {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .config-help h5 {
            margin: 0 0 0.75rem 0;
            color: #374151;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .config-help ol {
            margin: 0;
            padding-left: 1.25rem;
            font-size: 0.813rem;
            color: #6b7280;
            line-height: 1.5;
        }

        .config-help li {
            margin-bottom: 0.25rem;
        }

        .storage-info {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0.75rem;
            background: white;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }

        .info-label {
            font-weight: 500;
            color: #374151;
        }

        .info-value {
            font-weight: 600;
            color: #6366f1;
        }

        @media (max-width: 1200px) {
            .app-container {
                padding: 0 1.5rem 1.5rem;
            }

            .main-content {
                gap: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .app-header {
                padding: 2rem 1rem 1rem;
            }

            .app-title {
                font-size: 2rem;
                flex-direction: column;
                gap: 0.5rem;
            }

            .app-title .icon {
                font-size: 2rem;
            }

            .app-subtitle {
                font-size: 1rem;
            }

            .app-container {
                padding: 0 1rem 1rem;
            }

            .main-content {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .card {
                padding: 1.5rem;
            }

            .card-header {
                flex-direction: column;
                text-align: center;
                gap: 0.75rem;
            }

            .upload-zone {
                padding: 2rem 1rem;
            }

            .upload-icon {
                font-size: 3rem;
                margin-bottom: 1rem;
            }

            .upload-text h3 {
                font-size: 1.125rem;
            }

            .file-header {
                flex-direction: column;
                text-align: center;
            }

            .file-meta {
                justify-content: center;
            }

            .message {
                flex-direction: column;
                text-align: center;
            }

            .stats-panel {
                grid-template-columns: 1fr;
            }

            .file-actions {
                flex-direction: column;
            }

            .action-btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .app-header {
                padding: 1.5rem 0.75rem 0.75rem;
            }

            .app-title {
                font-size: 1.75rem;
            }

            .app-container {
                padding: 0 0.75rem 0.75rem;
            }

            .card {
                padding: 1rem;
            }

            .toast {
                right: 1rem;
                left: 1rem;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="app-background">
            <div class="background-shapes">
                <div class="shape shape-1"></div>
                <div class="shape shape-2"></div>
                <div class="shape shape-3"></div>
            </div>
        </div>

        <div class="app-header">
            <div class="header-content">
                <h1 class="app-title">
                    <span class="icon">☁️</span>
                    File Management System
                </h1>
                <p class="app-subtitle">Secure and fast file upload & management platform</p>
            </div>
        </div>

        <div class="app-container">
            <div class="main-content">
                <!-- Upload Section -->
                <div class="card">
                    <div class="card-header">
                        <div class="header-icon">📤</div>
                        <div class="header-text">
                            <h2>File Upload</h2>
                            <p>Secure and fast upload experience</p>
                        </div>
                    </div>

                    <!-- Upload Zone -->
                    <div
                        class="upload-zone"
                        :class="{
                            'dragover': isDragOver,
                            'has-file': selectedFile,
                            'uploading': uploading
                        }"
                        @click="triggerFileInput"
                        @dragover.prevent="handleDragOver"
                        @dragleave.prevent="handleDragLeave"
                        @drop.prevent="handleDrop"
                    >
                        <div class="upload-zone-content">
                            <div class="upload-icon" :class="{ 'icon-animate': uploading }">
                                <div v-if="!selectedFile" class="icon-idle">📁</div>
                                <div v-else-if="uploading" class="icon-uploading">⏳</div>
                                <div v-else class="icon-ready">✅</div>
                            </div>

                            <div class="upload-text">
                                <h3 v-if="!selectedFile">
                                    Drag files here
                                </h3>
                                <h3 v-else-if="uploading">
                                    Uploading...
                                </h3>
                                <h3 v-else>
                                    Ready to upload
                                </h3>

                                <p v-if="!selectedFile" class="upload-hint">
                                    Or <span class="link-text">click to select files</span>
                                    <br><small style="color: #94a3b8;">Support up to 100MB files</small>
                                </p>
                                <p v-else-if="uploading" class="upload-hint">
                                    Please wait, file is being processed
                                </p>
                                <p v-else class="upload-hint">
                                    {{ selectedFile.name }}
                                </p>
                            </div>

                            <input
                                ref="fileInput"
                                type="file"
                                class="upload-input"
                                @change="handleFileSelect"
                            />
                        </div>
                    </div>

                    <!-- File Info Card -->
                    <div v-if="selectedFile" class="file-card">
                        <div class="file-header">
                            <div class="file-icon">📄</div>
                            <div class="file-details">
                                <h4>{{ selectedFile.name }}</h4>
                                <div class="file-meta">
                                    <span class="meta-item">{{ formatFileSize(selectedFile.size) }}</span>
                                    <span class="meta-item">{{ selectedFile.type || 'Unknown type' }}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Upload Button -->
                    <button
                        v-if="selectedFile && !uploading"
                        @click="uploadFile"
                        :disabled="!selectedFile"
                        class="btn btn-primary"
                    >
                        <span class="btn-icon">🚀</span>
                        Start Upload
                    </button>

                    <!-- Progress Bar -->
                    <div v-if="uploading" class="progress-section">
                        <div class="progress-header">
                            <span>Upload Progress</span>
                            <span class="progress-percentage">{{ uploadProgress }}%</span>
                        </div>
                        <div class="progress-bar">
                            <div
                                class="progress-fill"
                                :style="{ width: uploadProgress + '%' }"
                            ></div>
                        </div>
                    </div>

                    <!-- Status Messages -->
                    <div v-if="error" class="message error-message">
                        <div class="message-icon">❌</div>
                        <div class="message-text">
                            <strong>Upload Failed</strong>
                            <p>{{ error }}</p>
                        </div>
                    </div>

                    <div v-if="success" class="message success-message">
                        <div class="message-icon">✅</div>
                        <div class="message-text">
                            <strong>Upload Successful!</strong>
                            <p>File has been successfully saved to cloud storage</p>
                            <a :href="fileUrl" target="_blank" class="file-link">
                                View File →
                            </a>
                        </div>
                    </div>
                </div>

                <!-- File List Section -->
                <div class="card">
                    <div class="card-header">
                        <div class="header-icon">📁</div>
                        <div class="header-text">
                            <h2>File Management</h2>
                            <p>View and manage your files</p>
                        </div>
                    </div>

                    <!-- Statistics -->
                    <div v-if="files.length > 0" class="stats-panel">
                        <div class="stat-item">
                            <div class="stat-icon">📊</div>
                            <div class="stat-content">
                                <div class="stat-number">{{ files.length }}</div>
                                <div class="stat-label">Total Files</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">💾</div>
                            <div class="stat-content">
                                <div class="stat-number">{{ getTotalSize() }}</div>
                                <div class="stat-label">Total Size</div>
                            </div>
                        </div>
                    </div>

                    <!-- Loading State -->
                    <div v-if="loading && files.length === 0" class="empty-state">
                        <div class="empty-icon">⏳</div>
                        <h3>Loading file list...</h3>
                    </div>

                    <!-- Error State -->
                    <div v-else-if="fileListError" class="empty-state">
                        <div class="empty-icon">❌</div>
                        <h3>Loading Failed</h3>
                        <p>{{ fileListError }}</p>
                        <button @click="refreshFileList" class="btn btn-primary" style="margin-top: 1rem; max-width: 200px;">
                            🔄 Retry
                        </button>
                    </div>

                    <!-- Empty State -->
                    <div v-else-if="files.length === 0" class="empty-state">
                        <div class="empty-icon">📭</div>
                        <h3>No files yet</h3>
                        <p>Upload your first file to get started!</p>
                    </div>

                    <!-- File List -->
                    <div v-else class="file-list">
                        <div
                            v-for="(file, index) in files"
                            :key="file.id"
                            class="file-item"
                            :style="{ 'animation-delay': index * 0.1 + 's' }"
                        >
                            <div class="file-content">
                                <h4 class="file-name" :title="file.name">
                                    {{ file.name }}
                                </h4>
                                <div class="file-badge" :class="getFileTypeClass(file.type)">
                                    {{ getFileTypeLabel(file.type) }}
                                </div>
                                <div class="file-meta-info">
                                    <span class="meta-info-item">
                                        <span class="meta-icon">📏</span>
                                        {{ formatFileSize(file.size) }}
                                    </span>
                                    <span class="meta-info-item">
                                        <span class="meta-icon">📅</span>
                                        {{ formatDate(file.uploadTime) }}
                                    </span>
                                </div>
                                <div class="file-actions">
                                    <a
                                        :href="file.url"
                                        target="_blank"
                                        class="action-btn view-btn"
                                        title="View file"
                                    >
                                        <span class="action-icon">👁️</span>
                                        <span class="action-text">View</span>
                                    </a>
                                    <button
                                        v-if="isPDFFile(file)"
                                        @click="editPDF(file)"
                                        class="action-btn edit-btn"
                                        title="Edit PDF"
                                    >
                                        <span class="action-icon">📝</span>
                                        <span class="action-text">Edit</span>
                                    </button>
                                    <button
                                        @click="copyUrl(file.url)"
                                        class="action-btn copy-btn"
                                        title="Copy link"
                                    >
                                        <span class="action-icon">📋</span>
                                        <span class="action-text">Copy</span>
                                    </button>
                                    <button
                                        @click="deleteFile(file)"
                                        :disabled="deleting"
                                        class="action-btn delete-btn"
                                        title="Delete file"
                                    >
                                        <span class="action-icon">🗑️</span>
                                        <span class="action-text">Delete</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Button -->
        <div class="settings-btn" @click="showSettings" title="Settings">
            ⚙️
        </div>

        <!-- Footer -->
        <div class="app-footer">
            <div class="footer-content">
                <p>💖 Built with Vue 3 + Modern Tech Stack</p>
            </div>
        </div>

        <!-- Toast Notification -->
        <div v-if="toast.show" :class="['toast', toast.type]">
            {{ toast.message }}
        </div>

        <!-- Confirmation Dialog -->
        <div v-if="confirmDialog.show" class="modal-overlay" @click.self="hideConfirmDialog">
            <div class="modal">
                <div class="modal-header">
                    <div class="modal-icon">{{ confirmDialog.icon }}</div>
                    <h3 class="modal-title">{{ confirmDialog.title }}</h3>
                </div>
                <div class="modal-content">
                    <p>{{ confirmDialog.message }}</p>
                    <p v-if="confirmDialog.details" style="margin-top: 0.5rem; font-size: 0.875rem; opacity: 0.8;">
                        {{ confirmDialog.details }}
                    </p>
                </div>
                <div class="modal-actions">
                    <button @click="hideConfirmDialog" class="modal-btn modal-btn-cancel">
                        {{ confirmDialog.cancelText }}
                    </button>
                    <button @click="confirmDialog.onConfirm" class="modal-btn modal-btn-confirm">
                        {{ confirmDialog.confirmText }}
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Dialog -->
        <div v-if="settingsDialog.show" class="modal-overlay" @click.self="hideSettings">
            <div class="modal settings-modal">
                <div class="modal-header">
                    <div class="modal-icon">⚙️</div>
                    <h3 class="modal-title">Settings</h3>
                </div>
                <div class="modal-content">
                    <!-- Vercel Blob Configuration -->
                    <div class="config-section">
                        <h4>Vercel Blob Configuration</h4>
                        <div class="config-status">
                            <span class="status-label">Status:</span>
                            <span :class="['status-value', hasVercelBlobConfig() ? 'status-configured' : 'status-not-configured']">
                                {{ hasVercelBlobConfig() ? '✅ Configured' : '❌ Not Configured' }}
                            </span>
                        </div>

                        <div class="config-form">
                            <label for="blobToken">Vercel Blob Token:</label>
                            <textarea
                                id="blobToken"
                                v-model="settingsDialog.blobToken"
                                placeholder="vercel_blob_rw_xxx..."
                                rows="3"
                                class="config-input"
                            ></textarea>

                            <div class="config-actions">
                                <button @click="saveVercelBlobToken(settingsDialog.blobToken)" class="config-btn save-btn">
                                    💾 Save Token
                                </button>
                                <button @click="clearVercelBlobConfig()" class="config-btn clear-btn">
                                    🗑️ Clear Config
                                </button>
                            </div>
                        </div>

                        <div class="config-help">
                            <h5>How to get Vercel Blob Token:</h5>
                            <ol>
                                <li>Go to your Vercel dashboard</li>
                                <li>Navigate to your project settings</li>
                                <li>Go to Environment Variables</li>
                                <li>Add: BLOB_READ_WRITE_TOKEN</li>
                                <li>Copy the token value and paste it here</li>
                            </ol>
                        </div>
                    </div>

                    <!-- Storage Information -->
                    <div class="config-section">
                        <h4>Storage Information</h4>
                        <div class="storage-info">
                            <div class="info-item">
                                <span class="info-label">Storage Type:</span>
                                <span class="info-value">{{ getStorageTypeInfo() }}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Max File Size:</span>
                                <span class="info-value">100MB</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Supported Formats:</span>
                                <span class="info-value">All file types</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button @click="hideSettings" class="modal-btn modal-btn-cancel">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    // Upload related
                    selectedFile: null,
                    uploading: false,
                    uploadProgress: 0,
                    error: '',
                    success: false,
                    fileUrl: '',
                    isDragOver: false,

                    // File list related
                    files: [],
                    loading: false,
                    fileListError: '',
                    deleting: false,

                    // Notifications and dialogs
                    toast: {
                        show: false,
                        message: '',
                        type: 'success'
                    },

                    confirmDialog: {
                        show: false,
                        title: '',
                        message: '',
                        details: '',
                        icon: '⚠️',
                        confirmText: 'Confirm',
                        cancelText: 'Cancel',
                        onConfirm: null
                    },

                    settingsDialog: {
                        show: false,
                        blobToken: ''
                    }
                };
            },

            mounted() {
                // Initialize file list
                this.loadFileList();

                // Load some sample files
                this.loadSampleFiles();

                // Load Vercel Blob configuration
                this.loadVercelBlobConfig();
            },

            methods: {
                // File upload related methods
                triggerFileInput() {
                    this.$refs.fileInput.click();
                },

                handleFileSelect(event) {
                    const file = event.target.files[0];
                    if (file) {
                        this.selectedFile = file;
                        this.resetStatus();
                    }
                },

                handleDragOver() {
                    this.isDragOver = true;
                },

                handleDragLeave() {
                    this.isDragOver = false;
                },

                handleDrop(event) {
                    this.isDragOver = false;
                    const file = event.dataTransfer.files[0];
                    if (file) {
                        this.selectedFile = file;
                        this.resetStatus();
                    }
                },

                resetStatus() {
                    this.error = '';
                    this.success = false;
                    this.uploadProgress = 0;
                    this.fileUrl = '';
                },

                formatFileSize(bytes) {
                    if (bytes === 0) return '0 Bytes';
                    const k = 1024;
                    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                    const i = Math.floor(Math.log(bytes) / Math.log(k));
                    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
                },

                async uploadFile() {
                    if (!this.selectedFile) return;

                    this.uploading = true;
                    this.error = '';
                    this.success = false;
                    this.uploadProgress = 0;

                    try {
                        // 生成唯一文件名
                        const filename = this.generateUniqueFilename(this.selectedFile);

                        console.log('=== Vercel Blob Upload Start ===');
                        console.log('Selected file:', this.selectedFile.name);
                        console.log('File size:', this.selectedFile.size);
                        console.log('File type:', this.selectedFile.type);
                        console.log('Generated filename:', filename);

                        this.uploadProgress = 10;

                        // 检查文件大小决定上传方式
                        const maxApiSize = 4.5 * 1024 * 1024; // 4.5MB (API限制)
                        const maxDirectSize = 100 * 1024 * 1024; // 100MB (Vercel Blob限制)

                        if (this.selectedFile.size > maxDirectSize) {
                            this.error = `文件太大！最大支持 ${this.formatFileSize(maxDirectSize)}，当前文件 ${this.formatFileSize(this.selectedFile.size)}`;
                            return;
                        }

                        let uploadResult;

                        // 检查是否有 Vercel Blob 配置
                        const hasVercelBlobConfig = this.hasVercelBlobConfig();

                        if (hasVercelBlobConfig) {
                            // 使用 Vercel Blob 上传
                            if (this.selectedFile.size <= maxApiSize) {
                                // 小文件：通过 API 上传 (更安全)
                                console.log('Using Vercel Blob API upload for small file');
                                uploadResult = await this.uploadViaVercelBlobAPI(filename);
                            } else {
                                // 大文件：直接上传到 Vercel Blob
                                console.log('Using direct Vercel Blob upload for large file');
                                uploadResult = await this.uploadDirectlyToVercelBlob(filename);
                            }
                        } else {
                            // 回退到免费托管服务
                            console.log('No Vercel Blob config, falling back to free hosting services');
                            uploadResult = await this.uploadToFreeHosting(this.selectedFile);
                        }

                        if (!uploadResult) {
                            throw new Error('所有上传方案都失败了');
                        }

                        // 创建文件对象
                        const newFile = {
                            id: Date.now(),
                            name: this.selectedFile.name,
                            originalName: this.selectedFile.name,
                            size: this.selectedFile.size,
                            type: this.selectedFile.type || this.getFileTypeFromName(this.selectedFile.name),
                            url: uploadResult.url,
                            uploadTime: new Date().toISOString(),
                            storageType: uploadResult.storageType
                        };

                        // 添加到文件列表
                        this.files.unshift(newFile);

                        this.success = true;
                        this.fileUrl = uploadResult.url;

                        this.showToast(`${uploadResult.storageType} 上传成功！`, 'success');

                        // 保存到本地存储
                        this.saveFilesToLocalStorage();

                        // 重置表单
                        setTimeout(() => {
                            this.selectedFile = null;
                            if (this.$refs.fileInput) {
                                this.$refs.fileInput.value = '';
                            }
                            this.success = false;
                        }, 3000);

                    } catch (err) {
                        console.error('上传错误:', err);
                        this.error = `上传失败: ${err.message || '未知错误'}`;
                        this.showToast('上传失败', 'error');
                    } finally {
                        this.uploading = false;
                    }
                },

                // 方案1: 上传到 file.io (免费文件托管服务)
                async uploadToFileIO(file) {
                    try {
                        const formData = new FormData();
                        formData.append('file', file);

                        const response = await fetch('https://file.io', {
                            method: 'POST',
                            body: formData
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const result = await response.json();

                        if (result.success && result.link) {
                            return {
                                url: result.link,
                                storageType: 'File.io'
                            };
                        } else {
                            throw new Error(result.error || 'File.io 上传失败');
                        }
                    } catch (error) {
                        console.warn('File.io 上传失败:', error.message);
                        return null;
                    }
                },

                // 方案2: 上传到 0x0.st (免费的文件分享服务)
                async uploadToZeroXZero(file) {
                    try {
                        const formData = new FormData();
                        formData.append('file', file);

                        const response = await fetch('https://0x0.st', {
                            method: 'POST',
                            body: formData
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const result = await response.text();

                        if (result && result.startsWith('http')) {
                            return {
                                url: result.trim(),
                                storageType: '0x0.st'
                            };
                        } else {
                            throw new Error('0x0.st 上传失败');
                        }
                    } catch (error) {
                        console.warn('0x0.st 上传失败:', error.message);
                        return null;
                    }
                },

                // 方案3: 上传到 tempfiles.org
                async uploadToTempFiles(file) {
                    try {
                        const formData = new FormData();
                        formData.append('file', file);

                        const response = await fetch('https://tempfiles.org/upload', {
                            method: 'POST',
                            body: formData
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const result = await response.json();

                        if (result && result.url) {
                            return {
                                url: result.url,
                                storageType: 'TempFiles.org'
                            };
                        } else {
                            throw new Error('TempFiles.org 上传失败');
                        }
                    } catch (error) {
                        console.warn('TempFiles.org 上传失败:', error.message);
                        return null;
                    }
                },

                // 方案4: 本地存储方案 (使用 Base64 编码)
                async uploadToLocalStorage(file) {
                    try {
                        return new Promise((resolve, reject) => {
                            const reader = new FileReader();

                            reader.onload = (e) => {
                                try {
                                    // 检查本地存储空间
                                    const fileSize = e.target.result.length;
                                    const maxStorage = 5 * 1024 * 1024; // 5MB 限制

                                    if (fileSize > maxStorage) {
                                        throw new Error('文件太大，无法存储在本地（最大5MB）');
                                    }

                                    // 创建文件数据
                                    const fileData = {
                                        id: Date.now(),
                                        name: file.name,
                                        size: file.size,
                                        type: file.type || this.getFileTypeFromName(file.name),
                                        data: e.target.result,
                                        uploadTime: new Date().toISOString()
                                    };

                                    // 保存到本地存储
                                    const storedFiles = JSON.parse(localStorage.getItem('uploadedFiles') || '[]');
                                    storedFiles.unshift(fileData);

                                    // 限制本地存储文件数量
                                    if (storedFiles.length > 50) {
                                        storedFiles.splice(50);
                                    }

                                    localStorage.setItem('uploadedFiles', JSON.stringify(storedFiles));

                                    // 创建可访问的URL
                                    const blob = new Blob([e.target.result], { type: file.type });
                                    const url = URL.createObjectURL(blob);

                                    resolve({
                                        url: url,
                                        storageType: '本地存储'
                                    });
                                } catch (error) {
                                    reject(error);
                                }
                            };

                            reader.onerror = () => {
                                reject(new Error('文件读取失败'));
                            };

                            reader.readAsDataURL(file);
                        });
                    } catch (error) {
                        console.warn('本地存储上传失败:', error.message);
                        return null;
                    }
                },

                // 保存文件列表到本地存储
                saveFilesToLocalStorage() {
                    try {
                        const filesToSave = this.files.map(file => ({
                            id: file.id,
                            name: file.name,
                            originalName: file.originalName,
                            size: file.size,
                            type: file.type,
                            url: file.url,
                            uploadTime: file.uploadTime,
                            storageType: file.storageType || '未知'
                        }));

                        localStorage.setItem('fileList', JSON.stringify(filesToSave));
                    } catch (error) {
                        console.warn('保存文件列表失败:', error.message);
                    }
                },

                // 从本地存储加载文件列表
                loadFilesFromLocalStorage() {
                    try {
                        const storedFiles = localStorage.getItem('fileList');
                        if (storedFiles) {
                            this.files = JSON.parse(storedFiles);
                        }
                    } catch (error) {
                        console.warn('加载文件列表失败:', error.message);
                    }
                },

                // 加载 Vercel Blob 配置
                loadVercelBlobConfig() {
                    try {
                        // 检查是否有保存的 token
                        const savedToken = localStorage.getItem('vercel_blob_token');
                        if (savedToken) {
                            console.log('已加载本地保存的 Vercel Blob Token');
                        }

                        // 检查环境变量配置
                        if (window.VERCEL_BLOB_CONFIG) {
                            console.log('检测到环境变量 Vercel Blob 配置');
                        }

                        // 检查是否在 Vercel 环境
                        if (this.detectVercelEnvironment()) {
                            console.log('检测到 Vercel 部署环境');
                        }

                    } catch (error) {
                        console.warn('加载 Vercel Blob 配置失败:', error.message);
                    }
                },

                // 保存 Vercel Blob Token 到本地存储
                saveVercelBlobToken(token) {
                    try {
                        localStorage.setItem('vercel_blob_token', token);
                        this.showToast('Vercel Blob Token 已保存', 'success');
                    } catch (error) {
                        console.warn('保存 Token 失败:', error.message);
                        this.showToast('保存 Token 失败', 'error');
                    }
                },

                // 清除 Vercel Blob 配置
                clearVercelBlobConfig() {
                    try {
                        localStorage.removeItem('vercel_blob_token');
                        delete window.VERCEL_BLOB_CONFIG;
                        this.showToast('Vercel Blob 配置已清除', 'success');
                    } catch (error) {
                        console.warn('清除配置失败:', error.message);
                    }
                },

                // === Vercel Blob 相关方法 ===

                // 检查是否有 Vercel Blob 配置
                hasVercelBlobConfig() {
                    // 检查环境变量或配置
                    return !!(window.VERCEL_BLOB_CONFIG ||
                             localStorage.getItem('vercel_blob_token') ||
                             this.detectVercelEnvironment());
                },

                // 检测是否在 Vercel 环境中
                detectVercelEnvironment() {
                    return window.location.hostname.includes('vercel.app') ||
                           window.location.hostname.includes('.vercel.app');
                },

                // 生成唯一文件名 (参考原项目)
                generateUniqueFilename(file) {
                    const timestamp = Date.now();
                    const randomString = Math.random().toString(36).substring(2, 15);
                    const extension = file.name.split('.').pop();
                    const baseName = file.name.split('.').slice(0, -1).join('.');

                    return `${timestamp}-${randomString}-${baseName}.${extension}`;
                },

                // 通过 Vercel Blob API 上传 (小文件，更安全)
                async uploadViaVercelBlobAPI(filename) {
                    try {
                        this.uploadProgress = 30;

                        // 将文件转换为 base64
                        const base64Data = await this.fileToBase64(this.selectedFile);
                        console.log('File converted to base64, length:', base64Data.length);

                        this.uploadProgress = 60;

                        // 调用 API 上传
                        const response = await fetch('/api/upload', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                file: base64Data,
                                filename: filename,
                                originalName: this.selectedFile.name,
                                mimeType: this.selectedFile.type
                            })
                        });

                        if (!response.ok) {
                            const errorData = await response.json();
                            throw new Error(errorData.details || `API上传失败: ${response.statusText}`);
                        }

                        this.uploadProgress = 100;
                        const result = await response.json();
                        return {
                            url: result.url,
                            storageType: 'Vercel Blob (API)'
                        };

                    } catch (error) {
                        console.warn('Vercel Blob API 上传失败:', error.message);
                        return null;
                    }
                },

                // 直接上传到 Vercel Blob (大文件，绕过API限制)
                async uploadDirectlyToVercelBlob(filename) {
                    try {
                        this.uploadProgress = 30;

                        console.log('Direct uploading to Vercel Blob...');

                        // 模拟上传进度
                        const progressInterval = setInterval(() => {
                            if (this.uploadProgress < 90) {
                                this.uploadProgress += Math.random() * 15;
                            }
                        }, 500);

                        try {
                            // 检查是否有 Vercel Blob SDK
                            if (!window.BlobUploadSDK) {
                                // 动态加载 Vercel Blob SDK
                                await this.loadVercelBlobSDK();
                            }

                            // 使用 SDK 上传
                            const token = this.getVercelBlobToken();
                            if (!token) {
                                throw new Error('缺少 Vercel Blob 认证令牌');
                            }

                            const blob = await window.BlobUploadSDK.put(filename, this.selectedFile, {
                                access: 'public',
                                token: token,
                                contentType: this.selectedFile.type || 'application/octet-stream'
                            });

                            clearInterval(progressInterval);
                            this.uploadProgress = 100;

                            console.log('Direct upload successful:', blob.url);
                            return {
                                url: blob.url,
                                storageType: 'Vercel Blob (直传)'
                            };

                        } catch (directError) {
                            clearInterval(progressInterval);
                            console.error('Direct upload failed:', directError);
                            throw new Error(`直接上传失败: ${directError.message}`);
                        }

                    } catch (error) {
                        console.warn('Vercel Blob 直接上传失败:', error.message);
                        return null;
                    }
                },

                // 获取 Vercel Blob Token
                getVercelBlobToken() {
                    // 优先级: 环境变量 > 本地存储 > 配置
                    return window.VERCEL_BLOB_CONFIG?.token ||
                           localStorage.getItem('vercel_blob_token') ||
                           window.BLOB_READ_WRITE_TOKEN;
                },

                // 将文件转换为 base64
                fileToBase64(file) {
                    return new Promise((resolve, reject) => {
                        const reader = new FileReader();
                        reader.onload = () => resolve(reader.result);
                        reader.onerror = reject;
                        reader.readAsDataURL(file);
                    });
                },

                // 动态加载 Vercel Blob SDK
                async loadVercelBlobSDK() {
                    if (window.BlobUploadSDK) {
                        return;
                    }

                    return new Promise((resolve, reject) => {
                        const script = document.createElement('script');
                        script.src = 'https://unpkg.com/@vercel/blob@0.23.4/dist/index.umd.js';
                        script.onload = () => {
                            window.BlobUploadSDK = window.VercelBlobSDK || window.BlobSDK;
                            if (!window.BlobUploadSDK) {
                                throw new Error('Vercel Blob SDK 加载失败');
                            }
                            resolve();
                        };
                        script.onerror = () => reject(new Error('Vercel Blob SDK 加载失败'));
                        document.head.appendChild(script);
                    });
                },

                // 回退到免费托管服务
                async uploadToFreeHosting(file) {
                    let uploadResult = null;

                    // 尝试不同的免费托管服务
                    const services = [
                        this.uploadToFileIO,
                        this.uploadToZeroXZero,
                        this.uploadToTempFiles
                    ];

                    for (const service of services) {
                        try {
                            uploadResult = await service(file);
                            if (uploadResult) {
                                break;
                            }
                        } catch (error) {
                            console.warn('Service upload failed:', error.message);
                        }
                    }

                    // 如果所有外部服务都失败，使用本地存储
                    if (!uploadResult) {
                        uploadResult = await this.uploadToLocalStorage(file);
                    }

                    return uploadResult;
                },

                // File list related methods
                loadFileList() {
                    this.loading = true;
                    this.fileListError = '';

                    // Simulate loading delay
                    setTimeout(() => {
                        this.loading = false;
                        // In real app, this would call an API
                    }, 500);
                },

                loadSampleFiles() {
                    // Load some sample files
                    this.files = [
                        {
                            id: 1,
                            name: 'Project Document.pdf',
                            originalName: 'Project Document.pdf',
                            size: 2048576,
                            type: 'application/pdf',
                            url: '#sample-pdf-1',
                            uploadTime: new Date(Date.now() - 86400000).toISOString()
                        },
                        {
                            id: 2,
                            name: 'Design Mockup.png',
                            originalName: 'Design Mockup.png',
                            size: 1024576,
                            type: 'image/png',
                            url: '#sample-image-1',
                            uploadTime: new Date(Date.now() - 172800000).toISOString()
                        }
                    ];
                },

                refreshFileList() {
                    this.loadFileList();
                    this.showToast('File list refreshed', 'success');
                },

                getTotalSize() {
                    if (this.files.length === 0) return '0 B';

                    let totalBytes = 0;
                    this.files.forEach(file => {
                        totalBytes += file.size;
                    });

                    return this.formatFileSize(totalBytes);
                },

                getFileTypeFromName(fileName) {
                    const extension = fileName.toLowerCase().split('.').pop();
                    const typeMap = {
                        'pdf': 'application/pdf',
                        'jpg': 'image/jpeg',
                        'jpeg': 'image/jpeg',
                        'png': 'image/png',
                        'gif': 'image/gif',
                        'txt': 'text/plain',
                        'doc': 'application/msword',
                        'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
                    };

                    return typeMap[extension] || 'application/octet-stream';
                },

                getFileTypeClass(fileType) {
                    if (fileType === 'application/pdf') return 'type-pdf';
                    if (fileType.startsWith('image/')) return 'type-image';
                    return 'type-default';
                },

                getFileTypeLabel(fileType) {
                    if (fileType === 'application/pdf') return 'PDF';
                    if (fileType.startsWith('image/')) return 'Image';
                    return 'File';
                },

                isPDFFile(file) {
                    return file.type === 'application/pdf';
                },

                formatDate(dateString) {
                    const date = new Date(dateString);
                    const now = new Date();
                    const diffTime = Math.abs(now - date);
                    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

                    if (diffDays === 0) {
                        return 'Today';
                    } else if (diffDays === 1) {
                        return 'Yesterday';
                    } else if (diffDays < 7) {
                        return `${diffDays} days ago`;
                    } else {
                        return date.toLocaleDateString('zh-CN');
                    }
                },

                // File operation methods
                editPDF(file) {
                    // Open PDF viewer
                    window.open(`viewer.html?file=${encodeURIComponent(file.url)}`, '_blank');
                    this.showToast(`Opening ${file.name} for editing`, 'success');
                },

                async copyUrl(url) {
                    try {
                        await navigator.clipboard.writeText(url);
                        this.showToast('Link copied to clipboard!', 'success');
                    } catch (err) {
                        console.error('Copy failed:', err);
                        // Fallback
                        const textArea = document.createElement('textarea');
                        textArea.value = url;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        this.showToast('Link copied to clipboard!', 'success');
                    }
                },

                async deleteFile(file) {
                    const confirmed = await this.showConfirm({
                        title: 'Delete File',
                        message: `Are you sure you want to delete "${file.name}"?`,
                        details: 'This action cannot be undone and the file will be permanently deleted.',
                        icon: '⚠️',
                        confirmText: 'Delete',
                        cancelText: 'Cancel'
                    });

                    if (!confirmed) return;

                    this.deleting = true;

                    try {
                        // Simulate deletion delay
                        await new Promise(resolve => setTimeout(resolve, 1000));

                        // Remove file from list
                        const index = this.files.findIndex(f => f.id === file.id);
                        if (index !== -1) {
                            this.files.splice(index, 1);
                        }

                        this.showToast('File deleted successfully!', 'success');
                    } catch (err) {
                        console.error('Delete failed:', err);
                        this.showToast('Delete failed', 'error');
                    } finally {
                        this.deleting = false;
                    }
                },

                generateMockFileUrl(fileName) {
                    return `#mock-file-${Date.now()}-${fileName}`;
                },

                // UI helper methods
                showToast(message, type = 'success') {
                    this.toast.message = message;
                    this.toast.type = type;
                    this.toast.show = true;

                    setTimeout(() => {
                        this.toast.show = false;
                    }, 3000);
                },

                showConfirm(options) {
                    return new Promise((resolve) => {
                        this.confirmDialog = {
                            show: true,
                            title: options.title,
                            message: options.message,
                            details: options.details || '',
                            icon: options.icon || '⚠️',
                            confirmText: options.confirmText || 'Confirm',
                            cancelText: options.cancelText || 'Cancel',
                            onConfirm: () => {
                                this.confirmDialog.show = false;
                                resolve(true);
                            }
                        };
                    });
                },

                hideConfirmDialog() {
                    this.confirmDialog.show = false;
                    if (this.confirmDialog.onCancel) {
                        this.confirmDialog.onCancel();
                    }
                },

                // Settings related methods
                showSettings() {
                    this.settingsDialog.show = true;
                    // Load current token into dialog
                    this.settingsDialog.blobToken = this.getVercelBlobToken() || '';
                },

                hideSettings() {
                    this.settingsDialog.show = false;
                },

                // Get storage type information
                getStorageTypeInfo() {
                    if (this.hasVercelBlobConfig()) {
                        return 'Vercel Blob (Cloud Storage)';
                    }
                    return 'Free Hosting Services';
                },
            }
        }).mount('#app');
    </script>
</body>
</html>